import * as tslib_1 from "tslib";
import { Injectable, Optional } from '@angular/core';
import { TranslateService } from '@ngx-translate/core';
import { TextEncoder } from 'text-encoding-utf-8';
import { Subject } from 'rxjs';
import { FileType, } from './../models/index';
import { Constants } from './../constants';
import { exportWithFormatterWhenDefined } from './export-utilities';
import { addWhiteSpaces, getTranslationPrefix, htmlEntityDecode, sanitizeHtmlToText, titleCase } from './../services/utilities';
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from '@ngx-translate/core';
var ExportService = /** @class */ (function () {
    function ExportService(translate) {
        this.translate = translate;
        this._delimiter = ',';
        this._fileFormat = FileType.csv;
        this._lineCarriageReturn = '\n';
        this._exportQuoteWrapper = '';
        this._hasGroupedItems = false;
        this.onGridBeforeExportToFile = new Subject();
        this.onGridAfterExportToFile = new Subject();
    }
    Object.defineProperty(ExportService.prototype, "datasetIdName", {
        get: function () {
            return this._gridOptions && this._gridOptions.datasetIdPropertyName || 'id';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ExportService.prototype, "_gridOptions", {
        /** Getter for the Grid Options pulled through the Grid Object */
        get: function () {
            return (this._grid && this._grid.getOptions) ? this._grid.getOptions() : {};
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Initialize the Export Service
     * @param grid
     * @param gridOptions
     * @param dataView
     */
    ExportService.prototype.init = function (grid, dataView) {
        this._grid = grid;
        this._dataView = dataView;
        // get locales provided by user in forRoot or else use default English locales via the Constants
        this._locales = this._gridOptions && this._gridOptions.locales || Constants.locales;
        if (this._gridOptions.enableTranslate && (!this.translate || !this.translate.instant)) {
            throw new Error('[Angular-Slickgrid] requires "ngx-translate" to be installed and configured when the grid option "enableTranslate" is enabled.');
        }
    };
    /**
     * Function to export the Grid result to an Excel CSV format using javascript for it to produce the CSV file.
     * This is a WYSIWYG export to file output (What You See is What You Get)
     *
     * NOTES: The column position needs to match perfectly the JSON Object position because of the way we are pulling the data,
     * which means that if any column(s) got moved in the UI, it has to be reflected in the JSON array output as well
     *
     * Example: exportToFile({ format: FileType.csv, delimiter: DelimiterType.comma })
     */
    ExportService.prototype.exportToFile = function (options) {
        var _this = this;
        if (!this._grid || !this._dataView) {
            throw new Error('[Angular-Slickgrid] it seems that the SlickGrid & DataView objects are not initialized did you forget to enable the grid option flag "enableExcelExport"?');
        }
        return new Promise(function (resolve, reject) {
            _this.onGridBeforeExportToFile.next(true);
            _this._exportOptions = $.extend(true, {}, _this._gridOptions.exportOptions, options);
            _this._delimiter = _this._exportOptions.delimiterOverride || _this._exportOptions.delimiter || '';
            _this._fileFormat = _this._exportOptions.format || FileType.csv;
            // get the CSV output from the grid data
            var dataOutput = _this.getDataOutput();
            // trigger a download file
            // wrap it into a setTimeout so that the EventAggregator has enough time to start a pre-process like showing a spinner
            setTimeout(function () {
                try {
                    var downloadOptions = {
                        filename: _this._exportOptions.filename + "." + _this._fileFormat,
                        format: _this._fileFormat,
                        useUtf8WithBom: _this._exportOptions.hasOwnProperty('useUtf8WithBom') ? _this._exportOptions.useUtf8WithBom : true
                    };
                    // start downloading but add the content property only on the start download not on the event itself
                    _this.startDownloadFile(tslib_1.__assign({}, downloadOptions, { content: dataOutput })); // add content property
                    _this.onGridAfterExportToFile.next(downloadOptions);
                    resolve(true);
                }
                catch (error) {
                    reject(error);
                }
            }, 0);
        });
    };
    /**
     * Triggers download file with file format.
     * IE(6-10) are not supported
     * All other browsers will use plain javascript on client side to produce a file download.
     * @param options
     */
    ExportService.prototype.startDownloadFile = function (options) {
        // IE(6-10) don't support javascript download and our service doesn't support either so throw an error, we have to make a round trip to the Web Server for exporting
        if (navigator.appName === 'Microsoft Internet Explorer') {
            throw new Error('Microsoft Internet Explorer 6 to 10 do not support javascript export to CSV. Please upgrade your browser.');
        }
        // set the correct MIME type
        var mimeType = (options.format === FileType.csv) ? 'text/csv' : 'text/plain';
        // make sure no html entities exist in the data
        var dataContent = htmlEntityDecode(options.content);
        // dealing with Excel CSV export and UTF-8 is a little tricky.. We will use Option #2 to cover older Excel versions
        // Option #1: we need to make Excel knowing that it's dealing with an UTF-8, A correctly formatted UTF8 file can have a Byte Order Mark as its first three octets
        // reference: http://stackoverflow.com/questions/155097/microsoft-excel-mangles-diacritics-in-csv-files
        // Option#2: use a 3rd party extension to javascript encode into UTF-16
        var outputData;
        if (options.format === FileType.csv) {
            outputData = new TextEncoder('utf-8').encode(dataContent);
        }
        else {
            outputData = dataContent;
        }
        // create a Blob object for the download
        var blob = new Blob([options.useUtf8WithBom ? '\uFEFF' : '', outputData], {
            type: mimeType + ";charset=utf-8;"
        });
        // when using IE/Edge, then use different download call
        if (typeof navigator.msSaveOrOpenBlob === 'function') {
            navigator.msSaveOrOpenBlob(blob, options.filename);
        }
        else {
            // this trick will generate a temp <a /> tag
            // the code will then trigger a hidden click for it to start downloading
            var link = document.createElement('a');
            var csvUrl = URL.createObjectURL(blob);
            link.textContent = 'download';
            link.href = csvUrl;
            link.setAttribute('download', options.filename);
            // set the visibility to hidden so there is no effect on your web-layout
            link.style.visibility = 'hidden';
            // this part will append the anchor tag, trigger a click (for download to start) and finally remove the tag once completed
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
    };
    // -----------------------
    // Private functions
    // -----------------------
    ExportService.prototype.getDataOutput = function () {
        var _this = this;
        var columns = this._grid.getColumns() || [];
        // Group By text, it could be set in the export options or from translation or if nothing is found then use the English constant text
        var groupByColumnHeader = this._exportOptions.groupingColumnHeaderTitle;
        if (!groupByColumnHeader && this._gridOptions.enableTranslate && this.translate && this.translate.currentLang && this.translate.instant) {
            groupByColumnHeader = this.translate.instant(getTranslationPrefix(this._gridOptions) + "GROUP_BY");
        }
        else if (!groupByColumnHeader) {
            groupByColumnHeader = this._locales && this._locales.TEXT_GROUP_BY;
        }
        // a CSV needs double quotes wrapper, the other types do not need any wrapper
        this._exportQuoteWrapper = (this._fileFormat === FileType.csv) ? '"' : '';
        // data variable which will hold all the fields data of a row
        var outputDataString = '';
        // get grouped column titles and if found, we will add a "Group by" column at the first column index
        // if it's a CSV format, we'll escape the text in double quotes
        var grouping = this._dataView.getGrouping();
        if (grouping && Array.isArray(grouping) && grouping.length > 0) {
            this._hasGroupedItems = true;
            outputDataString += (this._fileFormat === FileType.csv) ? "\"" + groupByColumnHeader + "\"" + this._delimiter : "" + groupByColumnHeader + this._delimiter;
        }
        else {
            this._hasGroupedItems = false;
        }
        // get all Grouped Column Header Titles when defined (from pre-header row)
        if (this._gridOptions.createPreHeaderPanel && this._gridOptions.showPreHeaderPanel && !this._gridOptions.enableDraggableGrouping) {
            this._groupedColumnHeaders = this.getColumnGroupedHeaderTitles(columns) || [];
            if (this._groupedColumnHeaders && Array.isArray(this._groupedColumnHeaders) && this._groupedColumnHeaders.length > 0) {
                // add the header row + add a new line at the end of the row
                var outputGroupedHeaderTitles = this._groupedColumnHeaders.map(function (header) { return "" + _this._exportQuoteWrapper + header.title + _this._exportQuoteWrapper; });
                outputDataString += (outputGroupedHeaderTitles.join(this._delimiter) + this._lineCarriageReturn);
            }
        }
        // get all Column Header Titles
        this._columnHeaders = this.getColumnHeaders(columns) || [];
        if (this._columnHeaders && Array.isArray(this._columnHeaders) && this._columnHeaders.length > 0) {
            // add the header row + add a new line at the end of the row
            var outputHeaderTitles = this._columnHeaders.map(function (header) { return "" + _this._exportQuoteWrapper + header.title + _this._exportQuoteWrapper; });
            outputDataString += (outputHeaderTitles.join(this._delimiter) + this._lineCarriageReturn);
        }
        // Populate the rest of the Grid Data
        outputDataString += this.getAllGridRowData(columns, this._lineCarriageReturn);
        return outputDataString;
    };
    /**
     * Get all the grid row data and return that as an output string
     */
    ExportService.prototype.getAllGridRowData = function (columns, lineCarriageReturn) {
        var outputDataStrings = [];
        var lineCount = this._dataView.getLength();
        // loop through all the grid rows of data
        for (var rowNumber = 0; rowNumber < lineCount; rowNumber++) {
            var itemObj = this._dataView.getItem(rowNumber);
            if (itemObj) {
                // Normal row (not grouped by anything) would have an ID which was predefined in the Grid Columns definition
                if (itemObj[this.datasetIdName] !== null && itemObj[this.datasetIdName] !== undefined) {
                    // get regular row item data
                    outputDataStrings.push(this.readRegularRowData(columns, rowNumber, itemObj));
                }
                else if (this._hasGroupedItems && itemObj.__groupTotals === undefined) {
                    // get the group row
                    outputDataStrings.push(this.readGroupedTitleRow(itemObj));
                }
                else if (itemObj.__groupTotals) {
                    // else if the row is a Group By and we have agreggators, then a property of '__groupTotals' would exist under that object
                    outputDataStrings.push(this.readGroupedTotalRow(columns, itemObj));
                }
            }
        }
        return outputDataStrings.join(lineCarriageReturn);
    };
    /**
   * Get all Grouped Header Titles and their keys, translate the title when required.
   * @param {Array<object>} columns of the grid
   */
    ExportService.prototype.getColumnGroupedHeaderTitles = function (columns) {
        var _this = this;
        var groupedColumnHeaders = [];
        if (columns && Array.isArray(columns)) {
            // Populate the Grouped Column Header, pull the columnGroup(Key) defined
            columns.forEach(function (columnDef) {
                var groupedHeaderTitle = '';
                if ((columnDef.columnGroupKey || columnDef.columnGroupKey) && _this._gridOptions.enableTranslate && _this.translate && _this.translate.currentLang && _this.translate.instant) {
                    groupedHeaderTitle = _this.translate.instant((columnDef.columnGroupKey || columnDef.columnGroupKey));
                }
                else {
                    groupedHeaderTitle = columnDef.columnGroup || '';
                }
                var skippedField = columnDef.excludeFromExport || false;
                // if column width is 0px, then we consider that field as a hidden field and should not be part of the export
                if ((columnDef.width === undefined || columnDef.width > 0) && !skippedField) {
                    groupedColumnHeaders.push({
                        key: (columnDef.field || columnDef.id),
                        title: groupedHeaderTitle || ''
                    });
                }
            });
        }
        return groupedColumnHeaders;
    };
    /**
     * Get all header titles and their keys, translate the title when required.
     * @param {Array<object>} columns of the grid
     */
    ExportService.prototype.getColumnHeaders = function (columns) {
        var _this = this;
        var columnHeaders = [];
        if (columns && Array.isArray(columns)) {
            // Populate the Column Header, pull the name defined
            columns.forEach(function (columnDef) {
                var headerTitle = '';
                if ((columnDef.headerKey || columnDef.nameKey) && _this._gridOptions.enableTranslate && _this.translate && _this.translate.currentLang && _this.translate.instant) {
                    headerTitle = _this.translate.instant((columnDef.headerKey || columnDef.nameKey));
                }
                else {
                    headerTitle = columnDef.name || titleCase(columnDef.field);
                }
                var skippedField = columnDef.excludeFromExport || false;
                // if column width is 0, then we consider that field as a hidden field and should not be part of the export
                if ((columnDef.width === undefined || columnDef.width > 0) && !skippedField) {
                    columnHeaders.push({
                        key: columnDef.field || columnDef.id,
                        title: headerTitle
                    });
                }
            });
        }
        return columnHeaders;
    };
    /**
     * Get the data of a regular row (a row without grouping)
     * @param row
     * @param itemObj
     */
    ExportService.prototype.readRegularRowData = function (columns, row, itemObj) {
        var idx = 0;
        var rowOutputStrings = [];
        var exportQuoteWrapper = this._exportQuoteWrapper;
        for (var col = 0, ln = columns.length; col < ln; col++) {
            var columnDef = columns[col];
            // skip excluded column
            if (columnDef.excludeFromExport) {
                continue;
            }
            // if we are grouping and are on 1st column index, we need to skip this column since it will be used later by the grouping text:: Group by [columnX]
            if (this._hasGroupedItems && idx === 0) {
                var emptyValue = this._fileFormat === FileType.csv ? "\"\"" : '';
                rowOutputStrings.push(emptyValue);
            }
            // get the output by analyzing if we'll pull the value from the cell or from a formatter
            var itemData = exportWithFormatterWhenDefined(row, col, itemObj, columnDef, this._grid, this._exportOptions);
            // does the user want to sanitize the output data (remove HTML tags)?
            if (columnDef.sanitizeDataExport || this._exportOptions.sanitizeDataExport) {
                itemData = sanitizeHtmlToText(itemData);
            }
            // when CSV we also need to escape double quotes twice, so " becomes ""
            if (this._fileFormat === FileType.csv && itemData) {
                itemData = itemData.toString().replace(/"/gi, "\"\"");
            }
            // do we have a wrapper to keep as a string? in certain cases like "1E06", we don't want excel to transform it into exponential (1.0E06)
            // to cancel that effect we can had = in front, ex: ="1E06"
            var keepAsStringWrapper = (columnDef && columnDef.exportCsvForceToKeepAsString) ? '=' : '';
            rowOutputStrings.push(keepAsStringWrapper + exportQuoteWrapper + itemData + exportQuoteWrapper);
            idx++;
        }
        return rowOutputStrings.join(this._delimiter);
    };
    /**
     * Get the grouped title(s) and its group title formatter, for example if we grouped by salesRep, the returned result would be:: 'Sales Rep: John Dow (2 items)'
     * @param itemObj
     */
    ExportService.prototype.readGroupedTitleRow = function (itemObj) {
        var groupName = sanitizeHtmlToText(itemObj.title);
        var exportQuoteWrapper = this._exportQuoteWrapper;
        groupName = addWhiteSpaces(5 * itemObj.level) + groupName;
        if (this._fileFormat === FileType.csv) {
            // when CSV we also need to escape double quotes twice, so " becomes ""
            groupName = groupName.toString().replace(/"/gi, "\"\"");
        }
        return exportQuoteWrapper + groupName + exportQuoteWrapper;
    };
    /**
     * Get the grouped totals (below the regular rows), these are set by Slick Aggregators.
     * For example if we grouped by "salesRep" and we have a Sum Aggregator on "sales", then the returned output would be:: ["Sum 123$"]
     * @param itemObj
     */
    ExportService.prototype.readGroupedTotalRow = function (columns, itemObj) {
        var _this = this;
        var delimiter = this._exportOptions.delimiter;
        var format = this._exportOptions.format;
        var groupingAggregatorRowText = this._exportOptions.groupingAggregatorRowText || '';
        var exportQuoteWrapper = this._exportQuoteWrapper;
        var outputStrings = ["" + exportQuoteWrapper + groupingAggregatorRowText + exportQuoteWrapper];
        columns.forEach(function (columnDef) {
            var itemData = '';
            var skippedField = columnDef.excludeFromExport || false;
            // if there's a groupTotalsFormatter, we will re-run it to get the exact same output as what is shown in UI
            if (columnDef.groupTotalsFormatter) {
                itemData = columnDef.groupTotalsFormatter(itemObj, columnDef);
            }
            // does the user want to sanitize the output data (remove HTML tags)?
            if (columnDef.sanitizeDataExport || _this._exportOptions.sanitizeDataExport) {
                itemData = sanitizeHtmlToText(itemData);
            }
            if (format === FileType.csv) {
                // when CSV we also need to escape double quotes twice, so a double quote " becomes 2x double quotes ""
                itemData = itemData.toString().replace(/"/gi, "\"\"");
            }
            // add the column (unless user wants to skip it)
            if ((columnDef.width === undefined || columnDef.width > 0) && !skippedField) {
                outputStrings.push(exportQuoteWrapper + itemData + exportQuoteWrapper);
            }
        });
        return outputStrings.join(delimiter);
    };
    ExportService.ctorParameters = function () { return [
        { type: TranslateService, decorators: [{ type: Optional }] }
    ]; };
    ExportService = tslib_1.__decorate([ tslib_1.__param(0, Optional())
    ], ExportService);
ExportService.ɵfac = function ExportService_Factory(t) { return new (t || ExportService)(ɵngcc0.ɵɵinject(ɵngcc1.TranslateService, 8)); };
ExportService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: ExportService, factory: function (t) { return ExportService.ɵfac(t); } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ExportService, [{
        type: Injectable
    }], function () { return [{ type: ɵngcc1.TranslateService, decorators: [{
                type: Optional
            }] }]; }, null); })();
    return ExportService;
}());
export { ExportService };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXhwb3J0LnNlcnZpY2UuanMiLCJzb3VyY2VzIjpbIm5nOi9hbmd1bGFyLXNsaWNrZ3JpZC9hcHAvbW9kdWxlcy9hbmd1bGFyLXNsaWNrZ3JpZC9zZXJ2aWNlcy9leHBvcnQuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxRQUFRLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDckQsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDdkQsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ2xELE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFFL0IsT0FBTyxFQUdMLFFBQVEsR0FJVCxNQUFNLG1CQUFtQixDQUFDO0FBQzNCLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUMzQyxPQUFPLEVBQUUsOEJBQThCLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUNwRSxPQUFPLEVBQUUsY0FBYyxFQUFFLG9CQUFvQixFQUFFLGdCQUFnQixFQUFFLGtCQUFrQixFQUFFLFNBQVMsRUFBRSxNQUFNLHlCQUF5QixDQUFDOzs7QUFNaEk7QUFDb0IsSUFjbEIsdUJBQWdDLFNBQTJCO0FBQUksUUFBL0IsY0FBUyxHQUFULFNBQVMsQ0FBa0I7QUFBQyxRQWRwRCxlQUFVLEdBQUcsR0FBRyxDQUFDO0FBQzNCLFFBQVUsZ0JBQVcsR0FBRyxRQUFRLENBQUMsR0FBRyxDQUFDO0FBQ3JDLFFBQVUsd0JBQW1CLEdBQUcsSUFBSSxDQUFDO0FBQ3JDLFFBR1Usd0JBQW1CLEdBQUcsRUFBRSxDQUFDO0FBQ25DLFFBRVUscUJBQWdCLEdBQUcsS0FBSyxDQUFDO0FBQ25DLFFBQ0UsNkJBQXdCLEdBQUcsSUFBSSxPQUFPLEVBQVcsQ0FBQztBQUNwRCxRQUFFLDRCQUF1QixHQUFHLElBQUksT0FBTyxFQUFvRixDQUFDO0FBQzVILElBQ2lFLENBQUM7QUFD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QUFBQSxBQUFBLEFBQUEsQUFkQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBSUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUdBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUdBLEFBQUEsQUFBQSxBQURBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUVBLEFBS0EsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFFQSxBQVFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBaUNBLEFBaENBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBS0EsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUFBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFpREEsQUFoREEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFFQSxBQUVBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUNBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBR0EsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUF3QkEsQUF2QkEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUNBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBR0EsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUF5QkEsQUF4QkEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBRUEsQUFJQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBRUEsQUFHQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBRUEsQUFJQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFrQ0EsQUFqQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBMVhBLEFBQUEsQUFBQSxBQUFBLEFBZkEsQUFBQSxBQURBLEFBQUEsQUFBQSxBQWdCQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBZkEsQUFBQSxBQTBZQSxBQUFBLEFBQUEsQUFBQSxBQTFZQSxBQTBZQSxBQTFZQSxBQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSwgT3B0aW9uYWwgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFRyYW5zbGF0ZVNlcnZpY2UgfSBmcm9tICdAbmd4LXRyYW5zbGF0ZS9jb3JlJztcbmltcG9ydCB7IFRleHRFbmNvZGVyIH0gZnJvbSAndGV4dC1lbmNvZGluZy11dGYtOCc7XG5pbXBvcnQgeyBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XG5cbmltcG9ydCB7XG4gIENvbHVtbixcbiAgRXhwb3J0T3B0aW9uLFxuICBGaWxlVHlwZSxcbiAgR3JpZE9wdGlvbixcbiAgS2V5VGl0bGVQYWlyLFxuICBMb2NhbGUsXG59IGZyb20gJy4vLi4vbW9kZWxzL2luZGV4JztcbmltcG9ydCB7IENvbnN0YW50cyB9IGZyb20gJy4vLi4vY29uc3RhbnRzJztcbmltcG9ydCB7IGV4cG9ydFdpdGhGb3JtYXR0ZXJXaGVuRGVmaW5lZCB9IGZyb20gJy4vZXhwb3J0LXV0aWxpdGllcyc7XG5pbXBvcnQgeyBhZGRXaGl0ZVNwYWNlcywgZ2V0VHJhbnNsYXRpb25QcmVmaXgsIGh0bWxFbnRpdHlEZWNvZGUsIHNhbml0aXplSHRtbFRvVGV4dCwgdGl0bGVDYXNlIH0gZnJvbSAnLi8uLi9zZXJ2aWNlcy91dGlsaXRpZXMnO1xuXG4vLyB1c2luZyBleHRlcm5hbCBub24tdHlwZWQganMgbGlicmFyaWVzXG5kZWNsYXJlIGxldCAkOiBhbnk7XG5cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBFeHBvcnRTZXJ2aWNlIHtcbiAgcHJpdmF0ZSBfZGVsaW1pdGVyID0gJywnO1xuICBwcml2YXRlIF9maWxlRm9ybWF0ID0gRmlsZVR5cGUuY3N2O1xuICBwcml2YXRlIF9saW5lQ2FycmlhZ2VSZXR1cm4gPSAnXFxuJztcbiAgcHJpdmF0ZSBfZGF0YVZpZXc6IGFueTtcbiAgcHJpdmF0ZSBfZ3JpZDogYW55O1xuICBwcml2YXRlIF9sb2NhbGVzOiBMb2NhbGU7XG4gIHByaXZhdGUgX2V4cG9ydFF1b3RlV3JhcHBlciA9ICcnO1xuICBwcml2YXRlIF9jb2x1bW5IZWFkZXJzOiBLZXlUaXRsZVBhaXJbXTtcbiAgcHJpdmF0ZSBfZ3JvdXBlZENvbHVtbkhlYWRlcnM6IEtleVRpdGxlUGFpcltdO1xuICBwcml2YXRlIF9oYXNHcm91cGVkSXRlbXMgPSBmYWxzZTtcbiAgcHJpdmF0ZSBfZXhwb3J0T3B0aW9uczogRXhwb3J0T3B0aW9uO1xuICBvbkdyaWRCZWZvcmVFeHBvcnRUb0ZpbGUgPSBuZXcgU3ViamVjdDxib29sZWFuPigpO1xuICBvbkdyaWRBZnRlckV4cG9ydFRvRmlsZSA9IG5ldyBTdWJqZWN0PHsgY29udGVudD86IHN0cmluZzsgZmlsZW5hbWU6IHN0cmluZzsgZm9ybWF0OiBzdHJpbmc7IHVzZVV0ZjhXaXRoQm9tOiBib29sZWFuOyB9PigpO1xuXG4gIGNvbnN0cnVjdG9yKEBPcHRpb25hbCgpIHByaXZhdGUgdHJhbnNsYXRlOiBUcmFuc2xhdGVTZXJ2aWNlKSB7IH1cblxuICBwcml2YXRlIGdldCBkYXRhc2V0SWROYW1lKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuX2dyaWRPcHRpb25zICYmIHRoaXMuX2dyaWRPcHRpb25zLmRhdGFzZXRJZFByb3BlcnR5TmFtZSB8fCAnaWQnO1xuICB9XG5cbiAgLyoqIEdldHRlciBmb3IgdGhlIEdyaWQgT3B0aW9ucyBwdWxsZWQgdGhyb3VnaCB0aGUgR3JpZCBPYmplY3QgKi9cbiAgcHJpdmF0ZSBnZXQgX2dyaWRPcHRpb25zKCk6IEdyaWRPcHRpb24ge1xuICAgIHJldHVybiAodGhpcy5fZ3JpZCAmJiB0aGlzLl9ncmlkLmdldE9wdGlvbnMpID8gdGhpcy5fZ3JpZC5nZXRPcHRpb25zKCkgOiB7fTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIHRoZSBFeHBvcnQgU2VydmljZVxuICAgKiBAcGFyYW0gZ3JpZFxuICAgKiBAcGFyYW0gZ3JpZE9wdGlvbnNcbiAgICogQHBhcmFtIGRhdGFWaWV3XG4gICAqL1xuICBpbml0KGdyaWQ6IGFueSwgZGF0YVZpZXc6IGFueSk6IHZvaWQge1xuICAgIHRoaXMuX2dyaWQgPSBncmlkO1xuICAgIHRoaXMuX2RhdGFWaWV3ID0gZGF0YVZpZXc7XG5cbiAgICAvLyBnZXQgbG9jYWxlcyBwcm92aWRlZCBieSB1c2VyIGluIGZvclJvb3Qgb3IgZWxzZSB1c2UgZGVmYXVsdCBFbmdsaXNoIGxvY2FsZXMgdmlhIHRoZSBDb25zdGFudHNcbiAgICB0aGlzLl9sb2NhbGVzID0gdGhpcy5fZ3JpZE9wdGlvbnMgJiYgdGhpcy5fZ3JpZE9wdGlvbnMubG9jYWxlcyB8fCBDb25zdGFudHMubG9jYWxlcztcblxuICAgIGlmICh0aGlzLl9ncmlkT3B0aW9ucy5lbmFibGVUcmFuc2xhdGUgJiYgKCF0aGlzLnRyYW5zbGF0ZSB8fCAhdGhpcy50cmFuc2xhdGUuaW5zdGFudCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignW0FuZ3VsYXItU2xpY2tncmlkXSByZXF1aXJlcyBcIm5neC10cmFuc2xhdGVcIiB0byBiZSBpbnN0YWxsZWQgYW5kIGNvbmZpZ3VyZWQgd2hlbiB0aGUgZ3JpZCBvcHRpb24gXCJlbmFibGVUcmFuc2xhdGVcIiBpcyBlbmFibGVkLicpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBGdW5jdGlvbiB0byBleHBvcnQgdGhlIEdyaWQgcmVzdWx0IHRvIGFuIEV4Y2VsIENTViBmb3JtYXQgdXNpbmcgamF2YXNjcmlwdCBmb3IgaXQgdG8gcHJvZHVjZSB0aGUgQ1NWIGZpbGUuXG4gICAqIFRoaXMgaXMgYSBXWVNJV1lHIGV4cG9ydCB0byBmaWxlIG91dHB1dCAoV2hhdCBZb3UgU2VlIGlzIFdoYXQgWW91IEdldClcbiAgICpcbiAgICogTk9URVM6IFRoZSBjb2x1bW4gcG9zaXRpb24gbmVlZHMgdG8gbWF0Y2ggcGVyZmVjdGx5IHRoZSBKU09OIE9iamVjdCBwb3NpdGlvbiBiZWNhdXNlIG9mIHRoZSB3YXkgd2UgYXJlIHB1bGxpbmcgdGhlIGRhdGEsXG4gICAqIHdoaWNoIG1lYW5zIHRoYXQgaWYgYW55IGNvbHVtbihzKSBnb3QgbW92ZWQgaW4gdGhlIFVJLCBpdCBoYXMgdG8gYmUgcmVmbGVjdGVkIGluIHRoZSBKU09OIGFycmF5IG91dHB1dCBhcyB3ZWxsXG4gICAqXG4gICAqIEV4YW1wbGU6IGV4cG9ydFRvRmlsZSh7IGZvcm1hdDogRmlsZVR5cGUuY3N2LCBkZWxpbWl0ZXI6IERlbGltaXRlclR5cGUuY29tbWEgfSlcbiAgICovXG4gIGV4cG9ydFRvRmlsZShvcHRpb25zOiBFeHBvcnRPcHRpb24pOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICBpZiAoIXRoaXMuX2dyaWQgfHwgIXRoaXMuX2RhdGFWaWV3KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1tBbmd1bGFyLVNsaWNrZ3JpZF0gaXQgc2VlbXMgdGhhdCB0aGUgU2xpY2tHcmlkICYgRGF0YVZpZXcgb2JqZWN0cyBhcmUgbm90IGluaXRpYWxpemVkIGRpZCB5b3UgZm9yZ2V0IHRvIGVuYWJsZSB0aGUgZ3JpZCBvcHRpb24gZmxhZyBcImVuYWJsZUV4Y2VsRXhwb3J0XCI/Jyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMub25HcmlkQmVmb3JlRXhwb3J0VG9GaWxlLm5leHQodHJ1ZSk7XG4gICAgICB0aGlzLl9leHBvcnRPcHRpb25zID0gJC5leHRlbmQodHJ1ZSwge30sIHRoaXMuX2dyaWRPcHRpb25zLmV4cG9ydE9wdGlvbnMsIG9wdGlvbnMpO1xuICAgICAgdGhpcy5fZGVsaW1pdGVyID0gdGhpcy5fZXhwb3J0T3B0aW9ucy5kZWxpbWl0ZXJPdmVycmlkZSB8fCB0aGlzLl9leHBvcnRPcHRpb25zLmRlbGltaXRlciB8fCAnJztcbiAgICAgIHRoaXMuX2ZpbGVGb3JtYXQgPSB0aGlzLl9leHBvcnRPcHRpb25zLmZvcm1hdCB8fCBGaWxlVHlwZS5jc3Y7XG5cbiAgICAgIC8vIGdldCB0aGUgQ1NWIG91dHB1dCBmcm9tIHRoZSBncmlkIGRhdGFcbiAgICAgIGNvbnN0IGRhdGFPdXRwdXQgPSB0aGlzLmdldERhdGFPdXRwdXQoKTtcblxuICAgICAgLy8gdHJpZ2dlciBhIGRvd25sb2FkIGZpbGVcbiAgICAgIC8vIHdyYXAgaXQgaW50byBhIHNldFRpbWVvdXQgc28gdGhhdCB0aGUgRXZlbnRBZ2dyZWdhdG9yIGhhcyBlbm91Z2ggdGltZSB0byBzdGFydCBhIHByZS1wcm9jZXNzIGxpa2Ugc2hvd2luZyBhIHNwaW5uZXJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IGRvd25sb2FkT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGZpbGVuYW1lOiBgJHt0aGlzLl9leHBvcnRPcHRpb25zLmZpbGVuYW1lfS4ke3RoaXMuX2ZpbGVGb3JtYXR9YCxcbiAgICAgICAgICAgIGZvcm1hdDogdGhpcy5fZmlsZUZvcm1hdCxcbiAgICAgICAgICAgIHVzZVV0ZjhXaXRoQm9tOiB0aGlzLl9leHBvcnRPcHRpb25zLmhhc093blByb3BlcnR5KCd1c2VVdGY4V2l0aEJvbScpID8gdGhpcy5fZXhwb3J0T3B0aW9ucy51c2VVdGY4V2l0aEJvbSA6IHRydWVcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgLy8gc3RhcnQgZG93bmxvYWRpbmcgYnV0IGFkZCB0aGUgY29udGVudCBwcm9wZXJ0eSBvbmx5IG9uIHRoZSBzdGFydCBkb3dubG9hZCBub3Qgb24gdGhlIGV2ZW50IGl0c2VsZlxuICAgICAgICAgIHRoaXMuc3RhcnREb3dubG9hZEZpbGUoeyAuLi5kb3dubG9hZE9wdGlvbnMsIGNvbnRlbnQ6IGRhdGFPdXRwdXQgfSk7IC8vIGFkZCBjb250ZW50IHByb3BlcnR5XG4gICAgICAgICAgdGhpcy5vbkdyaWRBZnRlckV4cG9ydFRvRmlsZS5uZXh0KGRvd25sb2FkT3B0aW9ucyk7XG4gICAgICAgICAgcmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9LCAwKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUcmlnZ2VycyBkb3dubG9hZCBmaWxlIHdpdGggZmlsZSBmb3JtYXQuXG4gICAqIElFKDYtMTApIGFyZSBub3Qgc3VwcG9ydGVkXG4gICAqIEFsbCBvdGhlciBicm93c2VycyB3aWxsIHVzZSBwbGFpbiBqYXZhc2NyaXB0IG9uIGNsaWVudCBzaWRlIHRvIHByb2R1Y2UgYSBmaWxlIGRvd25sb2FkLlxuICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgKi9cbiAgc3RhcnREb3dubG9hZEZpbGUob3B0aW9uczogeyBmaWxlbmFtZTogc3RyaW5nLCBjb250ZW50OiBzdHJpbmcsIGZvcm1hdDogRmlsZVR5cGUgfCBzdHJpbmcsIHVzZVV0ZjhXaXRoQm9tOiBib29sZWFuIH0pIHtcbiAgICAvLyBJRSg2LTEwKSBkb24ndCBzdXBwb3J0IGphdmFzY3JpcHQgZG93bmxvYWQgYW5kIG91ciBzZXJ2aWNlIGRvZXNuJ3Qgc3VwcG9ydCBlaXRoZXIgc28gdGhyb3cgYW4gZXJyb3IsIHdlIGhhdmUgdG8gbWFrZSBhIHJvdW5kIHRyaXAgdG8gdGhlIFdlYiBTZXJ2ZXIgZm9yIGV4cG9ydGluZ1xuICAgIGlmIChuYXZpZ2F0b3IuYXBwTmFtZSA9PT0gJ01pY3Jvc29mdCBJbnRlcm5ldCBFeHBsb3JlcicpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTWljcm9zb2Z0IEludGVybmV0IEV4cGxvcmVyIDYgdG8gMTAgZG8gbm90IHN1cHBvcnQgamF2YXNjcmlwdCBleHBvcnQgdG8gQ1NWLiBQbGVhc2UgdXBncmFkZSB5b3VyIGJyb3dzZXIuJyk7XG4gICAgfVxuXG4gICAgLy8gc2V0IHRoZSBjb3JyZWN0IE1JTUUgdHlwZVxuICAgIGNvbnN0IG1pbWVUeXBlID0gKG9wdGlvbnMuZm9ybWF0ID09PSBGaWxlVHlwZS5jc3YpID8gJ3RleHQvY3N2JyA6ICd0ZXh0L3BsYWluJztcblxuICAgIC8vIG1ha2Ugc3VyZSBubyBodG1sIGVudGl0aWVzIGV4aXN0IGluIHRoZSBkYXRhXG4gICAgY29uc3QgZGF0YUNvbnRlbnQgPSBodG1sRW50aXR5RGVjb2RlKG9wdGlvbnMuY29udGVudCk7XG5cbiAgICAvLyBkZWFsaW5nIHdpdGggRXhjZWwgQ1NWIGV4cG9ydCBhbmQgVVRGLTggaXMgYSBsaXR0bGUgdHJpY2t5Li4gV2Ugd2lsbCB1c2UgT3B0aW9uICMyIHRvIGNvdmVyIG9sZGVyIEV4Y2VsIHZlcnNpb25zXG4gICAgLy8gT3B0aW9uICMxOiB3ZSBuZWVkIHRvIG1ha2UgRXhjZWwga25vd2luZyB0aGF0IGl0J3MgZGVhbGluZyB3aXRoIGFuIFVURi04LCBBIGNvcnJlY3RseSBmb3JtYXR0ZWQgVVRGOCBmaWxlIGNhbiBoYXZlIGEgQnl0ZSBPcmRlciBNYXJrIGFzIGl0cyBmaXJzdCB0aHJlZSBvY3RldHNcbiAgICAvLyByZWZlcmVuY2U6IGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTU1MDk3L21pY3Jvc29mdC1leGNlbC1tYW5nbGVzLWRpYWNyaXRpY3MtaW4tY3N2LWZpbGVzXG4gICAgLy8gT3B0aW9uIzI6IHVzZSBhIDNyZCBwYXJ0eSBleHRlbnNpb24gdG8gamF2YXNjcmlwdCBlbmNvZGUgaW50byBVVEYtMTZcbiAgICBsZXQgb3V0cHV0RGF0YTogVWludDhBcnJheSB8IHN0cmluZztcbiAgICBpZiAob3B0aW9ucy5mb3JtYXQgPT09IEZpbGVUeXBlLmNzdikge1xuICAgICAgb3V0cHV0RGF0YSA9IG5ldyBUZXh0RW5jb2RlcigndXRmLTgnKS5lbmNvZGUoZGF0YUNvbnRlbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBvdXRwdXREYXRhID0gZGF0YUNvbnRlbnQ7XG4gICAgfVxuXG4gICAgLy8gY3JlYXRlIGEgQmxvYiBvYmplY3QgZm9yIHRoZSBkb3dubG9hZFxuICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbb3B0aW9ucy51c2VVdGY4V2l0aEJvbSA/ICdcXHVGRUZGJyA6ICcnLCBvdXRwdXREYXRhXSwge1xuICAgICAgdHlwZTogYCR7bWltZVR5cGV9O2NoYXJzZXQ9dXRmLTg7YFxuICAgIH0pO1xuXG4gICAgLy8gd2hlbiB1c2luZyBJRS9FZGdlLCB0aGVuIHVzZSBkaWZmZXJlbnQgZG93bmxvYWQgY2FsbFxuICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yLm1zU2F2ZU9yT3BlbkJsb2IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIG5hdmlnYXRvci5tc1NhdmVPck9wZW5CbG9iKGJsb2IsIG9wdGlvbnMuZmlsZW5hbWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyB0aGlzIHRyaWNrIHdpbGwgZ2VuZXJhdGUgYSB0ZW1wIDxhIC8+IHRhZ1xuICAgICAgLy8gdGhlIGNvZGUgd2lsbCB0aGVuIHRyaWdnZXIgYSBoaWRkZW4gY2xpY2sgZm9yIGl0IHRvIHN0YXJ0IGRvd25sb2FkaW5nXG4gICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgICAgY29uc3QgY3N2VXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcblxuICAgICAgbGluay50ZXh0Q29udGVudCA9ICdkb3dubG9hZCc7XG4gICAgICBsaW5rLmhyZWYgPSBjc3ZVcmw7XG4gICAgICBsaW5rLnNldEF0dHJpYnV0ZSgnZG93bmxvYWQnLCBvcHRpb25zLmZpbGVuYW1lKTtcblxuICAgICAgLy8gc2V0IHRoZSB2aXNpYmlsaXR5IHRvIGhpZGRlbiBzbyB0aGVyZSBpcyBubyBlZmZlY3Qgb24geW91ciB3ZWItbGF5b3V0XG4gICAgICBsaW5rLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcblxuICAgICAgLy8gdGhpcyBwYXJ0IHdpbGwgYXBwZW5kIHRoZSBhbmNob3IgdGFnLCB0cmlnZ2VyIGEgY2xpY2sgKGZvciBkb3dubG9hZCB0byBzdGFydCkgYW5kIGZpbmFsbHkgcmVtb3ZlIHRoZSB0YWcgb25jZSBjb21wbGV0ZWRcbiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobGluayk7XG4gICAgICBsaW5rLmNsaWNrKCk7XG4gICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGxpbmspO1xuICAgIH1cbiAgfVxuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIFByaXZhdGUgZnVuY3Rpb25zXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgcHJpdmF0ZSBnZXREYXRhT3V0cHV0KCk6IHN0cmluZyB7XG4gICAgY29uc3QgY29sdW1ucyA9IHRoaXMuX2dyaWQuZ2V0Q29sdW1ucygpIHx8IFtdO1xuXG4gICAgLy8gR3JvdXAgQnkgdGV4dCwgaXQgY291bGQgYmUgc2V0IGluIHRoZSBleHBvcnQgb3B0aW9ucyBvciBmcm9tIHRyYW5zbGF0aW9uIG9yIGlmIG5vdGhpbmcgaXMgZm91bmQgdGhlbiB1c2UgdGhlIEVuZ2xpc2ggY29uc3RhbnQgdGV4dFxuICAgIGxldCBncm91cEJ5Q29sdW1uSGVhZGVyID0gdGhpcy5fZXhwb3J0T3B0aW9ucy5ncm91cGluZ0NvbHVtbkhlYWRlclRpdGxlO1xuICAgIGlmICghZ3JvdXBCeUNvbHVtbkhlYWRlciAmJiB0aGlzLl9ncmlkT3B0aW9ucy5lbmFibGVUcmFuc2xhdGUgJiYgdGhpcy50cmFuc2xhdGUgJiYgdGhpcy50cmFuc2xhdGUuY3VycmVudExhbmcgJiYgdGhpcy50cmFuc2xhdGUuaW5zdGFudCkge1xuICAgICAgZ3JvdXBCeUNvbHVtbkhlYWRlciA9IHRoaXMudHJhbnNsYXRlLmluc3RhbnQoYCR7Z2V0VHJhbnNsYXRpb25QcmVmaXgodGhpcy5fZ3JpZE9wdGlvbnMpfUdST1VQX0JZYCk7XG4gICAgfSBlbHNlIGlmICghZ3JvdXBCeUNvbHVtbkhlYWRlcikge1xuICAgICAgZ3JvdXBCeUNvbHVtbkhlYWRlciA9IHRoaXMuX2xvY2FsZXMgJiYgdGhpcy5fbG9jYWxlcy5URVhUX0dST1VQX0JZO1xuICAgIH1cblxuICAgIC8vIGEgQ1NWIG5lZWRzIGRvdWJsZSBxdW90ZXMgd3JhcHBlciwgdGhlIG90aGVyIHR5cGVzIGRvIG5vdCBuZWVkIGFueSB3cmFwcGVyXG4gICAgdGhpcy5fZXhwb3J0UXVvdGVXcmFwcGVyID0gKHRoaXMuX2ZpbGVGb3JtYXQgPT09IEZpbGVUeXBlLmNzdikgPyAnXCInIDogJyc7XG5cbiAgICAvLyBkYXRhIHZhcmlhYmxlIHdoaWNoIHdpbGwgaG9sZCBhbGwgdGhlIGZpZWxkcyBkYXRhIG9mIGEgcm93XG4gICAgbGV0IG91dHB1dERhdGFTdHJpbmcgPSAnJztcblxuICAgIC8vIGdldCBncm91cGVkIGNvbHVtbiB0aXRsZXMgYW5kIGlmIGZvdW5kLCB3ZSB3aWxsIGFkZCBhIFwiR3JvdXAgYnlcIiBjb2x1bW4gYXQgdGhlIGZpcnN0IGNvbHVtbiBpbmRleFxuICAgIC8vIGlmIGl0J3MgYSBDU1YgZm9ybWF0LCB3ZSdsbCBlc2NhcGUgdGhlIHRleHQgaW4gZG91YmxlIHF1b3Rlc1xuICAgIGNvbnN0IGdyb3VwaW5nID0gdGhpcy5fZGF0YVZpZXcuZ2V0R3JvdXBpbmcoKTtcbiAgICBpZiAoZ3JvdXBpbmcgJiYgQXJyYXkuaXNBcnJheShncm91cGluZykgJiYgZ3JvdXBpbmcubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5faGFzR3JvdXBlZEl0ZW1zID0gdHJ1ZTtcbiAgICAgIG91dHB1dERhdGFTdHJpbmcgKz0gKHRoaXMuX2ZpbGVGb3JtYXQgPT09IEZpbGVUeXBlLmNzdikgPyBgXCIke2dyb3VwQnlDb2x1bW5IZWFkZXJ9XCIke3RoaXMuX2RlbGltaXRlcn1gIDogYCR7Z3JvdXBCeUNvbHVtbkhlYWRlcn0ke3RoaXMuX2RlbGltaXRlcn1gO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oYXNHcm91cGVkSXRlbXMgPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBnZXQgYWxsIEdyb3VwZWQgQ29sdW1uIEhlYWRlciBUaXRsZXMgd2hlbiBkZWZpbmVkIChmcm9tIHByZS1oZWFkZXIgcm93KVxuICAgIGlmICh0aGlzLl9ncmlkT3B0aW9ucy5jcmVhdGVQcmVIZWFkZXJQYW5lbCAmJiB0aGlzLl9ncmlkT3B0aW9ucy5zaG93UHJlSGVhZGVyUGFuZWwgJiYgIXRoaXMuX2dyaWRPcHRpb25zLmVuYWJsZURyYWdnYWJsZUdyb3VwaW5nKSB7XG4gICAgICB0aGlzLl9ncm91cGVkQ29sdW1uSGVhZGVycyA9IHRoaXMuZ2V0Q29sdW1uR3JvdXBlZEhlYWRlclRpdGxlcyhjb2x1bW5zKSB8fCBbXTtcbiAgICAgIGlmICh0aGlzLl9ncm91cGVkQ29sdW1uSGVhZGVycyAmJiBBcnJheS5pc0FycmF5KHRoaXMuX2dyb3VwZWRDb2x1bW5IZWFkZXJzKSAmJiB0aGlzLl9ncm91cGVkQ29sdW1uSGVhZGVycy5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8vIGFkZCB0aGUgaGVhZGVyIHJvdyArIGFkZCBhIG5ldyBsaW5lIGF0IHRoZSBlbmQgb2YgdGhlIHJvd1xuICAgICAgICBjb25zdCBvdXRwdXRHcm91cGVkSGVhZGVyVGl0bGVzID0gdGhpcy5fZ3JvdXBlZENvbHVtbkhlYWRlcnMubWFwKChoZWFkZXIpID0+IGAke3RoaXMuX2V4cG9ydFF1b3RlV3JhcHBlcn0ke2hlYWRlci50aXRsZX0ke3RoaXMuX2V4cG9ydFF1b3RlV3JhcHBlcn1gKTtcbiAgICAgICAgb3V0cHV0RGF0YVN0cmluZyArPSAob3V0cHV0R3JvdXBlZEhlYWRlclRpdGxlcy5qb2luKHRoaXMuX2RlbGltaXRlcikgKyB0aGlzLl9saW5lQ2FycmlhZ2VSZXR1cm4pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIGdldCBhbGwgQ29sdW1uIEhlYWRlciBUaXRsZXNcbiAgICB0aGlzLl9jb2x1bW5IZWFkZXJzID0gdGhpcy5nZXRDb2x1bW5IZWFkZXJzKGNvbHVtbnMpIHx8IFtdO1xuICAgIGlmICh0aGlzLl9jb2x1bW5IZWFkZXJzICYmIEFycmF5LmlzQXJyYXkodGhpcy5fY29sdW1uSGVhZGVycykgJiYgdGhpcy5fY29sdW1uSGVhZGVycy5sZW5ndGggPiAwKSB7XG4gICAgICAvLyBhZGQgdGhlIGhlYWRlciByb3cgKyBhZGQgYSBuZXcgbGluZSBhdCB0aGUgZW5kIG9mIHRoZSByb3dcbiAgICAgIGNvbnN0IG91dHB1dEhlYWRlclRpdGxlcyA9IHRoaXMuX2NvbHVtbkhlYWRlcnMubWFwKChoZWFkZXIpID0+IGAke3RoaXMuX2V4cG9ydFF1b3RlV3JhcHBlcn0ke2hlYWRlci50aXRsZX0ke3RoaXMuX2V4cG9ydFF1b3RlV3JhcHBlcn1gKTtcbiAgICAgIG91dHB1dERhdGFTdHJpbmcgKz0gKG91dHB1dEhlYWRlclRpdGxlcy5qb2luKHRoaXMuX2RlbGltaXRlcikgKyB0aGlzLl9saW5lQ2FycmlhZ2VSZXR1cm4pO1xuICAgIH1cblxuICAgIC8vIFBvcHVsYXRlIHRoZSByZXN0IG9mIHRoZSBHcmlkIERhdGFcbiAgICBvdXRwdXREYXRhU3RyaW5nICs9IHRoaXMuZ2V0QWxsR3JpZFJvd0RhdGEoY29sdW1ucywgdGhpcy5fbGluZUNhcnJpYWdlUmV0dXJuKTtcblxuICAgIHJldHVybiBvdXRwdXREYXRhU3RyaW5nO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhbGwgdGhlIGdyaWQgcm93IGRhdGEgYW5kIHJldHVybiB0aGF0IGFzIGFuIG91dHB1dCBzdHJpbmdcbiAgICovXG4gIHByaXZhdGUgZ2V0QWxsR3JpZFJvd0RhdGEoY29sdW1uczogQ29sdW1uW10sIGxpbmVDYXJyaWFnZVJldHVybjogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBvdXRwdXREYXRhU3RyaW5ncyA9IFtdO1xuICAgIGNvbnN0IGxpbmVDb3VudCA9IHRoaXMuX2RhdGFWaWV3LmdldExlbmd0aCgpO1xuXG4gICAgLy8gbG9vcCB0aHJvdWdoIGFsbCB0aGUgZ3JpZCByb3dzIG9mIGRhdGFcbiAgICBmb3IgKGxldCByb3dOdW1iZXIgPSAwOyByb3dOdW1iZXIgPCBsaW5lQ291bnQ7IHJvd051bWJlcisrKSB7XG4gICAgICBjb25zdCBpdGVtT2JqID0gdGhpcy5fZGF0YVZpZXcuZ2V0SXRlbShyb3dOdW1iZXIpO1xuICAgICAgaWYgKGl0ZW1PYmopIHtcbiAgICAgICAgLy8gTm9ybWFsIHJvdyAobm90IGdyb3VwZWQgYnkgYW55dGhpbmcpIHdvdWxkIGhhdmUgYW4gSUQgd2hpY2ggd2FzIHByZWRlZmluZWQgaW4gdGhlIEdyaWQgQ29sdW1ucyBkZWZpbml0aW9uXG4gICAgICAgIGlmIChpdGVtT2JqW3RoaXMuZGF0YXNldElkTmFtZV0gIT09IG51bGwgJiYgaXRlbU9ialt0aGlzLmRhdGFzZXRJZE5hbWVdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAvLyBnZXQgcmVndWxhciByb3cgaXRlbSBkYXRhXG4gICAgICAgICAgb3V0cHV0RGF0YVN0cmluZ3MucHVzaCh0aGlzLnJlYWRSZWd1bGFyUm93RGF0YShjb2x1bW5zLCByb3dOdW1iZXIsIGl0ZW1PYmopKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9oYXNHcm91cGVkSXRlbXMgJiYgaXRlbU9iai5fX2dyb3VwVG90YWxzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAvLyBnZXQgdGhlIGdyb3VwIHJvd1xuICAgICAgICAgIG91dHB1dERhdGFTdHJpbmdzLnB1c2godGhpcy5yZWFkR3JvdXBlZFRpdGxlUm93KGl0ZW1PYmopKTtcbiAgICAgICAgfSBlbHNlIGlmIChpdGVtT2JqLl9fZ3JvdXBUb3RhbHMpIHtcbiAgICAgICAgICAvLyBlbHNlIGlmIHRoZSByb3cgaXMgYSBHcm91cCBCeSBhbmQgd2UgaGF2ZSBhZ3JlZ2dhdG9ycywgdGhlbiBhIHByb3BlcnR5IG9mICdfX2dyb3VwVG90YWxzJyB3b3VsZCBleGlzdCB1bmRlciB0aGF0IG9iamVjdFxuICAgICAgICAgIG91dHB1dERhdGFTdHJpbmdzLnB1c2godGhpcy5yZWFkR3JvdXBlZFRvdGFsUm93KGNvbHVtbnMsIGl0ZW1PYmopKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBvdXRwdXREYXRhU3RyaW5ncy5qb2luKGxpbmVDYXJyaWFnZVJldHVybik7XG4gIH1cblxuICAvKipcbiAqIEdldCBhbGwgR3JvdXBlZCBIZWFkZXIgVGl0bGVzIGFuZCB0aGVpciBrZXlzLCB0cmFuc2xhdGUgdGhlIHRpdGxlIHdoZW4gcmVxdWlyZWQuXG4gKiBAcGFyYW0ge0FycmF5PG9iamVjdD59IGNvbHVtbnMgb2YgdGhlIGdyaWRcbiAqL1xuICBwcml2YXRlIGdldENvbHVtbkdyb3VwZWRIZWFkZXJUaXRsZXMoY29sdW1uczogQ29sdW1uW10pOiBLZXlUaXRsZVBhaXJbXSB7XG4gICAgY29uc3QgZ3JvdXBlZENvbHVtbkhlYWRlcnM6IEtleVRpdGxlUGFpcltdID0gW107XG5cbiAgICBpZiAoY29sdW1ucyAmJiBBcnJheS5pc0FycmF5KGNvbHVtbnMpKSB7XG4gICAgICAvLyBQb3B1bGF0ZSB0aGUgR3JvdXBlZCBDb2x1bW4gSGVhZGVyLCBwdWxsIHRoZSBjb2x1bW5Hcm91cChLZXkpIGRlZmluZWRcbiAgICAgIGNvbHVtbnMuZm9yRWFjaCgoY29sdW1uRGVmKSA9PiB7XG4gICAgICAgIGxldCBncm91cGVkSGVhZGVyVGl0bGUgPSAnJztcbiAgICAgICAgaWYgKChjb2x1bW5EZWYuY29sdW1uR3JvdXBLZXkgfHwgY29sdW1uRGVmLmNvbHVtbkdyb3VwS2V5KSAmJiB0aGlzLl9ncmlkT3B0aW9ucy5lbmFibGVUcmFuc2xhdGUgJiYgdGhpcy50cmFuc2xhdGUgJiYgdGhpcy50cmFuc2xhdGUuY3VycmVudExhbmcgJiYgdGhpcy50cmFuc2xhdGUuaW5zdGFudCkge1xuICAgICAgICAgIGdyb3VwZWRIZWFkZXJUaXRsZSA9IHRoaXMudHJhbnNsYXRlLmluc3RhbnQoKGNvbHVtbkRlZi5jb2x1bW5Hcm91cEtleSB8fCBjb2x1bW5EZWYuY29sdW1uR3JvdXBLZXkpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBncm91cGVkSGVhZGVyVGl0bGUgPSBjb2x1bW5EZWYuY29sdW1uR3JvdXAgfHwgJyc7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2tpcHBlZEZpZWxkID0gY29sdW1uRGVmLmV4Y2x1ZGVGcm9tRXhwb3J0IHx8IGZhbHNlO1xuXG4gICAgICAgIC8vIGlmIGNvbHVtbiB3aWR0aCBpcyAwcHgsIHRoZW4gd2UgY29uc2lkZXIgdGhhdCBmaWVsZCBhcyBhIGhpZGRlbiBmaWVsZCBhbmQgc2hvdWxkIG5vdCBiZSBwYXJ0IG9mIHRoZSBleHBvcnRcbiAgICAgICAgaWYgKChjb2x1bW5EZWYud2lkdGggPT09IHVuZGVmaW5lZCB8fCBjb2x1bW5EZWYud2lkdGggPiAwKSAmJiAhc2tpcHBlZEZpZWxkKSB7XG4gICAgICAgICAgZ3JvdXBlZENvbHVtbkhlYWRlcnMucHVzaCh7XG4gICAgICAgICAgICBrZXk6IChjb2x1bW5EZWYuZmllbGQgfHwgY29sdW1uRGVmLmlkKSBhcyBzdHJpbmcsXG4gICAgICAgICAgICB0aXRsZTogZ3JvdXBlZEhlYWRlclRpdGxlIHx8ICcnXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gZ3JvdXBlZENvbHVtbkhlYWRlcnM7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGFsbCBoZWFkZXIgdGl0bGVzIGFuZCB0aGVpciBrZXlzLCB0cmFuc2xhdGUgdGhlIHRpdGxlIHdoZW4gcmVxdWlyZWQuXG4gICAqIEBwYXJhbSB7QXJyYXk8b2JqZWN0Pn0gY29sdW1ucyBvZiB0aGUgZ3JpZFxuICAgKi9cbiAgcHJpdmF0ZSBnZXRDb2x1bW5IZWFkZXJzKGNvbHVtbnM6IENvbHVtbltdKTogS2V5VGl0bGVQYWlyW10ge1xuICAgIGNvbnN0IGNvbHVtbkhlYWRlcnMgPSBbXTtcblxuICAgIGlmIChjb2x1bW5zICYmIEFycmF5LmlzQXJyYXkoY29sdW1ucykpIHtcbiAgICAgIC8vIFBvcHVsYXRlIHRoZSBDb2x1bW4gSGVhZGVyLCBwdWxsIHRoZSBuYW1lIGRlZmluZWRcbiAgICAgIGNvbHVtbnMuZm9yRWFjaCgoY29sdW1uRGVmKSA9PiB7XG4gICAgICAgIGxldCBoZWFkZXJUaXRsZSA9ICcnO1xuICAgICAgICBpZiAoKGNvbHVtbkRlZi5oZWFkZXJLZXkgfHwgY29sdW1uRGVmLm5hbWVLZXkpICYmIHRoaXMuX2dyaWRPcHRpb25zLmVuYWJsZVRyYW5zbGF0ZSAmJiB0aGlzLnRyYW5zbGF0ZSAmJiB0aGlzLnRyYW5zbGF0ZS5jdXJyZW50TGFuZyAmJiB0aGlzLnRyYW5zbGF0ZS5pbnN0YW50KSB7XG4gICAgICAgICAgaGVhZGVyVGl0bGUgPSB0aGlzLnRyYW5zbGF0ZS5pbnN0YW50KChjb2x1bW5EZWYuaGVhZGVyS2V5IHx8IGNvbHVtbkRlZi5uYW1lS2V5KSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaGVhZGVyVGl0bGUgPSBjb2x1bW5EZWYubmFtZSB8fCB0aXRsZUNhc2UoY29sdW1uRGVmLmZpZWxkKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBza2lwcGVkRmllbGQgPSBjb2x1bW5EZWYuZXhjbHVkZUZyb21FeHBvcnQgfHwgZmFsc2U7XG5cbiAgICAgICAgLy8gaWYgY29sdW1uIHdpZHRoIGlzIDAsIHRoZW4gd2UgY29uc2lkZXIgdGhhdCBmaWVsZCBhcyBhIGhpZGRlbiBmaWVsZCBhbmQgc2hvdWxkIG5vdCBiZSBwYXJ0IG9mIHRoZSBleHBvcnRcbiAgICAgICAgaWYgKChjb2x1bW5EZWYud2lkdGggPT09IHVuZGVmaW5lZCB8fCBjb2x1bW5EZWYud2lkdGggPiAwKSAmJiAhc2tpcHBlZEZpZWxkKSB7XG4gICAgICAgICAgY29sdW1uSGVhZGVycy5wdXNoKHtcbiAgICAgICAgICAgIGtleTogY29sdW1uRGVmLmZpZWxkIHx8IGNvbHVtbkRlZi5pZCxcbiAgICAgICAgICAgIHRpdGxlOiBoZWFkZXJUaXRsZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gY29sdW1uSGVhZGVycztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGRhdGEgb2YgYSByZWd1bGFyIHJvdyAoYSByb3cgd2l0aG91dCBncm91cGluZylcbiAgICogQHBhcmFtIHJvd1xuICAgKiBAcGFyYW0gaXRlbU9ialxuICAgKi9cbiAgcHJpdmF0ZSByZWFkUmVndWxhclJvd0RhdGEoY29sdW1uczogQ29sdW1uW10sIHJvdzogbnVtYmVyLCBpdGVtT2JqOiBhbnkpIHtcbiAgICBsZXQgaWR4ID0gMDtcbiAgICBjb25zdCByb3dPdXRwdXRTdHJpbmdzID0gW107XG4gICAgY29uc3QgZXhwb3J0UXVvdGVXcmFwcGVyID0gdGhpcy5fZXhwb3J0UXVvdGVXcmFwcGVyO1xuXG4gICAgZm9yIChsZXQgY29sID0gMCwgbG4gPSBjb2x1bW5zLmxlbmd0aDsgY29sIDwgbG47IGNvbCsrKSB7XG4gICAgICBjb25zdCBjb2x1bW5EZWYgPSBjb2x1bW5zW2NvbF07XG5cbiAgICAgIC8vIHNraXAgZXhjbHVkZWQgY29sdW1uXG4gICAgICBpZiAoY29sdW1uRGVmLmV4Y2x1ZGVGcm9tRXhwb3J0KSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBpZiB3ZSBhcmUgZ3JvdXBpbmcgYW5kIGFyZSBvbiAxc3QgY29sdW1uIGluZGV4LCB3ZSBuZWVkIHRvIHNraXAgdGhpcyBjb2x1bW4gc2luY2UgaXQgd2lsbCBiZSB1c2VkIGxhdGVyIGJ5IHRoZSBncm91cGluZyB0ZXh0OjogR3JvdXAgYnkgW2NvbHVtblhdXG4gICAgICBpZiAodGhpcy5faGFzR3JvdXBlZEl0ZW1zICYmIGlkeCA9PT0gMCkge1xuICAgICAgICBjb25zdCBlbXB0eVZhbHVlID0gdGhpcy5fZmlsZUZvcm1hdCA9PT0gRmlsZVR5cGUuY3N2ID8gYFwiXCJgIDogJyc7XG4gICAgICAgIHJvd091dHB1dFN0cmluZ3MucHVzaChlbXB0eVZhbHVlKTtcbiAgICAgIH1cblxuICAgICAgLy8gZ2V0IHRoZSBvdXRwdXQgYnkgYW5hbHl6aW5nIGlmIHdlJ2xsIHB1bGwgdGhlIHZhbHVlIGZyb20gdGhlIGNlbGwgb3IgZnJvbSBhIGZvcm1hdHRlclxuICAgICAgbGV0IGl0ZW1EYXRhID0gZXhwb3J0V2l0aEZvcm1hdHRlcldoZW5EZWZpbmVkKHJvdywgY29sLCBpdGVtT2JqLCBjb2x1bW5EZWYsIHRoaXMuX2dyaWQsIHRoaXMuX2V4cG9ydE9wdGlvbnMpO1xuXG4gICAgICAvLyBkb2VzIHRoZSB1c2VyIHdhbnQgdG8gc2FuaXRpemUgdGhlIG91dHB1dCBkYXRhIChyZW1vdmUgSFRNTCB0YWdzKT9cbiAgICAgIGlmIChjb2x1bW5EZWYuc2FuaXRpemVEYXRhRXhwb3J0IHx8IHRoaXMuX2V4cG9ydE9wdGlvbnMuc2FuaXRpemVEYXRhRXhwb3J0KSB7XG4gICAgICAgIGl0ZW1EYXRhID0gc2FuaXRpemVIdG1sVG9UZXh0KGl0ZW1EYXRhKTtcbiAgICAgIH1cblxuICAgICAgLy8gd2hlbiBDU1Ygd2UgYWxzbyBuZWVkIHRvIGVzY2FwZSBkb3VibGUgcXVvdGVzIHR3aWNlLCBzbyBcIiBiZWNvbWVzIFwiXCJcbiAgICAgIGlmICh0aGlzLl9maWxlRm9ybWF0ID09PSBGaWxlVHlwZS5jc3YgJiYgaXRlbURhdGEpIHtcbiAgICAgICAgaXRlbURhdGEgPSBpdGVtRGF0YS50b1N0cmluZygpLnJlcGxhY2UoL1wiL2dpLCBgXCJcImApO1xuICAgICAgfVxuXG4gICAgICAvLyBkbyB3ZSBoYXZlIGEgd3JhcHBlciB0byBrZWVwIGFzIGEgc3RyaW5nPyBpbiBjZXJ0YWluIGNhc2VzIGxpa2UgXCIxRTA2XCIsIHdlIGRvbid0IHdhbnQgZXhjZWwgdG8gdHJhbnNmb3JtIGl0IGludG8gZXhwb25lbnRpYWwgKDEuMEUwNilcbiAgICAgIC8vIHRvIGNhbmNlbCB0aGF0IGVmZmVjdCB3ZSBjYW4gaGFkID0gaW4gZnJvbnQsIGV4OiA9XCIxRTA2XCJcbiAgICAgIGNvbnN0IGtlZXBBc1N0cmluZ1dyYXBwZXIgPSAoY29sdW1uRGVmICYmIGNvbHVtbkRlZi5leHBvcnRDc3ZGb3JjZVRvS2VlcEFzU3RyaW5nKSA/ICc9JyA6ICcnO1xuXG4gICAgICByb3dPdXRwdXRTdHJpbmdzLnB1c2goa2VlcEFzU3RyaW5nV3JhcHBlciArIGV4cG9ydFF1b3RlV3JhcHBlciArIGl0ZW1EYXRhICsgZXhwb3J0UXVvdGVXcmFwcGVyKTtcbiAgICAgIGlkeCsrO1xuICAgIH1cblxuICAgIHJldHVybiByb3dPdXRwdXRTdHJpbmdzLmpvaW4odGhpcy5fZGVsaW1pdGVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGdyb3VwZWQgdGl0bGUocykgYW5kIGl0cyBncm91cCB0aXRsZSBmb3JtYXR0ZXIsIGZvciBleGFtcGxlIGlmIHdlIGdyb3VwZWQgYnkgc2FsZXNSZXAsIHRoZSByZXR1cm5lZCByZXN1bHQgd291bGQgYmU6OiAnU2FsZXMgUmVwOiBKb2huIERvdyAoMiBpdGVtcyknXG4gICAqIEBwYXJhbSBpdGVtT2JqXG4gICAqL1xuICBwcml2YXRlIHJlYWRHcm91cGVkVGl0bGVSb3coaXRlbU9iajogYW55KSB7XG4gICAgbGV0IGdyb3VwTmFtZSA9IHNhbml0aXplSHRtbFRvVGV4dChpdGVtT2JqLnRpdGxlKTtcbiAgICBjb25zdCBleHBvcnRRdW90ZVdyYXBwZXIgPSB0aGlzLl9leHBvcnRRdW90ZVdyYXBwZXI7XG5cbiAgICBncm91cE5hbWUgPSBhZGRXaGl0ZVNwYWNlcyg1ICogaXRlbU9iai5sZXZlbCkgKyBncm91cE5hbWU7XG5cbiAgICBpZiAodGhpcy5fZmlsZUZvcm1hdCA9PT0gRmlsZVR5cGUuY3N2KSB7XG4gICAgICAvLyB3aGVuIENTViB3ZSBhbHNvIG5lZWQgdG8gZXNjYXBlIGRvdWJsZSBxdW90ZXMgdHdpY2UsIHNvIFwiIGJlY29tZXMgXCJcIlxuICAgICAgZ3JvdXBOYW1lID0gZ3JvdXBOYW1lLnRvU3RyaW5nKCkucmVwbGFjZSgvXCIvZ2ksIGBcIlwiYCk7XG4gICAgfVxuICAgIHJldHVybiBleHBvcnRRdW90ZVdyYXBwZXIgKyBncm91cE5hbWUgKyBleHBvcnRRdW90ZVdyYXBwZXI7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBncm91cGVkIHRvdGFscyAoYmVsb3cgdGhlIHJlZ3VsYXIgcm93cyksIHRoZXNlIGFyZSBzZXQgYnkgU2xpY2sgQWdncmVnYXRvcnMuXG4gICAqIEZvciBleGFtcGxlIGlmIHdlIGdyb3VwZWQgYnkgXCJzYWxlc1JlcFwiIGFuZCB3ZSBoYXZlIGEgU3VtIEFnZ3JlZ2F0b3Igb24gXCJzYWxlc1wiLCB0aGVuIHRoZSByZXR1cm5lZCBvdXRwdXQgd291bGQgYmU6OiBbXCJTdW0gMTIzJFwiXVxuICAgKiBAcGFyYW0gaXRlbU9ialxuICAgKi9cbiAgcHJpdmF0ZSByZWFkR3JvdXBlZFRvdGFsUm93KGNvbHVtbnM6IENvbHVtbltdLCBpdGVtT2JqOiBhbnkpIHtcbiAgICBjb25zdCBkZWxpbWl0ZXIgPSB0aGlzLl9leHBvcnRPcHRpb25zLmRlbGltaXRlcjtcbiAgICBjb25zdCBmb3JtYXQgPSB0aGlzLl9leHBvcnRPcHRpb25zLmZvcm1hdDtcbiAgICBjb25zdCBncm91cGluZ0FnZ3JlZ2F0b3JSb3dUZXh0ID0gdGhpcy5fZXhwb3J0T3B0aW9ucy5ncm91cGluZ0FnZ3JlZ2F0b3JSb3dUZXh0IHx8ICcnO1xuICAgIGNvbnN0IGV4cG9ydFF1b3RlV3JhcHBlciA9IHRoaXMuX2V4cG9ydFF1b3RlV3JhcHBlcjtcbiAgICBjb25zdCBvdXRwdXRTdHJpbmdzID0gW2Ake2V4cG9ydFF1b3RlV3JhcHBlcn0ke2dyb3VwaW5nQWdncmVnYXRvclJvd1RleHR9JHtleHBvcnRRdW90ZVdyYXBwZXJ9YF07XG5cbiAgICBjb2x1bW5zLmZvckVhY2goKGNvbHVtbkRlZikgPT4ge1xuICAgICAgbGV0IGl0ZW1EYXRhID0gJyc7XG5cbiAgICAgIGNvbnN0IHNraXBwZWRGaWVsZCA9IGNvbHVtbkRlZi5leGNsdWRlRnJvbUV4cG9ydCB8fCBmYWxzZTtcblxuICAgICAgLy8gaWYgdGhlcmUncyBhIGdyb3VwVG90YWxzRm9ybWF0dGVyLCB3ZSB3aWxsIHJlLXJ1biBpdCB0byBnZXQgdGhlIGV4YWN0IHNhbWUgb3V0cHV0IGFzIHdoYXQgaXMgc2hvd24gaW4gVUlcbiAgICAgIGlmIChjb2x1bW5EZWYuZ3JvdXBUb3RhbHNGb3JtYXR0ZXIpIHtcbiAgICAgICAgaXRlbURhdGEgPSBjb2x1bW5EZWYuZ3JvdXBUb3RhbHNGb3JtYXR0ZXIoaXRlbU9iaiwgY29sdW1uRGVmKTtcbiAgICAgIH1cblxuICAgICAgLy8gZG9lcyB0aGUgdXNlciB3YW50IHRvIHNhbml0aXplIHRoZSBvdXRwdXQgZGF0YSAocmVtb3ZlIEhUTUwgdGFncyk/XG4gICAgICBpZiAoY29sdW1uRGVmLnNhbml0aXplRGF0YUV4cG9ydCB8fCB0aGlzLl9leHBvcnRPcHRpb25zLnNhbml0aXplRGF0YUV4cG9ydCkge1xuICAgICAgICBpdGVtRGF0YSA9IHNhbml0aXplSHRtbFRvVGV4dChpdGVtRGF0YSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChmb3JtYXQgPT09IEZpbGVUeXBlLmNzdikge1xuICAgICAgICAvLyB3aGVuIENTViB3ZSBhbHNvIG5lZWQgdG8gZXNjYXBlIGRvdWJsZSBxdW90ZXMgdHdpY2UsIHNvIGEgZG91YmxlIHF1b3RlIFwiIGJlY29tZXMgMnggZG91YmxlIHF1b3RlcyBcIlwiXG4gICAgICAgIGl0ZW1EYXRhID0gaXRlbURhdGEudG9TdHJpbmcoKS5yZXBsYWNlKC9cIi9naSwgYFwiXCJgKTtcbiAgICAgIH1cblxuICAgICAgLy8gYWRkIHRoZSBjb2x1bW4gKHVubGVzcyB1c2VyIHdhbnRzIHRvIHNraXAgaXQpXG4gICAgICBpZiAoKGNvbHVtbkRlZi53aWR0aCA9PT0gdW5kZWZpbmVkIHx8IGNvbHVtbkRlZi53aWR0aCA+IDApICYmICFza2lwcGVkRmllbGQpIHtcbiAgICAgICAgb3V0cHV0U3RyaW5ncy5wdXNoKGV4cG9ydFF1b3RlV3JhcHBlciArIGl0ZW1EYXRhICsgZXhwb3J0UXVvdGVXcmFwcGVyKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBvdXRwdXRTdHJpbmdzLmpvaW4oZGVsaW1pdGVyKTtcbiAgfVxufVxuIl19