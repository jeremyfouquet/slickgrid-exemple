import * as tslib_1 from "tslib";
import { Injectable, Optional } from '@angular/core';
import { TranslateService } from '@ngx-translate/core';
import * as ExcelBuilder from 'excel-builder-webpacker';
import { Subject } from 'rxjs';
import * as moment_ from 'moment-mini';
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from '@ngx-translate/core';
var moment = moment_; // patch to fix rollup "moment has no default export" issue, document here https://github.com/rollup/rollup/issues/670
import { FileType, FieldType, } from '../models/index';
import { Constants } from '../constants';
import { exportWithFormatterWhenDefined } from './export-utilities';
import { addWhiteSpaces, getTranslationPrefix, mapMomentDateFormatWithFieldType, sanitizeHtmlToText, titleCase } from './utilities';
var ExcelExportService = /** @class */ (function () {
    function ExcelExportService(translate) {
        this.translate = translate;
        this._fileFormat = FileType.xlsx;
        this._hasGroupedItems = false;
        this.onGridBeforeExportToExcel = new Subject();
        this.onGridAfterExportToExcel = new Subject();
    }
    Object.defineProperty(ExcelExportService.prototype, "datasetIdName", {
        get: function () {
            return this._gridOptions && this._gridOptions.datasetIdPropertyName || 'id';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ExcelExportService.prototype, "_gridOptions", {
        /** Getter for the Grid Options pulled through the Grid Object */
        get: function () {
            return (this._grid && this._grid.getOptions) ? this._grid.getOptions() : {};
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Initialize the Export Service
     * @param grid
     * @param dataView
     */
    ExcelExportService.prototype.init = function (grid, dataView) {
        this._grid = grid;
        this._dataView = dataView;
        // get locales provided by user in forRoot or else use default English locales via the Constants
        this._locales = this._gridOptions && this._gridOptions.locales || Constants.locales;
        if (this._gridOptions.enableTranslate && (!this.translate || !this.translate.instant)) {
            throw new Error('[Angular-Slickgrid] requires "ngx-translate" to be installed and configured when the grid option "enableTranslate" is enabled.');
        }
    };
    /**
     * Function to export the Grid result to an Excel CSV format using javascript for it to produce the CSV file.
     * This is a WYSIWYG export to file output (What You See is What You Get)
     *
     * NOTES: The column position needs to match perfectly the JSON Object position because of the way we are pulling the data,
     * which means that if any column(s) got moved in the UI, it has to be reflected in the JSON array output as well
     *
     * Example: exportToExcel({ format: FileType.csv, delimiter: DelimiterType.comma })
     */
    ExcelExportService.prototype.exportToExcel = function (options) {
        var _this = this;
        if (!this._grid || !this._dataView) {
            throw new Error('[Angular-Slickgrid] it seems that the SlickGrid & DataView objects are not initialized did you forget to enable the grid option flag "enableExcelExport"?');
        }
        return new Promise(function (resolve, reject) {
            _this.onGridBeforeExportToExcel.next(true);
            _this._excelExportOptions = $.extend(true, {}, _this._gridOptions.excelExportOptions, options);
            _this._fileFormat = _this._excelExportOptions.format || FileType.xlsx;
            // prepare the Excel Workbook & Sheet
            _this._workbook = new ExcelBuilder.Workbook();
            _this._sheet = new ExcelBuilder.Worksheet({ name: _this._excelExportOptions.sheetName || 'Sheet1' });
            // add any Excel Format/Stylesheet to current Workbook
            _this._stylesheet = _this._workbook.getStyleSheet();
            var boldFormatter = _this._stylesheet.createFormat({ font: { bold: true } });
            var stringFormatter = _this._stylesheet.createFormat({ format: '@' });
            var numberFormatter = _this._stylesheet.createFormat({ format: '0' });
            var usdFormatter = _this._stylesheet.createFormat({ format: '$#,##0.00' });
            _this._stylesheetFormats = {
                boldFormatter: boldFormatter,
                dollarFormatter: usdFormatter,
                numberFormatter: numberFormatter,
                stringFormatter: stringFormatter,
            };
            // get the CSV output from the grid data
            var dataOutput = _this.getDataOutput();
            // trigger a download file
            // wrap it into a setTimeout so that the EventAggregator has enough time to start a pre-process like showing a spinner
            setTimeout(function () { return tslib_1.__awaiter(_this, void 0, void 0, function () {
                var columns, currentSheetData, finalOutput, mimeType, excelBlob, downloadOptions, error_1;
                return tslib_1.__generator(this, function (_a) {
                    switch (_a.label) {
                        case 0:
                            _a.trys.push([0, 2, , 3]);
                            if (this._gridOptions && this._gridOptions.excelExportOptions && this._gridOptions.excelExportOptions.customExcelHeader) {
                                this._gridOptions.excelExportOptions.customExcelHeader(this._workbook, this._sheet);
                            }
                            columns = this._grid && this._grid.getColumns && this._grid.getColumns() || [];
                            this._sheet.setColumns(this.getColumnStyles(columns));
                            currentSheetData = this._sheet.data;
                            finalOutput = currentSheetData;
                            if (Array.isArray(currentSheetData) && Array.isArray(dataOutput)) {
                                finalOutput = this._sheet.data.concat(dataOutput);
                            }
                            this._sheet.setData(finalOutput);
                            this._workbook.addWorksheet(this._sheet);
                            mimeType = this._fileFormat === FileType.xls ? 'application/vnd.ms-excel' : 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet ';
                            return [4 /*yield*/, ExcelBuilder.Builder.createFile(this._workbook, { type: 'blob', mimeType: mimeType })];
                        case 1:
                            excelBlob = _a.sent();
                            downloadOptions = {
                                filename: this._excelExportOptions.filename + "." + this._fileFormat,
                                format: this._fileFormat
                            };
                            // start downloading but add the Blob property only on the start download not on the event itself
                            this.startDownloadFile(tslib_1.__assign({}, downloadOptions, { blob: excelBlob, data: this._sheet.data }));
                            this.onGridAfterExportToExcel.next(downloadOptions);
                            resolve(true);
                            return [3 /*break*/, 3];
                        case 2:
                            error_1 = _a.sent();
                            reject(error_1);
                            return [3 /*break*/, 3];
                        case 3: return [2 /*return*/];
                    }
                });
            }); });
        });
    };
    /**
     * Triggers download file with file format.
     * IE(6-10) are not supported
     * All other browsers will use plain javascript on client side to produce a file download.
     * @param options
     */
    ExcelExportService.prototype.startDownloadFile = function (options) {
        // IE(6-10) don't support javascript download and our service doesn't support either so throw an error, we have to make a round trip to the Web Server for exporting
        if (navigator.appName === 'Microsoft Internet Explorer') {
            throw new Error('Microsoft Internet Explorer 6 to 10 do not support javascript export to Excel. Please upgrade your browser.');
        }
        // when using IE/Edge, then use different download call
        if (typeof navigator.msSaveOrOpenBlob === 'function') {
            navigator.msSaveOrOpenBlob(options.blob, options.filename);
        }
        else {
            // this trick will generate a temp <a /> tag
            // the code will then trigger a hidden click for it to start downloading
            var link = document && document.createElement('a');
            var url = URL.createObjectURL(options.blob);
            if (link && document) {
                link.textContent = 'download';
                link.href = url;
                link.setAttribute('download', options.filename);
                // set the visibility to hidden so there is no effect on your web-layout
                link.style.visibility = 'hidden';
                // this part will append the anchor tag, trigger a click (for download to start) and finally remove the tag once completed
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            }
        }
    };
    /** use different Excel Stylesheet Format as per the Field Type */
    ExcelExportService.prototype.useCellFormatByFieldType = function (data, fieldType) {
        var outputData = data;
        switch (fieldType) {
            case FieldType.dateTime:
            case FieldType.dateTimeIso:
            case FieldType.dateTimeShortIso:
            case FieldType.dateTimeIsoAmPm:
            case FieldType.dateTimeIsoAM_PM:
            case FieldType.dateEuro:
            case FieldType.dateEuroShort:
            case FieldType.dateTimeEuro:
            case FieldType.dateTimeShortEuro:
            case FieldType.dateTimeEuroAmPm:
            case FieldType.dateTimeEuroAM_PM:
            case FieldType.dateTimeEuroShort:
            case FieldType.dateTimeEuroShortAmPm:
            case FieldType.dateUs:
            case FieldType.dateUsShort:
            case FieldType.dateTimeUs:
            case FieldType.dateTimeShortUs:
            case FieldType.dateTimeUsAmPm:
            case FieldType.dateTimeUsAM_PM:
            case FieldType.dateTimeUsShort:
            case FieldType.dateTimeUsShortAmPm:
            case FieldType.dateUtc:
            case FieldType.date:
            case FieldType.dateIso:
                outputData = data;
                if (data) {
                    var defaultDateFormat = mapMomentDateFormatWithFieldType(fieldType);
                    var isDateValid = moment(data, defaultDateFormat, false).isValid();
                    var outputDate = (data && isDateValid) ? moment(data).format(defaultDateFormat) : data;
                    var dateFormatter = this._stylesheet.createFormat({ format: defaultDateFormat });
                    outputData = { value: outputDate, metadata: { style: dateFormatter.id } };
                }
                break;
            case FieldType.number:
                var val = isNaN(+data) ? null : data;
                outputData = { value: val, metadata: { style: this._stylesheetFormats.numberFormatter.id } };
                break;
            default:
                outputData = data;
        }
        return outputData;
    };
    // -----------------------
    // Private functions
    // -----------------------
    ExcelExportService.prototype.getDataOutput = function () {
        var columns = this._grid && this._grid.getColumns && this._grid.getColumns() || [];
        // data variable which will hold all the fields data of a row
        var outputData = [];
        var columnHeaderStyle = this._gridOptions && this._gridOptions.excelExportOptions && this._gridOptions.excelExportOptions.columnHeaderStyle;
        var columnHeaderStyleId = this._stylesheetFormats.boldFormatter.id;
        if (columnHeaderStyle) {
            columnHeaderStyleId = this._stylesheet.createFormat(columnHeaderStyle).id;
        }
        // get all Grouped Column Header Titles when defined (from pre-header row)
        if (this._gridOptions.createPreHeaderPanel && this._gridOptions.showPreHeaderPanel && !this._gridOptions.enableDraggableGrouping) {
            // when having Grouped Header Titles (in the pre-header), then make the cell Bold & Aligned Center
            var boldCenterAlign = this._stylesheet.createFormat({ alignment: { horizontal: 'center' }, font: { bold: true } });
            outputData.push(this.getColumnGroupedHeaderTitlesData(columns, { style: boldCenterAlign && boldCenterAlign.id }));
        }
        // get all Column Header Titles (it might include a "Group by" title at A1 cell)
        // also style the headers, defaults to Bold but user could pass his own style
        outputData.push(this.getColumnHeaderData(columns, { style: columnHeaderStyleId }));
        // Populate the rest of the Grid Data
        this.pushAllGridRowDataToArray(outputData, columns);
        return outputData;
    };
    /** Get each column style including a style for the width of each column */
    ExcelExportService.prototype.getColumnStyles = function (columns) {
        var _this = this;
        var grouping = this._dataView && this._dataView.getGrouping && this._dataView.getGrouping();
        var columnStyles = [];
        if (grouping) {
            columnStyles.push({
                bestFit: true,
                columnStyles: (this._gridOptions && this._gridOptions.excelExportOptions && this._gridOptions.excelExportOptions.customColumnWidth) || 10
            });
        }
        columns.forEach(function (columnDef) {
            var skippedField = columnDef.excludeFromExport || false;
            // if column width is 0, then we consider that field as a hidden field and should not be part of the export
            if ((columnDef.width === undefined || columnDef.width > 0) && !skippedField) {
                columnStyles.push({
                    bestFit: true,
                    width: columnDef.exportColumnWidth || (_this._gridOptions && _this._gridOptions.excelExportOptions && _this._gridOptions.excelExportOptions.customColumnWidth) || 10
                });
            }
        });
        return columnStyles;
    };
    /**
     * Get all Grouped Header Titles and their keys, translate the title when required, and format them in Bold
     * @param {Array<object>} columns of the grid
     */
    ExcelExportService.prototype.getColumnGroupedHeaderTitlesData = function (columns, metadata) {
        var outputGroupedHeaderTitles = [];
        // get all Column Header Titles
        this._groupedColumnHeaders = this.getColumnGroupedHeaderTitles(columns) || [];
        if (this._groupedColumnHeaders && Array.isArray(this._groupedColumnHeaders) && this._groupedColumnHeaders.length > 0) {
            // add the header row + add a new line at the end of the row
            outputGroupedHeaderTitles = this._groupedColumnHeaders.map(function (header) { return ({ value: header.title, metadata: metadata }); });
        }
        // merge necessary cells (any grouped header titles)
        // dealing with the Excel column position is a bit tricky since the first 26 columns are single char (A,B,...) but after that it becomes double char (AA,AB,...)
        // so we must first see if we are in the first section of 26 chars, if that is the case we just concatenate 1 (1st row) so it becomes (A1, B1, ...)
        // but if we are over enumarating passed 26, we need an extra prefix (AA1, AB1, ...)
        var charA = 'A'.charCodeAt(0);
        var cellPositionStart = 'A';
        var cellPositionEnd = '';
        var lastIndex = 0;
        var headersLn = this._groupedColumnHeaders.length;
        for (var cellIndex = 0; cellIndex < headersLn; cellIndex++) {
            // if we reached the last indenx, we are considered at the end
            // else we check if next title is equal to current title, if so then we know it's a grouped header
            // and we include it and continue looping until we reach the end
            if ((cellIndex + 1) === headersLn || ((cellIndex + 1) < headersLn && this._groupedColumnHeaders[cellIndex].title !== this._groupedColumnHeaders[cellIndex + 1].title)) {
                // calculate left prefix, divide by 26 and use modulo to find out what number add to A
                // for example if we have cell index 54, we will do ((54/26) %26) => 2.0769, Math.floor is 2, then we do A which is 65 + 2 gives us B so final cell will be AB1
                var leftCellCharCodePrefix = Math.floor((lastIndex / 26) % 26);
                var leftCellCharacterPrefix = String.fromCharCode(charA + leftCellCharCodePrefix - 1);
                var rightCellCharCodePrefix = Math.floor((cellIndex / 26) % 26);
                var rightCellCharacterPrefix = String.fromCharCode(charA + rightCellCharCodePrefix - 1);
                cellPositionEnd = String.fromCharCode(charA + (cellIndex % 26));
                var leftCell = "" + (lastIndex > 26 ? leftCellCharacterPrefix : '') + cellPositionStart + "1";
                var rightCell = "" + (cellIndex > 26 ? rightCellCharacterPrefix : '') + cellPositionEnd + "1";
                this._sheet.mergeCells(leftCell, rightCell);
                cellPositionStart = String.fromCharCode(cellPositionEnd.charCodeAt(0) + 1);
                lastIndex = cellIndex;
            }
        }
        return outputGroupedHeaderTitles;
    };
    /** Get all column headers and format them in Bold */
    ExcelExportService.prototype.getColumnHeaderData = function (columns, metadata) {
        var outputHeaderTitles = [];
        // get all Column Header Titles
        this._columnHeaders = this.getColumnHeaders(columns) || [];
        if (this._columnHeaders && Array.isArray(this._columnHeaders) && this._columnHeaders.length > 0) {
            // add the header row + add a new line at the end of the row
            outputHeaderTitles = this._columnHeaders.map(function (header) { return ({ value: header.title, metadata: metadata }); });
        }
        // do we have a Group by title?
        var groupTitle = this.getGroupColumnTitle();
        if (groupTitle) {
            outputHeaderTitles.unshift({ value: groupTitle, metadata: metadata });
        }
        return outputHeaderTitles;
    };
    ExcelExportService.prototype.getGroupColumnTitle = function () {
        // Group By text, it could be set in the export options or from translation or if nothing is found then use the English constant text
        var groupByColumnHeader = this._excelExportOptions.groupingColumnHeaderTitle;
        if (!groupByColumnHeader && this._gridOptions.enableTranslate && this.translate && this.translate.currentLang && this.translate.instant) {
            groupByColumnHeader = this.translate.instant(getTranslationPrefix(this._gridOptions) + "GROUP_BY");
        }
        else if (!groupByColumnHeader) {
            groupByColumnHeader = this._locales && this._locales.TEXT_GROUP_BY;
        }
        // get grouped column titles and if found, we will add a "Group by" column at the first column index
        // if it's a CSV format, we'll escape the text in double quotes
        var grouping = this._dataView && this._dataView.getGrouping && this._dataView.getGrouping();
        if (grouping && Array.isArray(grouping) && grouping.length > 0) {
            this._hasGroupedItems = true;
            return groupByColumnHeader;
        }
        else {
            this._hasGroupedItems = false;
        }
        return null;
    };
    /**
     * Get all Grouped Header Titles and their keys, translate the title when required.
     * @param {Array<object>} columns of the grid
     */
    ExcelExportService.prototype.getColumnGroupedHeaderTitles = function (columns) {
        var _this = this;
        var groupedColumnHeaders = [];
        if (columns && Array.isArray(columns)) {
            // Populate the Grouped Column Header, pull the columnGroup(Key) defined
            columns.forEach(function (columnDef) {
                var groupedHeaderTitle = '';
                if (columnDef.columnGroupKey && _this._gridOptions.enableTranslate && _this.translate && _this.translate.currentLang && _this.translate.instant) {
                    groupedHeaderTitle = _this.translate.instant(columnDef.columnGroupKey);
                }
                else {
                    groupedHeaderTitle = columnDef.columnGroup;
                }
                var skippedField = columnDef.excludeFromExport || false;
                // if column width is 0px, then we consider that field as a hidden field and should not be part of the export
                if ((columnDef.width === undefined || columnDef.width > 0) && !skippedField) {
                    groupedColumnHeaders.push({
                        key: (columnDef.field || columnDef.id),
                        title: groupedHeaderTitle || '',
                    });
                }
            });
        }
        return groupedColumnHeaders;
    };
    /**
     * Get all header titles and their keys, translate the title when required.
     * @param columns of the grid
     */
    ExcelExportService.prototype.getColumnHeaders = function (columns) {
        var _this = this;
        var columnHeaders = [];
        if (columns && Array.isArray(columns)) {
            // Populate the Column Header, pull the name defined
            columns.forEach(function (columnDef) {
                var headerTitle = '';
                if ((columnDef.headerKey || columnDef.nameKey) && _this._gridOptions.enableTranslate && _this.translate && _this.translate.currentLang && _this.translate.instant) {
                    headerTitle = _this.translate.instant((columnDef.headerKey || columnDef.nameKey));
                }
                else {
                    headerTitle = columnDef.name || titleCase(columnDef.field);
                }
                var skippedField = columnDef.excludeFromExport || false;
                // if column width is 0, then we consider that field as a hidden field and should not be part of the export
                if ((columnDef.width === undefined || columnDef.width > 0) && !skippedField) {
                    columnHeaders.push({
                        key: columnDef.field || columnDef.id,
                        title: headerTitle
                    });
                }
            });
        }
        return columnHeaders;
    };
    /**
     * Get all the grid row data and return that as an output string
     */
    ExcelExportService.prototype.pushAllGridRowDataToArray = function (originalDaraArray, columns) {
        var lineCount = this._dataView && this._dataView.getLength && this._dataView.getLength();
        // loop through all the grid rows of data
        for (var rowNumber = 0; rowNumber < lineCount; rowNumber++) {
            var itemObj = this._dataView.getItem(rowNumber);
            if (itemObj) {
                // Normal row (not grouped by anything) would have an ID which was predefined in the Grid Columns definition
                if (itemObj[this.datasetIdName] !== null && itemObj[this.datasetIdName] !== undefined) {
                    // get regular row item data
                    originalDaraArray.push(this.readRegularRowData(columns, rowNumber, itemObj));
                }
                else if (this._hasGroupedItems && itemObj.__groupTotals === undefined) {
                    // get the group row
                    originalDaraArray.push([this.readGroupedTitleRow(itemObj)]);
                }
                else if (itemObj.__groupTotals) {
                    // else if the row is a Group By and we have agreggators, then a property of '__groupTotals' would exist under that object
                    originalDaraArray.push(this.readGroupedTotalRow(columns, itemObj));
                }
            }
        }
        return originalDaraArray;
    };
    /**
     * Get the data of a regular row (a row without grouping)
     * @param row
     * @param itemObj
     */
    ExcelExportService.prototype.readRegularRowData = function (columns, row, itemObj) {
        var idx = 0;
        var rowOutputStrings = [];
        for (var col = 0, ln = columns.length; col < ln; col++) {
            var columnDef = columns[col];
            var fieldType = columnDef.outputType || columnDef.type || FieldType.string;
            // skip excluded column
            if (columnDef.excludeFromExport) {
                continue;
            }
            // if we are grouping and are on 1st column index, we need to skip this column since it will be used later by the grouping text:: Group by [columnX]
            if (this._hasGroupedItems && idx === 0) {
                rowOutputStrings.push('');
            }
            // get the output by analyzing if we'll pull the value from the cell or from a formatter
            var itemData = exportWithFormatterWhenDefined(row, col, itemObj, columnDef, this._grid, this._excelExportOptions);
            // does the user want to sanitize the output data (remove HTML tags)?
            if (columnDef.sanitizeDataExport || this._excelExportOptions.sanitizeDataExport) {
                itemData = sanitizeHtmlToText(itemData);
            }
            // use different Excel Stylesheet Format as per the Field Type
            if (!columnDef.exportWithFormatter) {
                itemData = this.useCellFormatByFieldType(itemData, fieldType);
            }
            rowOutputStrings.push(itemData);
            idx++;
        }
        return rowOutputStrings;
    };
    /**
     * Get the grouped title(s) and its group title formatter, for example if we grouped by salesRep, the returned result would be:: 'Sales Rep: John Dow (2 items)'
     * @param itemObj
     */
    ExcelExportService.prototype.readGroupedTitleRow = function (itemObj) {
        var groupName = sanitizeHtmlToText(itemObj.title);
        if (this._excelExportOptions && this._excelExportOptions.addGroupIndentation) {
            var collapsedSymbol = this._excelExportOptions && this._excelExportOptions.groupCollapsedSymbol || '\u25B9';
            var expandedSymbol = this._excelExportOptions && this._excelExportOptions.groupExpandedSymbol || '\u25BF';
            var chevron = itemObj.collapsed ? collapsedSymbol : expandedSymbol;
            return chevron + ' ' + addWhiteSpaces(5 * itemObj.level) + groupName;
        }
        return groupName;
    };
    /**
     * Get the grouped totals (below the regular rows), these are set by Slick Aggregators.
     * For example if we grouped by "salesRep" and we have a Sum Aggregator on "sales", then the returned output would be:: ["Sum 123$"]
     * @param itemObj
     */
    ExcelExportService.prototype.readGroupedTotalRow = function (columns, itemObj) {
        var _this = this;
        var groupingAggregatorRowText = this._excelExportOptions.groupingAggregatorRowText || '';
        var outputStrings = [groupingAggregatorRowText];
        columns.forEach(function (columnDef) {
            var itemData = '';
            var skippedField = columnDef.excludeFromExport || false;
            // if there's a exportCustomGroupTotalsFormatter or groupTotalsFormatter, we will re-run it to get the exact same output as what is shown in UI
            if (columnDef.exportCustomGroupTotalsFormatter) {
                itemData = columnDef.exportCustomGroupTotalsFormatter(itemObj, columnDef);
            }
            else {
                if (columnDef.groupTotalsFormatter) {
                    itemData = columnDef.groupTotalsFormatter(itemObj, columnDef);
                }
            }
            // does the user want to sanitize the output data (remove HTML tags)?
            if (columnDef.sanitizeDataExport || _this._excelExportOptions.sanitizeDataExport) {
                itemData = sanitizeHtmlToText(itemData);
            }
            // add the column (unless user wants to skip it)
            if ((columnDef.width === undefined || columnDef.width > 0) && !skippedField) {
                outputStrings.push(itemData);
            }
        });
        return outputStrings;
    };
    ExcelExportService.ctorParameters = function () { return [
        { type: TranslateService, decorators: [{ type: Optional }] }
    ]; };
    ExcelExportService = tslib_1.__decorate([ tslib_1.__param(0, Optional())
    ], ExcelExportService);
ExcelExportService.ɵfac = function ExcelExportService_Factory(t) { return new (t || ExcelExportService)(ɵngcc0.ɵɵinject(ɵngcc1.TranslateService, 8)); };
ExcelExportService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: ExcelExportService, factory: function (t) { return ExcelExportService.ɵfac(t); } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ExcelExportService, [{
        type: Injectable
    }], function () { return [{ type: ɵngcc1.TranslateService, decorators: [{
                type: Optional
            }] }]; }, null); })();
    return ExcelExportService;
}());
export { ExcelExportService };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXhjZWxFeHBvcnQuc2VydmljZS5qcyIsInNvdXJjZXMiOlsibmc6L2FuZ3VsYXItc2xpY2tncmlkL2FwcC9tb2R1bGVzL2FuZ3VsYXItc2xpY2tncmlkL3NlcnZpY2VzL2V4Y2VsRXhwb3J0LnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxVQUFVLEVBQUUsUUFBUSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ3JELE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ3ZELE9BQU8sS0FBSyxZQUFZLE1BQU0seUJBQXlCLENBQUM7QUFDeEQsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUMvQixPQUFPLEtBQUssT0FBTyxNQUFNLGFBQWEsQ0FBQzs7O0FBQ3ZDLElBQU0sTUFBTSxHQUFHLE9BQU8sQ0FBQyxDQUFDLHNIQUFzSDtBQUk5SSxPQUFPLEVBS0wsUUFBUSxFQUlSLFNBQVMsR0FFVixNQUFNLGlCQUFpQixDQUFDO0FBQ3pCLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxjQUFjLENBQUM7QUFDekMsT0FBTyxFQUFFLDhCQUE4QixFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUFDcEUsT0FBTyxFQUFFLGNBQWMsRUFBRSxvQkFBb0IsRUFBRSxnQ0FBZ0MsRUFBRSxrQkFBa0IsRUFBRSxTQUFTLEVBQUUsTUFBTSxhQUFhLENBQUM7QUFNcEk7QUFDb0IsSUFlbEIsNEJBQWdDLFNBQTJCO0FBQUksUUFBL0IsY0FBUyxHQUFULFNBQVMsQ0FBa0I7QUFBQyxRQWZwRCxnQkFBVyxHQUFHLFFBQVEsQ0FBQyxJQUFJLENBQUM7QUFDdEMsUUFLVSxxQkFBZ0IsR0FBRyxLQUFLLENBQUM7QUFDbkMsUUFLRSw4QkFBeUIsR0FBRyxJQUFJLE9BQU8sRUFBVyxDQUFDO0FBQ3JELFFBQUUsNkJBQXdCLEdBQUcsSUFBSSxPQUFPLEVBQXVELENBQUM7QUFDaEcsSUFDaUUsQ0FBQztBQUNsRSxJQUNF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QUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUVBLEFBSUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFFQSxBQVFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBa0VBLEFBakVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBS0EsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUNBLEFBQUEsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBcUJBLEFBcEJBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQ0EsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBRUEsQUFHQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFFQSxBQUdBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBd0JBLEFBdkJBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUNBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBR0EsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUF3QkEsQUF2QkEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBRUEsQUFFQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQ0EsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBSUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBR0EsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBSUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBOEJBLEFBN0JBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBbmdCQSxBQUFBLEFBQUEsQUFBQSxBQWhCQSxBQUFBLEFBREEsQUFBQSxBQUFBLEFBaUJBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFoQkEsQUFBQSxBQW9oQkEsQUFBQSxBQUFBLEFBQUEsQUFwaEJBLEFBb2hCQSxBQXBoQkEsQUFBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUsIE9wdGlvbmFsIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBUcmFuc2xhdGVTZXJ2aWNlIH0gZnJvbSAnQG5neC10cmFuc2xhdGUvY29yZSc7XG5pbXBvcnQgKiBhcyBFeGNlbEJ1aWxkZXIgZnJvbSAnZXhjZWwtYnVpbGRlci13ZWJwYWNrZXInO1xuaW1wb3J0IHsgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xuaW1wb3J0ICogYXMgbW9tZW50XyBmcm9tICdtb21lbnQtbWluaSc7XG5jb25zdCBtb21lbnQgPSBtb21lbnRfOyAvLyBwYXRjaCB0byBmaXggcm9sbHVwIFwibW9tZW50IGhhcyBubyBkZWZhdWx0IGV4cG9ydFwiIGlzc3VlLCBkb2N1bWVudCBoZXJlIGh0dHBzOi8vZ2l0aHViLmNvbS9yb2xsdXAvcm9sbHVwL2lzc3Vlcy82NzBcblxuaW1wb3J0IHsgRXhjZWxXb3JrYm9vayB9IGZyb20gJy4vLi4vbW9kZWxzL2V4Y2VsV29ya2Jvb2suaW50ZXJmYWNlJztcbmltcG9ydCB7IEV4Y2VsU3R5bGVzaGVldCB9IGZyb20gJy4vLi4vbW9kZWxzL2V4Y2VsU3R5bGVzaGVldC5pbnRlcmZhY2UnO1xuaW1wb3J0IHtcbiAgQ29sdW1uLFxuICBFeGNlbENlbGxGb3JtYXQsXG4gIEV4Y2VsRXhwb3J0T3B0aW9uLFxuICBFeGNlbE1ldGFkYXRhLFxuICBGaWxlVHlwZSxcbiAgR3JpZE9wdGlvbixcbiAgS2V5VGl0bGVQYWlyLFxuICBMb2NhbGUsXG4gIEZpZWxkVHlwZSxcbiAgRXhjZWxXb3Jrc2hlZXQsXG59IGZyb20gJy4uL21vZGVscy9pbmRleCc7XG5pbXBvcnQgeyBDb25zdGFudHMgfSBmcm9tICcuLi9jb25zdGFudHMnO1xuaW1wb3J0IHsgZXhwb3J0V2l0aEZvcm1hdHRlcldoZW5EZWZpbmVkIH0gZnJvbSAnLi9leHBvcnQtdXRpbGl0aWVzJztcbmltcG9ydCB7IGFkZFdoaXRlU3BhY2VzLCBnZXRUcmFuc2xhdGlvblByZWZpeCwgbWFwTW9tZW50RGF0ZUZvcm1hdFdpdGhGaWVsZFR5cGUsIHNhbml0aXplSHRtbFRvVGV4dCwgdGl0bGVDYXNlIH0gZnJvbSAnLi91dGlsaXRpZXMnO1xuXG4vLyB1c2luZyBleHRlcm5hbCBub24tdHlwZWQganMgbGlicmFyaWVzXG5kZWNsYXJlIGxldCAkOiBhbnk7XG5cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBFeGNlbEV4cG9ydFNlcnZpY2Uge1xuICBwcml2YXRlIF9maWxlRm9ybWF0ID0gRmlsZVR5cGUueGxzeDtcbiAgcHJpdmF0ZSBfZGF0YVZpZXc6IGFueTtcbiAgcHJpdmF0ZSBfZ3JpZDogYW55O1xuICBwcml2YXRlIF9sb2NhbGVzOiBMb2NhbGU7XG4gIHByaXZhdGUgX2NvbHVtbkhlYWRlcnM6IEFycmF5PEtleVRpdGxlUGFpcj47XG4gIHByaXZhdGUgX2dyb3VwZWRDb2x1bW5IZWFkZXJzOiBBcnJheTxLZXlUaXRsZVBhaXI+O1xuICBwcml2YXRlIF9oYXNHcm91cGVkSXRlbXMgPSBmYWxzZTtcbiAgcHJpdmF0ZSBfZXhjZWxFeHBvcnRPcHRpb25zOiBFeGNlbEV4cG9ydE9wdGlvbjtcbiAgcHJpdmF0ZSBfc2hlZXQ6IEV4Y2VsV29ya3NoZWV0O1xuICBwcml2YXRlIF9zdHlsZXNoZWV0OiBFeGNlbFN0eWxlc2hlZXQ7XG4gIHByaXZhdGUgX3N0eWxlc2hlZXRGb3JtYXRzOiBhbnk7XG4gIHByaXZhdGUgX3dvcmtib29rOiBFeGNlbFdvcmtib29rO1xuICBvbkdyaWRCZWZvcmVFeHBvcnRUb0V4Y2VsID0gbmV3IFN1YmplY3Q8Ym9vbGVhbj4oKTtcbiAgb25HcmlkQWZ0ZXJFeHBvcnRUb0V4Y2VsID0gbmV3IFN1YmplY3Q8eyBibG9iPzogQmxvYjsgZmlsZW5hbWU6IHN0cmluZzsgZm9ybWF0Pzogc3RyaW5nOyB9PigpO1xuXG4gIGNvbnN0cnVjdG9yKEBPcHRpb25hbCgpIHByaXZhdGUgdHJhbnNsYXRlOiBUcmFuc2xhdGVTZXJ2aWNlKSB7IH1cblxuICBwcml2YXRlIGdldCBkYXRhc2V0SWROYW1lKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuX2dyaWRPcHRpb25zICYmIHRoaXMuX2dyaWRPcHRpb25zLmRhdGFzZXRJZFByb3BlcnR5TmFtZSB8fCAnaWQnO1xuICB9XG5cbiAgLyoqIEdldHRlciBmb3IgdGhlIEdyaWQgT3B0aW9ucyBwdWxsZWQgdGhyb3VnaCB0aGUgR3JpZCBPYmplY3QgKi9cbiAgcHJpdmF0ZSBnZXQgX2dyaWRPcHRpb25zKCk6IEdyaWRPcHRpb24ge1xuICAgIHJldHVybiAodGhpcy5fZ3JpZCAmJiB0aGlzLl9ncmlkLmdldE9wdGlvbnMpID8gdGhpcy5fZ3JpZC5nZXRPcHRpb25zKCkgOiB7fTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIHRoZSBFeHBvcnQgU2VydmljZVxuICAgKiBAcGFyYW0gZ3JpZFxuICAgKiBAcGFyYW0gZGF0YVZpZXdcbiAgICovXG4gIGluaXQoZ3JpZDogYW55LCBkYXRhVmlldzogYW55KTogdm9pZCB7XG4gICAgdGhpcy5fZ3JpZCA9IGdyaWQ7XG4gICAgdGhpcy5fZGF0YVZpZXcgPSBkYXRhVmlldztcblxuICAgIC8vIGdldCBsb2NhbGVzIHByb3ZpZGVkIGJ5IHVzZXIgaW4gZm9yUm9vdCBvciBlbHNlIHVzZSBkZWZhdWx0IEVuZ2xpc2ggbG9jYWxlcyB2aWEgdGhlIENvbnN0YW50c1xuICAgIHRoaXMuX2xvY2FsZXMgPSB0aGlzLl9ncmlkT3B0aW9ucyAmJiB0aGlzLl9ncmlkT3B0aW9ucy5sb2NhbGVzIHx8IENvbnN0YW50cy5sb2NhbGVzO1xuXG4gICAgaWYgKHRoaXMuX2dyaWRPcHRpb25zLmVuYWJsZVRyYW5zbGF0ZSAmJiAoIXRoaXMudHJhbnNsYXRlIHx8ICF0aGlzLnRyYW5zbGF0ZS5pbnN0YW50KSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdbQW5ndWxhci1TbGlja2dyaWRdIHJlcXVpcmVzIFwibmd4LXRyYW5zbGF0ZVwiIHRvIGJlIGluc3RhbGxlZCBhbmQgY29uZmlndXJlZCB3aGVuIHRoZSBncmlkIG9wdGlvbiBcImVuYWJsZVRyYW5zbGF0ZVwiIGlzIGVuYWJsZWQuJyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEZ1bmN0aW9uIHRvIGV4cG9ydCB0aGUgR3JpZCByZXN1bHQgdG8gYW4gRXhjZWwgQ1NWIGZvcm1hdCB1c2luZyBqYXZhc2NyaXB0IGZvciBpdCB0byBwcm9kdWNlIHRoZSBDU1YgZmlsZS5cbiAgICogVGhpcyBpcyBhIFdZU0lXWUcgZXhwb3J0IHRvIGZpbGUgb3V0cHV0IChXaGF0IFlvdSBTZWUgaXMgV2hhdCBZb3UgR2V0KVxuICAgKlxuICAgKiBOT1RFUzogVGhlIGNvbHVtbiBwb3NpdGlvbiBuZWVkcyB0byBtYXRjaCBwZXJmZWN0bHkgdGhlIEpTT04gT2JqZWN0IHBvc2l0aW9uIGJlY2F1c2Ugb2YgdGhlIHdheSB3ZSBhcmUgcHVsbGluZyB0aGUgZGF0YSxcbiAgICogd2hpY2ggbWVhbnMgdGhhdCBpZiBhbnkgY29sdW1uKHMpIGdvdCBtb3ZlZCBpbiB0aGUgVUksIGl0IGhhcyB0byBiZSByZWZsZWN0ZWQgaW4gdGhlIEpTT04gYXJyYXkgb3V0cHV0IGFzIHdlbGxcbiAgICpcbiAgICogRXhhbXBsZTogZXhwb3J0VG9FeGNlbCh7IGZvcm1hdDogRmlsZVR5cGUuY3N2LCBkZWxpbWl0ZXI6IERlbGltaXRlclR5cGUuY29tbWEgfSlcbiAgICovXG4gIGV4cG9ydFRvRXhjZWwob3B0aW9uczogRXhjZWxFeHBvcnRPcHRpb24pOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICBpZiAoIXRoaXMuX2dyaWQgfHwgIXRoaXMuX2RhdGFWaWV3KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1tBbmd1bGFyLVNsaWNrZ3JpZF0gaXQgc2VlbXMgdGhhdCB0aGUgU2xpY2tHcmlkICYgRGF0YVZpZXcgb2JqZWN0cyBhcmUgbm90IGluaXRpYWxpemVkIGRpZCB5b3UgZm9yZ2V0IHRvIGVuYWJsZSB0aGUgZ3JpZCBvcHRpb24gZmxhZyBcImVuYWJsZUV4Y2VsRXhwb3J0XCI/Jyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMub25HcmlkQmVmb3JlRXhwb3J0VG9FeGNlbC5uZXh0KHRydWUpO1xuICAgICAgdGhpcy5fZXhjZWxFeHBvcnRPcHRpb25zID0gJC5leHRlbmQodHJ1ZSwge30sIHRoaXMuX2dyaWRPcHRpb25zLmV4Y2VsRXhwb3J0T3B0aW9ucywgb3B0aW9ucyk7XG4gICAgICB0aGlzLl9maWxlRm9ybWF0ID0gdGhpcy5fZXhjZWxFeHBvcnRPcHRpb25zLmZvcm1hdCB8fCBGaWxlVHlwZS54bHN4O1xuXG4gICAgICAvLyBwcmVwYXJlIHRoZSBFeGNlbCBXb3JrYm9vayAmIFNoZWV0XG4gICAgICB0aGlzLl93b3JrYm9vayA9IG5ldyBFeGNlbEJ1aWxkZXIuV29ya2Jvb2soKTtcbiAgICAgIHRoaXMuX3NoZWV0ID0gbmV3IEV4Y2VsQnVpbGRlci5Xb3Jrc2hlZXQoeyBuYW1lOiB0aGlzLl9leGNlbEV4cG9ydE9wdGlvbnMuc2hlZXROYW1lIHx8ICdTaGVldDEnIH0pO1xuXG4gICAgICAvLyBhZGQgYW55IEV4Y2VsIEZvcm1hdC9TdHlsZXNoZWV0IHRvIGN1cnJlbnQgV29ya2Jvb2tcbiAgICAgIHRoaXMuX3N0eWxlc2hlZXQgPSB0aGlzLl93b3JrYm9vay5nZXRTdHlsZVNoZWV0KCk7XG4gICAgICBjb25zdCBib2xkRm9ybWF0dGVyID0gdGhpcy5fc3R5bGVzaGVldC5jcmVhdGVGb3JtYXQoeyBmb250OiB7IGJvbGQ6IHRydWUgfSB9KTtcbiAgICAgIGNvbnN0IHN0cmluZ0Zvcm1hdHRlciA9IHRoaXMuX3N0eWxlc2hlZXQuY3JlYXRlRm9ybWF0KHsgZm9ybWF0OiAnQCcgfSk7XG4gICAgICBjb25zdCBudW1iZXJGb3JtYXR0ZXIgPSB0aGlzLl9zdHlsZXNoZWV0LmNyZWF0ZUZvcm1hdCh7IGZvcm1hdDogJzAnIH0pO1xuICAgICAgY29uc3QgdXNkRm9ybWF0dGVyID0gdGhpcy5fc3R5bGVzaGVldC5jcmVhdGVGb3JtYXQoeyBmb3JtYXQ6ICckIywjIzAuMDAnIH0pO1xuICAgICAgdGhpcy5fc3R5bGVzaGVldEZvcm1hdHMgPSB7XG4gICAgICAgIGJvbGRGb3JtYXR0ZXIsXG4gICAgICAgIGRvbGxhckZvcm1hdHRlcjogdXNkRm9ybWF0dGVyLFxuICAgICAgICBudW1iZXJGb3JtYXR0ZXIsXG4gICAgICAgIHN0cmluZ0Zvcm1hdHRlcixcbiAgICAgIH07XG5cbiAgICAgIC8vIGdldCB0aGUgQ1NWIG91dHB1dCBmcm9tIHRoZSBncmlkIGRhdGFcbiAgICAgIGNvbnN0IGRhdGFPdXRwdXQgPSB0aGlzLmdldERhdGFPdXRwdXQoKTtcblxuICAgICAgLy8gdHJpZ2dlciBhIGRvd25sb2FkIGZpbGVcbiAgICAgIC8vIHdyYXAgaXQgaW50byBhIHNldFRpbWVvdXQgc28gdGhhdCB0aGUgRXZlbnRBZ2dyZWdhdG9yIGhhcyBlbm91Z2ggdGltZSB0byBzdGFydCBhIHByZS1wcm9jZXNzIGxpa2Ugc2hvd2luZyBhIHNwaW5uZXJcbiAgICAgIHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmICh0aGlzLl9ncmlkT3B0aW9ucyAmJiB0aGlzLl9ncmlkT3B0aW9ucy5leGNlbEV4cG9ydE9wdGlvbnMgJiYgdGhpcy5fZ3JpZE9wdGlvbnMuZXhjZWxFeHBvcnRPcHRpb25zLmN1c3RvbUV4Y2VsSGVhZGVyKSB7XG4gICAgICAgICAgICB0aGlzLl9ncmlkT3B0aW9ucy5leGNlbEV4cG9ydE9wdGlvbnMuY3VzdG9tRXhjZWxIZWFkZXIodGhpcy5fd29ya2Jvb2ssIHRoaXMuX3NoZWV0KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCBjb2x1bW5zID0gdGhpcy5fZ3JpZCAmJiB0aGlzLl9ncmlkLmdldENvbHVtbnMgJiYgdGhpcy5fZ3JpZC5nZXRDb2x1bW5zKCkgfHwgW107XG4gICAgICAgICAgdGhpcy5fc2hlZXQuc2V0Q29sdW1ucyh0aGlzLmdldENvbHVtblN0eWxlcyhjb2x1bW5zKSk7XG5cbiAgICAgICAgICBjb25zdCBjdXJyZW50U2hlZXREYXRhID0gdGhpcy5fc2hlZXQuZGF0YTtcbiAgICAgICAgICBsZXQgZmluYWxPdXRwdXQgPSBjdXJyZW50U2hlZXREYXRhO1xuICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGN1cnJlbnRTaGVldERhdGEpICYmIEFycmF5LmlzQXJyYXkoZGF0YU91dHB1dCkpIHtcbiAgICAgICAgICAgIGZpbmFsT3V0cHV0ID0gdGhpcy5fc2hlZXQuZGF0YS5jb25jYXQoZGF0YU91dHB1dCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhpcy5fc2hlZXQuc2V0RGF0YShmaW5hbE91dHB1dCk7XG4gICAgICAgICAgdGhpcy5fd29ya2Jvb2suYWRkV29ya3NoZWV0KHRoaXMuX3NoZWV0KTtcblxuICAgICAgICAgIGNvbnN0IG1pbWVUeXBlID0gdGhpcy5fZmlsZUZvcm1hdCA9PT0gRmlsZVR5cGUueGxzID8gJ2FwcGxpY2F0aW9uL3ZuZC5tcy1leGNlbCcgOiAnYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwuc2hlZXQgJztcbiAgICAgICAgICBjb25zdCBleGNlbEJsb2IgPSBhd2FpdCBFeGNlbEJ1aWxkZXIuQnVpbGRlci5jcmVhdGVGaWxlKHRoaXMuX3dvcmtib29rLCB7IHR5cGU6ICdibG9iJywgbWltZVR5cGUgfSk7XG4gICAgICAgICAgY29uc3QgZG93bmxvYWRPcHRpb25zID0ge1xuICAgICAgICAgICAgZmlsZW5hbWU6IGAke3RoaXMuX2V4Y2VsRXhwb3J0T3B0aW9ucy5maWxlbmFtZX0uJHt0aGlzLl9maWxlRm9ybWF0fWAsXG4gICAgICAgICAgICBmb3JtYXQ6IHRoaXMuX2ZpbGVGb3JtYXRcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgLy8gc3RhcnQgZG93bmxvYWRpbmcgYnV0IGFkZCB0aGUgQmxvYiBwcm9wZXJ0eSBvbmx5IG9uIHRoZSBzdGFydCBkb3dubG9hZCBub3Qgb24gdGhlIGV2ZW50IGl0c2VsZlxuICAgICAgICAgIHRoaXMuc3RhcnREb3dubG9hZEZpbGUoeyAuLi5kb3dubG9hZE9wdGlvbnMsIGJsb2I6IGV4Y2VsQmxvYiwgZGF0YTogdGhpcy5fc2hlZXQuZGF0YSB9KTtcbiAgICAgICAgICB0aGlzLm9uR3JpZEFmdGVyRXhwb3J0VG9FeGNlbC5uZXh0KGRvd25sb2FkT3B0aW9ucyk7XG4gICAgICAgICAgcmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUcmlnZ2VycyBkb3dubG9hZCBmaWxlIHdpdGggZmlsZSBmb3JtYXQuXG4gICAqIElFKDYtMTApIGFyZSBub3Qgc3VwcG9ydGVkXG4gICAqIEFsbCBvdGhlciBicm93c2VycyB3aWxsIHVzZSBwbGFpbiBqYXZhc2NyaXB0IG9uIGNsaWVudCBzaWRlIHRvIHByb2R1Y2UgYSBmaWxlIGRvd25sb2FkLlxuICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgKi9cbiAgc3RhcnREb3dubG9hZEZpbGUob3B0aW9uczogeyBmaWxlbmFtZTogc3RyaW5nLCBibG9iOiBCbG9iLCBkYXRhOiBhbnlbXSB9KSB7XG4gICAgLy8gSUUoNi0xMCkgZG9uJ3Qgc3VwcG9ydCBqYXZhc2NyaXB0IGRvd25sb2FkIGFuZCBvdXIgc2VydmljZSBkb2Vzbid0IHN1cHBvcnQgZWl0aGVyIHNvIHRocm93IGFuIGVycm9yLCB3ZSBoYXZlIHRvIG1ha2UgYSByb3VuZCB0cmlwIHRvIHRoZSBXZWIgU2VydmVyIGZvciBleHBvcnRpbmdcbiAgICBpZiAobmF2aWdhdG9yLmFwcE5hbWUgPT09ICdNaWNyb3NvZnQgSW50ZXJuZXQgRXhwbG9yZXInKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pY3Jvc29mdCBJbnRlcm5ldCBFeHBsb3JlciA2IHRvIDEwIGRvIG5vdCBzdXBwb3J0IGphdmFzY3JpcHQgZXhwb3J0IHRvIEV4Y2VsLiBQbGVhc2UgdXBncmFkZSB5b3VyIGJyb3dzZXIuJyk7XG4gICAgfVxuXG4gICAgLy8gd2hlbiB1c2luZyBJRS9FZGdlLCB0aGVuIHVzZSBkaWZmZXJlbnQgZG93bmxvYWQgY2FsbFxuICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yLm1zU2F2ZU9yT3BlbkJsb2IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIG5hdmlnYXRvci5tc1NhdmVPck9wZW5CbG9iKG9wdGlvbnMuYmxvYiwgb3B0aW9ucy5maWxlbmFtZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHRoaXMgdHJpY2sgd2lsbCBnZW5lcmF0ZSBhIHRlbXAgPGEgLz4gdGFnXG4gICAgICAvLyB0aGUgY29kZSB3aWxsIHRoZW4gdHJpZ2dlciBhIGhpZGRlbiBjbGljayBmb3IgaXQgdG8gc3RhcnQgZG93bmxvYWRpbmdcbiAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudCAmJiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKG9wdGlvbnMuYmxvYik7XG5cbiAgICAgIGlmIChsaW5rICYmIGRvY3VtZW50KSB7XG4gICAgICAgIGxpbmsudGV4dENvbnRlbnQgPSAnZG93bmxvYWQnO1xuICAgICAgICBsaW5rLmhyZWYgPSB1cmw7XG4gICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKCdkb3dubG9hZCcsIG9wdGlvbnMuZmlsZW5hbWUpO1xuXG4gICAgICAgIC8vIHNldCB0aGUgdmlzaWJpbGl0eSB0byBoaWRkZW4gc28gdGhlcmUgaXMgbm8gZWZmZWN0IG9uIHlvdXIgd2ViLWxheW91dFxuICAgICAgICBsaW5rLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcblxuICAgICAgICAvLyB0aGlzIHBhcnQgd2lsbCBhcHBlbmQgdGhlIGFuY2hvciB0YWcsIHRyaWdnZXIgYSBjbGljayAoZm9yIGRvd25sb2FkIHRvIHN0YXJ0KSBhbmQgZmluYWxseSByZW1vdmUgdGhlIHRhZyBvbmNlIGNvbXBsZXRlZFxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGxpbmspO1xuICAgICAgICBsaW5rLmNsaWNrKCk7XG4gICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobGluayk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqIHVzZSBkaWZmZXJlbnQgRXhjZWwgU3R5bGVzaGVldCBGb3JtYXQgYXMgcGVyIHRoZSBGaWVsZCBUeXBlICovXG4gIHVzZUNlbGxGb3JtYXRCeUZpZWxkVHlwZShkYXRhOiBzdHJpbmcgfCBEYXRlIHwgbW9tZW50Xy5Nb21lbnQsIGZpZWxkVHlwZTogRmllbGRUeXBlKTogRXhjZWxDZWxsRm9ybWF0IHwgc3RyaW5nIHtcbiAgICBsZXQgb3V0cHV0RGF0YTogRXhjZWxDZWxsRm9ybWF0IHwgc3RyaW5nIHwgRGF0ZSB8IG1vbWVudF8uTW9tZW50ID0gZGF0YTtcbiAgICBzd2l0Y2ggKGZpZWxkVHlwZSkge1xuICAgICAgY2FzZSBGaWVsZFR5cGUuZGF0ZVRpbWU6XG4gICAgICBjYXNlIEZpZWxkVHlwZS5kYXRlVGltZUlzbzpcbiAgICAgIGNhc2UgRmllbGRUeXBlLmRhdGVUaW1lU2hvcnRJc286XG4gICAgICBjYXNlIEZpZWxkVHlwZS5kYXRlVGltZUlzb0FtUG06XG4gICAgICBjYXNlIEZpZWxkVHlwZS5kYXRlVGltZUlzb0FNX1BNOlxuICAgICAgY2FzZSBGaWVsZFR5cGUuZGF0ZUV1cm86XG4gICAgICBjYXNlIEZpZWxkVHlwZS5kYXRlRXVyb1Nob3J0OlxuICAgICAgY2FzZSBGaWVsZFR5cGUuZGF0ZVRpbWVFdXJvOlxuICAgICAgY2FzZSBGaWVsZFR5cGUuZGF0ZVRpbWVTaG9ydEV1cm86XG4gICAgICBjYXNlIEZpZWxkVHlwZS5kYXRlVGltZUV1cm9BbVBtOlxuICAgICAgY2FzZSBGaWVsZFR5cGUuZGF0ZVRpbWVFdXJvQU1fUE06XG4gICAgICBjYXNlIEZpZWxkVHlwZS5kYXRlVGltZUV1cm9TaG9ydDpcbiAgICAgIGNhc2UgRmllbGRUeXBlLmRhdGVUaW1lRXVyb1Nob3J0QW1QbTpcbiAgICAgIGNhc2UgRmllbGRUeXBlLmRhdGVVczpcbiAgICAgIGNhc2UgRmllbGRUeXBlLmRhdGVVc1Nob3J0OlxuICAgICAgY2FzZSBGaWVsZFR5cGUuZGF0ZVRpbWVVczpcbiAgICAgIGNhc2UgRmllbGRUeXBlLmRhdGVUaW1lU2hvcnRVczpcbiAgICAgIGNhc2UgRmllbGRUeXBlLmRhdGVUaW1lVXNBbVBtOlxuICAgICAgY2FzZSBGaWVsZFR5cGUuZGF0ZVRpbWVVc0FNX1BNOlxuICAgICAgY2FzZSBGaWVsZFR5cGUuZGF0ZVRpbWVVc1Nob3J0OlxuICAgICAgY2FzZSBGaWVsZFR5cGUuZGF0ZVRpbWVVc1Nob3J0QW1QbTpcbiAgICAgIGNhc2UgRmllbGRUeXBlLmRhdGVVdGM6XG4gICAgICBjYXNlIEZpZWxkVHlwZS5kYXRlOlxuICAgICAgY2FzZSBGaWVsZFR5cGUuZGF0ZUlzbzpcbiAgICAgICAgb3V0cHV0RGF0YSA9IGRhdGE7XG4gICAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgICAgY29uc3QgZGVmYXVsdERhdGVGb3JtYXQgPSBtYXBNb21lbnREYXRlRm9ybWF0V2l0aEZpZWxkVHlwZShmaWVsZFR5cGUpO1xuICAgICAgICAgIGNvbnN0IGlzRGF0ZVZhbGlkID0gbW9tZW50KGRhdGEgYXMgc3RyaW5nLCBkZWZhdWx0RGF0ZUZvcm1hdCwgZmFsc2UpLmlzVmFsaWQoKTtcbiAgICAgICAgICBjb25zdCBvdXRwdXREYXRlID0gKGRhdGEgJiYgaXNEYXRlVmFsaWQpID8gbW9tZW50KGRhdGEgYXMgc3RyaW5nKS5mb3JtYXQoZGVmYXVsdERhdGVGb3JtYXQpIDogZGF0YTtcbiAgICAgICAgICBjb25zdCBkYXRlRm9ybWF0dGVyID0gdGhpcy5fc3R5bGVzaGVldC5jcmVhdGVGb3JtYXQoeyBmb3JtYXQ6IGRlZmF1bHREYXRlRm9ybWF0IH0pO1xuICAgICAgICAgIG91dHB1dERhdGEgPSB7IHZhbHVlOiBvdXRwdXREYXRlLCBtZXRhZGF0YTogeyBzdHlsZTogZGF0ZUZvcm1hdHRlci5pZCB9IH07XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIEZpZWxkVHlwZS5udW1iZXI6XG4gICAgICAgIGNvbnN0IHZhbCA9IGlzTmFOKCtkYXRhKSA/IG51bGwgOiBkYXRhO1xuICAgICAgICBvdXRwdXREYXRhID0geyB2YWx1ZTogdmFsLCBtZXRhZGF0YTogeyBzdHlsZTogdGhpcy5fc3R5bGVzaGVldEZvcm1hdHMubnVtYmVyRm9ybWF0dGVyLmlkIH0gfTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBvdXRwdXREYXRhID0gZGF0YTtcbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dERhdGEgYXMgc3RyaW5nO1xuICB9XG5cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy8gUHJpdmF0ZSBmdW5jdGlvbnNcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICBwcml2YXRlIGdldERhdGFPdXRwdXQoKTogc3RyaW5nW11bXSB8IEV4Y2VsQ2VsbEZvcm1hdFtdW10ge1xuICAgIGNvbnN0IGNvbHVtbnMgPSB0aGlzLl9ncmlkICYmIHRoaXMuX2dyaWQuZ2V0Q29sdW1ucyAmJiB0aGlzLl9ncmlkLmdldENvbHVtbnMoKSB8fCBbXTtcblxuICAgIC8vIGRhdGEgdmFyaWFibGUgd2hpY2ggd2lsbCBob2xkIGFsbCB0aGUgZmllbGRzIGRhdGEgb2YgYSByb3dcbiAgICBjb25zdCBvdXRwdXREYXRhID0gW107XG4gICAgY29uc3QgY29sdW1uSGVhZGVyU3R5bGUgPSB0aGlzLl9ncmlkT3B0aW9ucyAmJiB0aGlzLl9ncmlkT3B0aW9ucy5leGNlbEV4cG9ydE9wdGlvbnMgJiYgdGhpcy5fZ3JpZE9wdGlvbnMuZXhjZWxFeHBvcnRPcHRpb25zLmNvbHVtbkhlYWRlclN0eWxlO1xuICAgIGxldCBjb2x1bW5IZWFkZXJTdHlsZUlkID0gdGhpcy5fc3R5bGVzaGVldEZvcm1hdHMuYm9sZEZvcm1hdHRlci5pZDtcbiAgICBpZiAoY29sdW1uSGVhZGVyU3R5bGUpIHtcbiAgICAgIGNvbHVtbkhlYWRlclN0eWxlSWQgPSB0aGlzLl9zdHlsZXNoZWV0LmNyZWF0ZUZvcm1hdChjb2x1bW5IZWFkZXJTdHlsZSkuaWQ7XG4gICAgfVxuXG4gICAgLy8gZ2V0IGFsbCBHcm91cGVkIENvbHVtbiBIZWFkZXIgVGl0bGVzIHdoZW4gZGVmaW5lZCAoZnJvbSBwcmUtaGVhZGVyIHJvdylcbiAgICBpZiAodGhpcy5fZ3JpZE9wdGlvbnMuY3JlYXRlUHJlSGVhZGVyUGFuZWwgJiYgdGhpcy5fZ3JpZE9wdGlvbnMuc2hvd1ByZUhlYWRlclBhbmVsICYmICF0aGlzLl9ncmlkT3B0aW9ucy5lbmFibGVEcmFnZ2FibGVHcm91cGluZykge1xuICAgICAgLy8gd2hlbiBoYXZpbmcgR3JvdXBlZCBIZWFkZXIgVGl0bGVzIChpbiB0aGUgcHJlLWhlYWRlciksIHRoZW4gbWFrZSB0aGUgY2VsbCBCb2xkICYgQWxpZ25lZCBDZW50ZXJcbiAgICAgIGNvbnN0IGJvbGRDZW50ZXJBbGlnbiA9IHRoaXMuX3N0eWxlc2hlZXQuY3JlYXRlRm9ybWF0KHsgYWxpZ25tZW50OiB7IGhvcml6b250YWw6ICdjZW50ZXInIH0sIGZvbnQ6IHsgYm9sZDogdHJ1ZSB9IH0pO1xuICAgICAgb3V0cHV0RGF0YS5wdXNoKHRoaXMuZ2V0Q29sdW1uR3JvdXBlZEhlYWRlclRpdGxlc0RhdGEoY29sdW1ucywgeyBzdHlsZTogYm9sZENlbnRlckFsaWduICYmIGJvbGRDZW50ZXJBbGlnbi5pZCB9KSk7XG4gICAgfVxuXG4gICAgLy8gZ2V0IGFsbCBDb2x1bW4gSGVhZGVyIFRpdGxlcyAoaXQgbWlnaHQgaW5jbHVkZSBhIFwiR3JvdXAgYnlcIiB0aXRsZSBhdCBBMSBjZWxsKVxuICAgIC8vIGFsc28gc3R5bGUgdGhlIGhlYWRlcnMsIGRlZmF1bHRzIHRvIEJvbGQgYnV0IHVzZXIgY291bGQgcGFzcyBoaXMgb3duIHN0eWxlXG4gICAgb3V0cHV0RGF0YS5wdXNoKHRoaXMuZ2V0Q29sdW1uSGVhZGVyRGF0YShjb2x1bW5zLCB7IHN0eWxlOiBjb2x1bW5IZWFkZXJTdHlsZUlkIH0pKTtcblxuICAgIC8vIFBvcHVsYXRlIHRoZSByZXN0IG9mIHRoZSBHcmlkIERhdGFcbiAgICB0aGlzLnB1c2hBbGxHcmlkUm93RGF0YVRvQXJyYXkob3V0cHV0RGF0YSwgY29sdW1ucyk7XG5cbiAgICByZXR1cm4gb3V0cHV0RGF0YTtcbiAgfVxuXG4gIC8qKiBHZXQgZWFjaCBjb2x1bW4gc3R5bGUgaW5jbHVkaW5nIGEgc3R5bGUgZm9yIHRoZSB3aWR0aCBvZiBlYWNoIGNvbHVtbiAqL1xuICBwcml2YXRlIGdldENvbHVtblN0eWxlcyhjb2x1bW5zOiBDb2x1bW5bXSk6IGFueVtdIHtcbiAgICBjb25zdCBncm91cGluZyA9IHRoaXMuX2RhdGFWaWV3ICYmIHRoaXMuX2RhdGFWaWV3LmdldEdyb3VwaW5nICYmIHRoaXMuX2RhdGFWaWV3LmdldEdyb3VwaW5nKCk7XG4gICAgY29uc3QgY29sdW1uU3R5bGVzID0gW107XG4gICAgaWYgKGdyb3VwaW5nKSB7XG4gICAgICBjb2x1bW5TdHlsZXMucHVzaCh7XG4gICAgICAgIGJlc3RGaXQ6IHRydWUsXG4gICAgICAgIGNvbHVtblN0eWxlczogKHRoaXMuX2dyaWRPcHRpb25zICYmIHRoaXMuX2dyaWRPcHRpb25zLmV4Y2VsRXhwb3J0T3B0aW9ucyAmJiB0aGlzLl9ncmlkT3B0aW9ucy5leGNlbEV4cG9ydE9wdGlvbnMuY3VzdG9tQ29sdW1uV2lkdGgpIHx8IDEwXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBjb2x1bW5zLmZvckVhY2goKGNvbHVtbkRlZjogQ29sdW1uKSA9PiB7XG4gICAgICBjb25zdCBza2lwcGVkRmllbGQgPSBjb2x1bW5EZWYuZXhjbHVkZUZyb21FeHBvcnQgfHwgZmFsc2U7XG4gICAgICAvLyBpZiBjb2x1bW4gd2lkdGggaXMgMCwgdGhlbiB3ZSBjb25zaWRlciB0aGF0IGZpZWxkIGFzIGEgaGlkZGVuIGZpZWxkIGFuZCBzaG91bGQgbm90IGJlIHBhcnQgb2YgdGhlIGV4cG9ydFxuICAgICAgaWYgKChjb2x1bW5EZWYud2lkdGggPT09IHVuZGVmaW5lZCB8fCBjb2x1bW5EZWYud2lkdGggPiAwKSAmJiAhc2tpcHBlZEZpZWxkKSB7XG4gICAgICAgIGNvbHVtblN0eWxlcy5wdXNoKHtcbiAgICAgICAgICBiZXN0Rml0OiB0cnVlLFxuICAgICAgICAgIHdpZHRoOiBjb2x1bW5EZWYuZXhwb3J0Q29sdW1uV2lkdGggfHwgKHRoaXMuX2dyaWRPcHRpb25zICYmIHRoaXMuX2dyaWRPcHRpb25zLmV4Y2VsRXhwb3J0T3B0aW9ucyAmJiB0aGlzLl9ncmlkT3B0aW9ucy5leGNlbEV4cG9ydE9wdGlvbnMuY3VzdG9tQ29sdW1uV2lkdGgpIHx8IDEwXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBjb2x1bW5TdHlsZXM7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGFsbCBHcm91cGVkIEhlYWRlciBUaXRsZXMgYW5kIHRoZWlyIGtleXMsIHRyYW5zbGF0ZSB0aGUgdGl0bGUgd2hlbiByZXF1aXJlZCwgYW5kIGZvcm1hdCB0aGVtIGluIEJvbGRcbiAgICogQHBhcmFtIHtBcnJheTxvYmplY3Q+fSBjb2x1bW5zIG9mIHRoZSBncmlkXG4gICAqL1xuICBwcml2YXRlIGdldENvbHVtbkdyb3VwZWRIZWFkZXJUaXRsZXNEYXRhKGNvbHVtbnM6IENvbHVtbltdLCBtZXRhZGF0YTogRXhjZWxNZXRhZGF0YSk6IEFycmF5PEV4Y2VsQ2VsbEZvcm1hdD4ge1xuICAgIGxldCBvdXRwdXRHcm91cGVkSGVhZGVyVGl0bGVzOiBBcnJheTxFeGNlbENlbGxGb3JtYXQ+ID0gW107XG5cbiAgICAvLyBnZXQgYWxsIENvbHVtbiBIZWFkZXIgVGl0bGVzXG4gICAgdGhpcy5fZ3JvdXBlZENvbHVtbkhlYWRlcnMgPSB0aGlzLmdldENvbHVtbkdyb3VwZWRIZWFkZXJUaXRsZXMoY29sdW1ucykgfHwgW107XG4gICAgaWYgKHRoaXMuX2dyb3VwZWRDb2x1bW5IZWFkZXJzICYmIEFycmF5LmlzQXJyYXkodGhpcy5fZ3JvdXBlZENvbHVtbkhlYWRlcnMpICYmIHRoaXMuX2dyb3VwZWRDb2x1bW5IZWFkZXJzLmxlbmd0aCA+IDApIHtcbiAgICAgIC8vIGFkZCB0aGUgaGVhZGVyIHJvdyArIGFkZCBhIG5ldyBsaW5lIGF0IHRoZSBlbmQgb2YgdGhlIHJvd1xuICAgICAgb3V0cHV0R3JvdXBlZEhlYWRlclRpdGxlcyA9IHRoaXMuX2dyb3VwZWRDb2x1bW5IZWFkZXJzLm1hcCgoaGVhZGVyKSA9PiAoeyB2YWx1ZTogaGVhZGVyLnRpdGxlLCBtZXRhZGF0YSB9KSk7XG4gICAgfVxuXG4gICAgLy8gbWVyZ2UgbmVjZXNzYXJ5IGNlbGxzIChhbnkgZ3JvdXBlZCBoZWFkZXIgdGl0bGVzKVxuICAgIC8vIGRlYWxpbmcgd2l0aCB0aGUgRXhjZWwgY29sdW1uIHBvc2l0aW9uIGlzIGEgYml0IHRyaWNreSBzaW5jZSB0aGUgZmlyc3QgMjYgY29sdW1ucyBhcmUgc2luZ2xlIGNoYXIgKEEsQiwuLi4pIGJ1dCBhZnRlciB0aGF0IGl0IGJlY29tZXMgZG91YmxlIGNoYXIgKEFBLEFCLC4uLilcbiAgICAvLyBzbyB3ZSBtdXN0IGZpcnN0IHNlZSBpZiB3ZSBhcmUgaW4gdGhlIGZpcnN0IHNlY3Rpb24gb2YgMjYgY2hhcnMsIGlmIHRoYXQgaXMgdGhlIGNhc2Ugd2UganVzdCBjb25jYXRlbmF0ZSAxICgxc3Qgcm93KSBzbyBpdCBiZWNvbWVzIChBMSwgQjEsIC4uLilcbiAgICAvLyBidXQgaWYgd2UgYXJlIG92ZXIgZW51bWFyYXRpbmcgcGFzc2VkIDI2LCB3ZSBuZWVkIGFuIGV4dHJhIHByZWZpeCAoQUExLCBBQjEsIC4uLilcbiAgICBjb25zdCBjaGFyQSA9ICdBJy5jaGFyQ29kZUF0KDApO1xuICAgIGxldCBjZWxsUG9zaXRpb25TdGFydCA9ICdBJztcbiAgICBsZXQgY2VsbFBvc2l0aW9uRW5kID0gJyc7XG4gICAgbGV0IGxhc3RJbmRleCA9IDA7XG4gICAgY29uc3QgaGVhZGVyc0xuID0gdGhpcy5fZ3JvdXBlZENvbHVtbkhlYWRlcnMubGVuZ3RoO1xuICAgIGZvciAobGV0IGNlbGxJbmRleCA9IDA7IGNlbGxJbmRleCA8IGhlYWRlcnNMbjsgY2VsbEluZGV4KyspIHtcbiAgICAgIC8vIGlmIHdlIHJlYWNoZWQgdGhlIGxhc3QgaW5kZW54LCB3ZSBhcmUgY29uc2lkZXJlZCBhdCB0aGUgZW5kXG4gICAgICAvLyBlbHNlIHdlIGNoZWNrIGlmIG5leHQgdGl0bGUgaXMgZXF1YWwgdG8gY3VycmVudCB0aXRsZSwgaWYgc28gdGhlbiB3ZSBrbm93IGl0J3MgYSBncm91cGVkIGhlYWRlclxuICAgICAgLy8gYW5kIHdlIGluY2x1ZGUgaXQgYW5kIGNvbnRpbnVlIGxvb3BpbmcgdW50aWwgd2UgcmVhY2ggdGhlIGVuZFxuICAgICAgaWYgKChjZWxsSW5kZXggKyAxKSA9PT0gaGVhZGVyc0xuIHx8ICgoY2VsbEluZGV4ICsgMSkgPCBoZWFkZXJzTG4gJiYgdGhpcy5fZ3JvdXBlZENvbHVtbkhlYWRlcnNbY2VsbEluZGV4XS50aXRsZSAhPT0gdGhpcy5fZ3JvdXBlZENvbHVtbkhlYWRlcnNbY2VsbEluZGV4ICsgMV0udGl0bGUpKSB7XG4gICAgICAgIC8vIGNhbGN1bGF0ZSBsZWZ0IHByZWZpeCwgZGl2aWRlIGJ5IDI2IGFuZCB1c2UgbW9kdWxvIHRvIGZpbmQgb3V0IHdoYXQgbnVtYmVyIGFkZCB0byBBXG4gICAgICAgIC8vIGZvciBleGFtcGxlIGlmIHdlIGhhdmUgY2VsbCBpbmRleCA1NCwgd2Ugd2lsbCBkbyAoKDU0LzI2KSAlMjYpID0+IDIuMDc2OSwgTWF0aC5mbG9vciBpcyAyLCB0aGVuIHdlIGRvIEEgd2hpY2ggaXMgNjUgKyAyIGdpdmVzIHVzIEIgc28gZmluYWwgY2VsbCB3aWxsIGJlIEFCMVxuICAgICAgICBjb25zdCBsZWZ0Q2VsbENoYXJDb2RlUHJlZml4ID0gTWF0aC5mbG9vcigobGFzdEluZGV4IC8gMjYpICUgMjYpO1xuICAgICAgICBjb25zdCBsZWZ0Q2VsbENoYXJhY3RlclByZWZpeCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckEgKyBsZWZ0Q2VsbENoYXJDb2RlUHJlZml4IC0gMSk7XG5cbiAgICAgICAgY29uc3QgcmlnaHRDZWxsQ2hhckNvZGVQcmVmaXggPSBNYXRoLmZsb29yKChjZWxsSW5kZXggLyAyNikgJSAyNik7XG4gICAgICAgIGNvbnN0IHJpZ2h0Q2VsbENoYXJhY3RlclByZWZpeCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckEgKyByaWdodENlbGxDaGFyQ29kZVByZWZpeCAtIDEpO1xuXG4gICAgICAgIGNlbGxQb3NpdGlvbkVuZCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckEgKyAoY2VsbEluZGV4ICUgMjYpKTtcbiAgICAgICAgY29uc3QgbGVmdENlbGwgPSBgJHtsYXN0SW5kZXggPiAyNiA/IGxlZnRDZWxsQ2hhcmFjdGVyUHJlZml4IDogJyd9JHtjZWxsUG9zaXRpb25TdGFydH0xYDtcbiAgICAgICAgY29uc3QgcmlnaHRDZWxsID0gYCR7Y2VsbEluZGV4ID4gMjYgPyByaWdodENlbGxDaGFyYWN0ZXJQcmVmaXggOiAnJ30ke2NlbGxQb3NpdGlvbkVuZH0xYDtcbiAgICAgICAgdGhpcy5fc2hlZXQubWVyZ2VDZWxscyhsZWZ0Q2VsbCwgcmlnaHRDZWxsKTtcblxuICAgICAgICBjZWxsUG9zaXRpb25TdGFydCA9IFN0cmluZy5mcm9tQ2hhckNvZGUoY2VsbFBvc2l0aW9uRW5kLmNoYXJDb2RlQXQoMCkgKyAxKTtcbiAgICAgICAgbGFzdEluZGV4ID0gY2VsbEluZGV4O1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBvdXRwdXRHcm91cGVkSGVhZGVyVGl0bGVzO1xuICB9XG5cbiAgLyoqIEdldCBhbGwgY29sdW1uIGhlYWRlcnMgYW5kIGZvcm1hdCB0aGVtIGluIEJvbGQgKi9cbiAgcHJpdmF0ZSBnZXRDb2x1bW5IZWFkZXJEYXRhKGNvbHVtbnM6IENvbHVtbltdLCBtZXRhZGF0YTogRXhjZWxNZXRhZGF0YSk6IEFycmF5PHN0cmluZyB8IEV4Y2VsQ2VsbEZvcm1hdD4ge1xuICAgIGxldCBvdXRwdXRIZWFkZXJUaXRsZXM6IEV4Y2VsQ2VsbEZvcm1hdFtdID0gW107XG5cbiAgICAvLyBnZXQgYWxsIENvbHVtbiBIZWFkZXIgVGl0bGVzXG4gICAgdGhpcy5fY29sdW1uSGVhZGVycyA9IHRoaXMuZ2V0Q29sdW1uSGVhZGVycyhjb2x1bW5zKSB8fCBbXTtcbiAgICBpZiAodGhpcy5fY29sdW1uSGVhZGVycyAmJiBBcnJheS5pc0FycmF5KHRoaXMuX2NvbHVtbkhlYWRlcnMpICYmIHRoaXMuX2NvbHVtbkhlYWRlcnMubGVuZ3RoID4gMCkge1xuICAgICAgLy8gYWRkIHRoZSBoZWFkZXIgcm93ICsgYWRkIGEgbmV3IGxpbmUgYXQgdGhlIGVuZCBvZiB0aGUgcm93XG4gICAgICBvdXRwdXRIZWFkZXJUaXRsZXMgPSB0aGlzLl9jb2x1bW5IZWFkZXJzLm1hcCgoaGVhZGVyKSA9PiAoeyB2YWx1ZTogaGVhZGVyLnRpdGxlLCBtZXRhZGF0YSB9KSk7XG4gICAgfVxuXG4gICAgLy8gZG8gd2UgaGF2ZSBhIEdyb3VwIGJ5IHRpdGxlP1xuICAgIGNvbnN0IGdyb3VwVGl0bGUgPSB0aGlzLmdldEdyb3VwQ29sdW1uVGl0bGUoKTtcbiAgICBpZiAoZ3JvdXBUaXRsZSkge1xuICAgICAgb3V0cHV0SGVhZGVyVGl0bGVzLnVuc2hpZnQoeyB2YWx1ZTogZ3JvdXBUaXRsZSwgbWV0YWRhdGEgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG91dHB1dEhlYWRlclRpdGxlcztcbiAgfVxuXG4gIHByaXZhdGUgZ2V0R3JvdXBDb2x1bW5UaXRsZSgpOiBzdHJpbmcgfCBudWxsIHtcbiAgICAvLyBHcm91cCBCeSB0ZXh0LCBpdCBjb3VsZCBiZSBzZXQgaW4gdGhlIGV4cG9ydCBvcHRpb25zIG9yIGZyb20gdHJhbnNsYXRpb24gb3IgaWYgbm90aGluZyBpcyBmb3VuZCB0aGVuIHVzZSB0aGUgRW5nbGlzaCBjb25zdGFudCB0ZXh0XG4gICAgbGV0IGdyb3VwQnlDb2x1bW5IZWFkZXIgPSB0aGlzLl9leGNlbEV4cG9ydE9wdGlvbnMuZ3JvdXBpbmdDb2x1bW5IZWFkZXJUaXRsZTtcbiAgICBpZiAoIWdyb3VwQnlDb2x1bW5IZWFkZXIgJiYgdGhpcy5fZ3JpZE9wdGlvbnMuZW5hYmxlVHJhbnNsYXRlICYmIHRoaXMudHJhbnNsYXRlICYmIHRoaXMudHJhbnNsYXRlLmN1cnJlbnRMYW5nICYmIHRoaXMudHJhbnNsYXRlLmluc3RhbnQpIHtcbiAgICAgIGdyb3VwQnlDb2x1bW5IZWFkZXIgPSB0aGlzLnRyYW5zbGF0ZS5pbnN0YW50KGAke2dldFRyYW5zbGF0aW9uUHJlZml4KHRoaXMuX2dyaWRPcHRpb25zKX1HUk9VUF9CWWApO1xuICAgIH0gZWxzZSBpZiAoIWdyb3VwQnlDb2x1bW5IZWFkZXIpIHtcbiAgICAgIGdyb3VwQnlDb2x1bW5IZWFkZXIgPSB0aGlzLl9sb2NhbGVzICYmIHRoaXMuX2xvY2FsZXMuVEVYVF9HUk9VUF9CWTtcbiAgICB9XG5cbiAgICAvLyBnZXQgZ3JvdXBlZCBjb2x1bW4gdGl0bGVzIGFuZCBpZiBmb3VuZCwgd2Ugd2lsbCBhZGQgYSBcIkdyb3VwIGJ5XCIgY29sdW1uIGF0IHRoZSBmaXJzdCBjb2x1bW4gaW5kZXhcbiAgICAvLyBpZiBpdCdzIGEgQ1NWIGZvcm1hdCwgd2UnbGwgZXNjYXBlIHRoZSB0ZXh0IGluIGRvdWJsZSBxdW90ZXNcbiAgICBjb25zdCBncm91cGluZyA9IHRoaXMuX2RhdGFWaWV3ICYmIHRoaXMuX2RhdGFWaWV3LmdldEdyb3VwaW5nICYmIHRoaXMuX2RhdGFWaWV3LmdldEdyb3VwaW5nKCk7XG4gICAgaWYgKGdyb3VwaW5nICYmIEFycmF5LmlzQXJyYXkoZ3JvdXBpbmcpICYmIGdyb3VwaW5nLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMuX2hhc0dyb3VwZWRJdGVtcyA9IHRydWU7XG4gICAgICByZXR1cm4gZ3JvdXBCeUNvbHVtbkhlYWRlcjtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGFzR3JvdXBlZEl0ZW1zID0gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhbGwgR3JvdXBlZCBIZWFkZXIgVGl0bGVzIGFuZCB0aGVpciBrZXlzLCB0cmFuc2xhdGUgdGhlIHRpdGxlIHdoZW4gcmVxdWlyZWQuXG4gICAqIEBwYXJhbSB7QXJyYXk8b2JqZWN0Pn0gY29sdW1ucyBvZiB0aGUgZ3JpZFxuICAgKi9cbiAgcHJpdmF0ZSBnZXRDb2x1bW5Hcm91cGVkSGVhZGVyVGl0bGVzKGNvbHVtbnM6IENvbHVtbltdKTogQXJyYXk8S2V5VGl0bGVQYWlyPiB7XG4gICAgY29uc3QgZ3JvdXBlZENvbHVtbkhlYWRlcnM6IEFycmF5PEtleVRpdGxlUGFpcj4gPSBbXTtcblxuICAgIGlmIChjb2x1bW5zICYmIEFycmF5LmlzQXJyYXkoY29sdW1ucykpIHtcbiAgICAgIC8vIFBvcHVsYXRlIHRoZSBHcm91cGVkIENvbHVtbiBIZWFkZXIsIHB1bGwgdGhlIGNvbHVtbkdyb3VwKEtleSkgZGVmaW5lZFxuICAgICAgY29sdW1ucy5mb3JFYWNoKChjb2x1bW5EZWY6IENvbHVtbikgPT4ge1xuICAgICAgICBsZXQgZ3JvdXBlZEhlYWRlclRpdGxlID0gJyc7XG4gICAgICAgIGlmIChjb2x1bW5EZWYuY29sdW1uR3JvdXBLZXkgJiYgdGhpcy5fZ3JpZE9wdGlvbnMuZW5hYmxlVHJhbnNsYXRlICYmIHRoaXMudHJhbnNsYXRlICYmIHRoaXMudHJhbnNsYXRlLmN1cnJlbnRMYW5nICYmIHRoaXMudHJhbnNsYXRlLmluc3RhbnQpIHtcbiAgICAgICAgICBncm91cGVkSGVhZGVyVGl0bGUgPSB0aGlzLnRyYW5zbGF0ZS5pbnN0YW50KGNvbHVtbkRlZi5jb2x1bW5Hcm91cEtleSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZ3JvdXBlZEhlYWRlclRpdGxlID0gY29sdW1uRGVmLmNvbHVtbkdyb3VwO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNraXBwZWRGaWVsZCA9IGNvbHVtbkRlZi5leGNsdWRlRnJvbUV4cG9ydCB8fCBmYWxzZTtcblxuICAgICAgICAvLyBpZiBjb2x1bW4gd2lkdGggaXMgMHB4LCB0aGVuIHdlIGNvbnNpZGVyIHRoYXQgZmllbGQgYXMgYSBoaWRkZW4gZmllbGQgYW5kIHNob3VsZCBub3QgYmUgcGFydCBvZiB0aGUgZXhwb3J0XG4gICAgICAgIGlmICgoY29sdW1uRGVmLndpZHRoID09PSB1bmRlZmluZWQgfHwgY29sdW1uRGVmLndpZHRoID4gMCkgJiYgIXNraXBwZWRGaWVsZCkge1xuICAgICAgICAgIGdyb3VwZWRDb2x1bW5IZWFkZXJzLnB1c2goe1xuICAgICAgICAgICAga2V5OiAoY29sdW1uRGVmLmZpZWxkIHx8IGNvbHVtbkRlZi5pZCkgYXMgc3RyaW5nLFxuICAgICAgICAgICAgdGl0bGU6IGdyb3VwZWRIZWFkZXJUaXRsZSB8fCAnJyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBncm91cGVkQ29sdW1uSGVhZGVycztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYWxsIGhlYWRlciB0aXRsZXMgYW5kIHRoZWlyIGtleXMsIHRyYW5zbGF0ZSB0aGUgdGl0bGUgd2hlbiByZXF1aXJlZC5cbiAgICogQHBhcmFtIGNvbHVtbnMgb2YgdGhlIGdyaWRcbiAgICovXG4gIHByaXZhdGUgZ2V0Q29sdW1uSGVhZGVycyhjb2x1bW5zOiBDb2x1bW5bXSk6IEFycmF5PEtleVRpdGxlUGFpcj4ge1xuICAgIGNvbnN0IGNvbHVtbkhlYWRlcnMgPSBbXTtcblxuICAgIGlmIChjb2x1bW5zICYmIEFycmF5LmlzQXJyYXkoY29sdW1ucykpIHtcbiAgICAgIC8vIFBvcHVsYXRlIHRoZSBDb2x1bW4gSGVhZGVyLCBwdWxsIHRoZSBuYW1lIGRlZmluZWRcbiAgICAgIGNvbHVtbnMuZm9yRWFjaCgoY29sdW1uRGVmKSA9PiB7XG4gICAgICAgIGxldCBoZWFkZXJUaXRsZSA9ICcnO1xuICAgICAgICBpZiAoKGNvbHVtbkRlZi5oZWFkZXJLZXkgfHwgY29sdW1uRGVmLm5hbWVLZXkpICYmIHRoaXMuX2dyaWRPcHRpb25zLmVuYWJsZVRyYW5zbGF0ZSAmJiB0aGlzLnRyYW5zbGF0ZSAmJiB0aGlzLnRyYW5zbGF0ZS5jdXJyZW50TGFuZyAmJiB0aGlzLnRyYW5zbGF0ZS5pbnN0YW50KSB7XG4gICAgICAgICAgaGVhZGVyVGl0bGUgPSB0aGlzLnRyYW5zbGF0ZS5pbnN0YW50KChjb2x1bW5EZWYuaGVhZGVyS2V5IHx8IGNvbHVtbkRlZi5uYW1lS2V5KSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaGVhZGVyVGl0bGUgPSBjb2x1bW5EZWYubmFtZSB8fCB0aXRsZUNhc2UoY29sdW1uRGVmLmZpZWxkKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBza2lwcGVkRmllbGQgPSBjb2x1bW5EZWYuZXhjbHVkZUZyb21FeHBvcnQgfHwgZmFsc2U7XG5cbiAgICAgICAgLy8gaWYgY29sdW1uIHdpZHRoIGlzIDAsIHRoZW4gd2UgY29uc2lkZXIgdGhhdCBmaWVsZCBhcyBhIGhpZGRlbiBmaWVsZCBhbmQgc2hvdWxkIG5vdCBiZSBwYXJ0IG9mIHRoZSBleHBvcnRcbiAgICAgICAgaWYgKChjb2x1bW5EZWYud2lkdGggPT09IHVuZGVmaW5lZCB8fCBjb2x1bW5EZWYud2lkdGggPiAwKSAmJiAhc2tpcHBlZEZpZWxkKSB7XG4gICAgICAgICAgY29sdW1uSGVhZGVycy5wdXNoKHtcbiAgICAgICAgICAgIGtleTogY29sdW1uRGVmLmZpZWxkIHx8IGNvbHVtbkRlZi5pZCxcbiAgICAgICAgICAgIHRpdGxlOiBoZWFkZXJUaXRsZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbHVtbkhlYWRlcnM7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGFsbCB0aGUgZ3JpZCByb3cgZGF0YSBhbmQgcmV0dXJuIHRoYXQgYXMgYW4gb3V0cHV0IHN0cmluZ1xuICAgKi9cbiAgcHJpdmF0ZSBwdXNoQWxsR3JpZFJvd0RhdGFUb0FycmF5KG9yaWdpbmFsRGFyYUFycmF5OiBzdHJpbmdbXVtdLCBjb2x1bW5zOiBDb2x1bW5bXSk6IHN0cmluZ1tdW10gfCBFeGNlbENlbGxGb3JtYXRbXVtdIHtcbiAgICBjb25zdCBsaW5lQ291bnQgPSB0aGlzLl9kYXRhVmlldyAmJiB0aGlzLl9kYXRhVmlldy5nZXRMZW5ndGggJiYgdGhpcy5fZGF0YVZpZXcuZ2V0TGVuZ3RoKCk7XG5cbiAgICAvLyBsb29wIHRocm91Z2ggYWxsIHRoZSBncmlkIHJvd3Mgb2YgZGF0YVxuICAgIGZvciAobGV0IHJvd051bWJlciA9IDA7IHJvd051bWJlciA8IGxpbmVDb3VudDsgcm93TnVtYmVyKyspIHtcbiAgICAgIGNvbnN0IGl0ZW1PYmogPSB0aGlzLl9kYXRhVmlldy5nZXRJdGVtKHJvd051bWJlcik7XG4gICAgICBpZiAoaXRlbU9iaikge1xuICAgICAgICAvLyBOb3JtYWwgcm93IChub3QgZ3JvdXBlZCBieSBhbnl0aGluZykgd291bGQgaGF2ZSBhbiBJRCB3aGljaCB3YXMgcHJlZGVmaW5lZCBpbiB0aGUgR3JpZCBDb2x1bW5zIGRlZmluaXRpb25cbiAgICAgICAgaWYgKGl0ZW1PYmpbdGhpcy5kYXRhc2V0SWROYW1lXSAhPT0gbnVsbCAmJiBpdGVtT2JqW3RoaXMuZGF0YXNldElkTmFtZV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIC8vIGdldCByZWd1bGFyIHJvdyBpdGVtIGRhdGFcbiAgICAgICAgICBvcmlnaW5hbERhcmFBcnJheS5wdXNoKHRoaXMucmVhZFJlZ3VsYXJSb3dEYXRhKGNvbHVtbnMsIHJvd051bWJlciwgaXRlbU9iaikpO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX2hhc0dyb3VwZWRJdGVtcyAmJiBpdGVtT2JqLl9fZ3JvdXBUb3RhbHMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIC8vIGdldCB0aGUgZ3JvdXAgcm93XG4gICAgICAgICAgb3JpZ2luYWxEYXJhQXJyYXkucHVzaChbdGhpcy5yZWFkR3JvdXBlZFRpdGxlUm93KGl0ZW1PYmopXSk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXRlbU9iai5fX2dyb3VwVG90YWxzKSB7XG4gICAgICAgICAgLy8gZWxzZSBpZiB0aGUgcm93IGlzIGEgR3JvdXAgQnkgYW5kIHdlIGhhdmUgYWdyZWdnYXRvcnMsIHRoZW4gYSBwcm9wZXJ0eSBvZiAnX19ncm91cFRvdGFscycgd291bGQgZXhpc3QgdW5kZXIgdGhhdCBvYmplY3RcbiAgICAgICAgICBvcmlnaW5hbERhcmFBcnJheS5wdXNoKHRoaXMucmVhZEdyb3VwZWRUb3RhbFJvdyhjb2x1bW5zLCBpdGVtT2JqKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG9yaWdpbmFsRGFyYUFycmF5O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgZGF0YSBvZiBhIHJlZ3VsYXIgcm93IChhIHJvdyB3aXRob3V0IGdyb3VwaW5nKVxuICAgKiBAcGFyYW0gcm93XG4gICAqIEBwYXJhbSBpdGVtT2JqXG4gICAqL1xuICBwcml2YXRlIHJlYWRSZWd1bGFyUm93RGF0YShjb2x1bW5zOiBDb2x1bW5bXSwgcm93OiBudW1iZXIsIGl0ZW1PYmo6IGFueSk6IHN0cmluZ1tdIHtcbiAgICBsZXQgaWR4ID0gMDtcbiAgICBjb25zdCByb3dPdXRwdXRTdHJpbmdzID0gW107XG5cbiAgICBmb3IgKGxldCBjb2wgPSAwLCBsbiA9IGNvbHVtbnMubGVuZ3RoOyBjb2wgPCBsbjsgY29sKyspIHtcbiAgICAgIGNvbnN0IGNvbHVtbkRlZiA9IGNvbHVtbnNbY29sXTtcbiAgICAgIGNvbnN0IGZpZWxkVHlwZSA9IGNvbHVtbkRlZi5vdXRwdXRUeXBlIHx8IGNvbHVtbkRlZi50eXBlIHx8IEZpZWxkVHlwZS5zdHJpbmc7XG5cbiAgICAgIC8vIHNraXAgZXhjbHVkZWQgY29sdW1uXG4gICAgICBpZiAoY29sdW1uRGVmLmV4Y2x1ZGVGcm9tRXhwb3J0KSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBpZiB3ZSBhcmUgZ3JvdXBpbmcgYW5kIGFyZSBvbiAxc3QgY29sdW1uIGluZGV4LCB3ZSBuZWVkIHRvIHNraXAgdGhpcyBjb2x1bW4gc2luY2UgaXQgd2lsbCBiZSB1c2VkIGxhdGVyIGJ5IHRoZSBncm91cGluZyB0ZXh0OjogR3JvdXAgYnkgW2NvbHVtblhdXG4gICAgICBpZiAodGhpcy5faGFzR3JvdXBlZEl0ZW1zICYmIGlkeCA9PT0gMCkge1xuICAgICAgICByb3dPdXRwdXRTdHJpbmdzLnB1c2goJycpO1xuICAgICAgfVxuXG4gICAgICAvLyBnZXQgdGhlIG91dHB1dCBieSBhbmFseXppbmcgaWYgd2UnbGwgcHVsbCB0aGUgdmFsdWUgZnJvbSB0aGUgY2VsbCBvciBmcm9tIGEgZm9ybWF0dGVyXG4gICAgICBsZXQgaXRlbURhdGE6IEV4Y2VsQ2VsbEZvcm1hdCB8IHN0cmluZyA9IGV4cG9ydFdpdGhGb3JtYXR0ZXJXaGVuRGVmaW5lZChyb3csIGNvbCwgaXRlbU9iaiwgY29sdW1uRGVmLCB0aGlzLl9ncmlkLCB0aGlzLl9leGNlbEV4cG9ydE9wdGlvbnMpO1xuXG4gICAgICAvLyBkb2VzIHRoZSB1c2VyIHdhbnQgdG8gc2FuaXRpemUgdGhlIG91dHB1dCBkYXRhIChyZW1vdmUgSFRNTCB0YWdzKT9cbiAgICAgIGlmIChjb2x1bW5EZWYuc2FuaXRpemVEYXRhRXhwb3J0IHx8IHRoaXMuX2V4Y2VsRXhwb3J0T3B0aW9ucy5zYW5pdGl6ZURhdGFFeHBvcnQpIHtcbiAgICAgICAgaXRlbURhdGEgPSBzYW5pdGl6ZUh0bWxUb1RleHQoaXRlbURhdGEgYXMgc3RyaW5nKTtcbiAgICAgIH1cblxuICAgICAgLy8gdXNlIGRpZmZlcmVudCBFeGNlbCBTdHlsZXNoZWV0IEZvcm1hdCBhcyBwZXIgdGhlIEZpZWxkIFR5cGVcbiAgICAgIGlmICghY29sdW1uRGVmLmV4cG9ydFdpdGhGb3JtYXR0ZXIpIHtcbiAgICAgICAgaXRlbURhdGEgPSB0aGlzLnVzZUNlbGxGb3JtYXRCeUZpZWxkVHlwZShpdGVtRGF0YSBhcyBzdHJpbmcsIGZpZWxkVHlwZSk7XG4gICAgICB9XG5cbiAgICAgIHJvd091dHB1dFN0cmluZ3MucHVzaChpdGVtRGF0YSk7XG4gICAgICBpZHgrKztcbiAgICB9XG5cbiAgICByZXR1cm4gcm93T3V0cHV0U3RyaW5ncztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGdyb3VwZWQgdGl0bGUocykgYW5kIGl0cyBncm91cCB0aXRsZSBmb3JtYXR0ZXIsIGZvciBleGFtcGxlIGlmIHdlIGdyb3VwZWQgYnkgc2FsZXNSZXAsIHRoZSByZXR1cm5lZCByZXN1bHQgd291bGQgYmU6OiAnU2FsZXMgUmVwOiBKb2huIERvdyAoMiBpdGVtcyknXG4gICAqIEBwYXJhbSBpdGVtT2JqXG4gICAqL1xuICBwcml2YXRlIHJlYWRHcm91cGVkVGl0bGVSb3coaXRlbU9iajogYW55KTogc3RyaW5nIHtcbiAgICBjb25zdCBncm91cE5hbWUgPSBzYW5pdGl6ZUh0bWxUb1RleHQoaXRlbU9iai50aXRsZSk7XG5cbiAgICBpZiAodGhpcy5fZXhjZWxFeHBvcnRPcHRpb25zICYmIHRoaXMuX2V4Y2VsRXhwb3J0T3B0aW9ucy5hZGRHcm91cEluZGVudGF0aW9uKSB7XG4gICAgICBjb25zdCBjb2xsYXBzZWRTeW1ib2wgPSB0aGlzLl9leGNlbEV4cG9ydE9wdGlvbnMgJiYgdGhpcy5fZXhjZWxFeHBvcnRPcHRpb25zLmdyb3VwQ29sbGFwc2VkU3ltYm9sIHx8ICdcXHUyNUI5JztcbiAgICAgIGNvbnN0IGV4cGFuZGVkU3ltYm9sID0gdGhpcy5fZXhjZWxFeHBvcnRPcHRpb25zICYmIHRoaXMuX2V4Y2VsRXhwb3J0T3B0aW9ucy5ncm91cEV4cGFuZGVkU3ltYm9sIHx8ICdcXHUyNUJGJztcbiAgICAgIGNvbnN0IGNoZXZyb24gPSBpdGVtT2JqLmNvbGxhcHNlZCA/IGNvbGxhcHNlZFN5bWJvbCA6IGV4cGFuZGVkU3ltYm9sO1xuICAgICAgcmV0dXJuIGNoZXZyb24gKyAnICcgKyBhZGRXaGl0ZVNwYWNlcyg1ICogaXRlbU9iai5sZXZlbCkgKyBncm91cE5hbWU7XG4gICAgfVxuICAgIHJldHVybiBncm91cE5hbWU7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBncm91cGVkIHRvdGFscyAoYmVsb3cgdGhlIHJlZ3VsYXIgcm93cyksIHRoZXNlIGFyZSBzZXQgYnkgU2xpY2sgQWdncmVnYXRvcnMuXG4gICAqIEZvciBleGFtcGxlIGlmIHdlIGdyb3VwZWQgYnkgXCJzYWxlc1JlcFwiIGFuZCB3ZSBoYXZlIGEgU3VtIEFnZ3JlZ2F0b3Igb24gXCJzYWxlc1wiLCB0aGVuIHRoZSByZXR1cm5lZCBvdXRwdXQgd291bGQgYmU6OiBbXCJTdW0gMTIzJFwiXVxuICAgKiBAcGFyYW0gaXRlbU9ialxuICAgKi9cbiAgcHJpdmF0ZSByZWFkR3JvdXBlZFRvdGFsUm93KGNvbHVtbnM6IENvbHVtbltdLCBpdGVtT2JqOiBhbnkpOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgZ3JvdXBpbmdBZ2dyZWdhdG9yUm93VGV4dCA9IHRoaXMuX2V4Y2VsRXhwb3J0T3B0aW9ucy5ncm91cGluZ0FnZ3JlZ2F0b3JSb3dUZXh0IHx8ICcnO1xuICAgIGNvbnN0IG91dHB1dFN0cmluZ3MgPSBbZ3JvdXBpbmdBZ2dyZWdhdG9yUm93VGV4dF07XG5cbiAgICBjb2x1bW5zLmZvckVhY2goKGNvbHVtbkRlZikgPT4ge1xuICAgICAgbGV0IGl0ZW1EYXRhID0gJyc7XG5cbiAgICAgIGNvbnN0IHNraXBwZWRGaWVsZCA9IGNvbHVtbkRlZi5leGNsdWRlRnJvbUV4cG9ydCB8fCBmYWxzZTtcblxuICAgICAgLy8gaWYgdGhlcmUncyBhIGV4cG9ydEN1c3RvbUdyb3VwVG90YWxzRm9ybWF0dGVyIG9yIGdyb3VwVG90YWxzRm9ybWF0dGVyLCB3ZSB3aWxsIHJlLXJ1biBpdCB0byBnZXQgdGhlIGV4YWN0IHNhbWUgb3V0cHV0IGFzIHdoYXQgaXMgc2hvd24gaW4gVUlcbiAgICAgIGlmIChjb2x1bW5EZWYuZXhwb3J0Q3VzdG9tR3JvdXBUb3RhbHNGb3JtYXR0ZXIpIHtcbiAgICAgICAgaXRlbURhdGEgPSBjb2x1bW5EZWYuZXhwb3J0Q3VzdG9tR3JvdXBUb3RhbHNGb3JtYXR0ZXIoaXRlbU9iaiwgY29sdW1uRGVmKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChjb2x1bW5EZWYuZ3JvdXBUb3RhbHNGb3JtYXR0ZXIpIHtcbiAgICAgICAgICBpdGVtRGF0YSA9IGNvbHVtbkRlZi5ncm91cFRvdGFsc0Zvcm1hdHRlcihpdGVtT2JqLCBjb2x1bW5EZWYpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIGRvZXMgdGhlIHVzZXIgd2FudCB0byBzYW5pdGl6ZSB0aGUgb3V0cHV0IGRhdGEgKHJlbW92ZSBIVE1MIHRhZ3MpP1xuICAgICAgaWYgKGNvbHVtbkRlZi5zYW5pdGl6ZURhdGFFeHBvcnQgfHwgdGhpcy5fZXhjZWxFeHBvcnRPcHRpb25zLnNhbml0aXplRGF0YUV4cG9ydCkge1xuICAgICAgICBpdGVtRGF0YSA9IHNhbml0aXplSHRtbFRvVGV4dChpdGVtRGF0YSk7XG4gICAgICB9XG5cbiAgICAgIC8vIGFkZCB0aGUgY29sdW1uICh1bmxlc3MgdXNlciB3YW50cyB0byBza2lwIGl0KVxuICAgICAgaWYgKChjb2x1bW5EZWYud2lkdGggPT09IHVuZGVmaW5lZCB8fCBjb2x1bW5EZWYud2lkdGggPiAwKSAmJiAhc2tpcHBlZEZpZWxkKSB7XG4gICAgICAgIG91dHB1dFN0cmluZ3MucHVzaChpdGVtRGF0YSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gb3V0cHV0U3RyaW5ncztcbiAgfVxufVxuIl19