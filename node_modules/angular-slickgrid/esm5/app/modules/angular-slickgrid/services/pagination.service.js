import * as tslib_1 from "tslib";
import { Injectable } from '@angular/core';
import { isObservable, Subject } from 'rxjs';
import * as isequal_ from 'lodash.isequal';
import * as ɵngcc0 from '@angular/core';
var isequal = isequal_; // patch to fix rollup to work
import { FilterService } from './filter.service';
import { GridService } from './grid.service';
import { SharedService } from './shared.service';
import { executeBackendProcessesCallback, onBackendError } from './backend-utilities';
import { unsubscribeAllObservables } from './utilities';
var PaginationService = /** @class */ (function () {
    /** Constructor */
    function PaginationService(filterService, gridService, sharedService) {
        this.filterService = filterService;
        this.gridService = gridService;
        this.sharedService = sharedService;
        this._initialized = false;
        this._isLocalGrid = true;
        this._dataFrom = 1;
        this._dataTo = 1;
        this._pageCount = 1;
        this._pageNumber = 1;
        this._totalItems = 0;
        this._eventHandler = new Slick.EventHandler();
        this._subscriptions = [];
        this.onPaginationChanged = new Subject();
        this.onPaginationVisibilityChanged = new Subject();
    }
    Object.defineProperty(PaginationService.prototype, "paginationOptions", {
        get: function () {
            return this._paginationOptions;
        },
        set: function (paginationOptions) {
            this._paginationOptions = paginationOptions;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PaginationService.prototype, "availablePageSizes", {
        get: function () {
            return this._availablePageSizes;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PaginationService.prototype, "dataFrom", {
        get: function () {
            return this._dataFrom;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PaginationService.prototype, "dataTo", {
        get: function () {
            return this._dataTo;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PaginationService.prototype, "itemsPerPage", {
        get: function () {
            return this._itemsPerPage;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PaginationService.prototype, "pageCount", {
        get: function () {
            return this._pageCount;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PaginationService.prototype, "pageNumber", {
        get: function () {
            return this._pageNumber;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PaginationService.prototype, "totalItems", {
        get: function () {
            return this._totalItems;
        },
        set: function (totalItems) {
            this._totalItems = totalItems;
            if (this._initialized) {
                this.refreshPagination();
            }
        },
        enumerable: true,
        configurable: true
    });
    PaginationService.prototype.init = function (grid, dataView, paginationOptions, backendServiceApi) {
        var _this = this;
        this._availablePageSizes = paginationOptions.pageSizes;
        this.dataView = dataView;
        this.grid = grid;
        this._backendServiceApi = backendServiceApi;
        this._paginationOptions = paginationOptions;
        this._isLocalGrid = !backendServiceApi;
        this._pageNumber = paginationOptions.pageNumber || 1;
        if (backendServiceApi && (!backendServiceApi.service || !backendServiceApi.process)) {
            throw new Error("BackendServiceApi requires the following 2 properties \"process\" and \"service\" to be defined.");
        }
        if (this._isLocalGrid && this.dataView) {
            this._eventHandler.subscribe(this.dataView.onPagingInfoChanged, function (e, pagingInfo) {
                if (_this._totalItems !== pagingInfo.totalRows) {
                    _this.updateTotalItems(pagingInfo.totalRows);
                }
            });
            dataView.setRefreshHints({ isFilterUnchanged: true });
            dataView.setPagingOptions({ pageSize: this.paginationOptions.pageSize, pageNum: (this._pageNumber - 1) }); // dataView page starts at 0 instead of 1
        }
        // Subscribe to Filter Clear & Changed and go back to page 1 when that happen
        this._subscriptions.push(this.filterService.onFilterChanged.subscribe(function () { return _this.resetPagination(); }));
        this._subscriptions.push(this.filterService.onFilterCleared.subscribe(function () { return _this.resetPagination(); }));
        // Subscribe to any dataview row count changed so that when Adding/Deleting item(s) through the DataView
        // that would trigger a refresh of the pagination numbers
        if (this.dataView) {
            this._subscriptions.push(this.gridService.onItemAdded.subscribe(function (items) { return _this.processOnItemAddedOrRemoved(items, true); }));
            this._subscriptions.push(this.gridService.onItemDeleted.subscribe(function (items) { return _this.processOnItemAddedOrRemoved(items, false); }));
        }
        this.refreshPagination(false, false);
        this._initialized = true;
    };
    PaginationService.prototype.dispose = function () {
        this._initialized = false;
        // unsubscribe all SlickGrid events
        this._eventHandler.unsubscribeAll();
        // also unsubscribe all Angular Subscriptions
        this._subscriptions = unsubscribeAllObservables(this._subscriptions);
    };
    PaginationService.prototype.getCurrentPageNumber = function () {
        return this._pageNumber;
    };
    PaginationService.prototype.getCurrentPagination = function () {
        return {
            pageNumber: this._pageNumber,
            pageSize: this._itemsPerPage,
            pageSizes: this._availablePageSizes,
        };
    };
    PaginationService.prototype.getFullPagination = function () {
        return {
            pageCount: this._pageCount,
            pageNumber: this._pageNumber,
            pageSize: this._itemsPerPage,
            pageSizes: this._availablePageSizes,
            totalItems: this._totalItems,
            dataFrom: this._dataFrom,
            dataTo: this._dataTo,
        };
    };
    PaginationService.prototype.getCurrentItemPerPage = function () {
        return this._itemsPerPage;
    };
    PaginationService.prototype.changeItemPerPage = function (itemsPerPage, event) {
        this._pageNumber = 1;
        this._pageCount = Math.ceil(this._totalItems / itemsPerPage);
        this._itemsPerPage = itemsPerPage;
        return this.processOnPageChanged(this._pageNumber, event);
    };
    PaginationService.prototype.goToFirstPage = function (event) {
        this._pageNumber = 1;
        return this.processOnPageChanged(this._pageNumber, event);
    };
    PaginationService.prototype.goToLastPage = function (event) {
        this._pageNumber = this._pageCount || 1;
        return this.processOnPageChanged(this._pageNumber, event);
    };
    PaginationService.prototype.goToNextPage = function (event) {
        if (this._pageNumber < this._pageCount) {
            this._pageNumber++;
            return this.processOnPageChanged(this._pageNumber, event);
        }
        else {
            return new Promise(function (resolve) { return resolve(false); });
        }
    };
    PaginationService.prototype.goToPageNumber = function (pageNumber, event) {
        var previousPageNumber = this._pageNumber;
        if (pageNumber < 1) {
            this._pageNumber = 1;
        }
        else if (pageNumber > this._pageCount) {
            this._pageNumber = this._pageCount;
        }
        else {
            this._pageNumber = pageNumber;
        }
        if (this._pageNumber !== previousPageNumber) {
            return this.processOnPageChanged(this._pageNumber, event);
        }
        else {
            return new Promise(function (resolve) { return resolve(false); });
        }
    };
    PaginationService.prototype.goToPreviousPage = function (event) {
        if (this._pageNumber > 1) {
            this._pageNumber--;
            return this.processOnPageChanged(this._pageNumber, event);
        }
        else {
            return new Promise(function (resolve) { return resolve(false); });
        }
    };
    PaginationService.prototype.refreshPagination = function (isPageNumberReset, triggerChangedEvent) {
        if (isPageNumberReset === void 0) { isPageNumberReset = false; }
        if (triggerChangedEvent === void 0) { triggerChangedEvent = true; }
        var previousPagination = tslib_1.__assign({}, this.getCurrentPagination());
        if (this._paginationOptions) {
            var pagination = this._paginationOptions;
            // set the number of items per page if not already set
            if (!this._itemsPerPage) {
                if (this._isLocalGrid) {
                    this._itemsPerPage = pagination.pageSize;
                }
                else {
                    this._itemsPerPage = +((this._backendServiceApi && this._backendServiceApi.options && this._backendServiceApi.options.paginationOptions && this._backendServiceApi.options.paginationOptions.first) ? this._backendServiceApi.options.paginationOptions.first : pagination.pageSize);
                }
            }
            // if totalItems changed, we should always go back to the first page and recalculation the From-To indexes
            if (isPageNumberReset || this._totalItems !== pagination.totalItems) {
                if (isPageNumberReset) {
                    this._pageNumber = 1;
                    this.paginationOptions.pageNumber = 1;
                }
                else if (!this._initialized && pagination.pageNumber && pagination.pageNumber > 1) {
                    this._pageNumber = pagination.pageNumber || 1;
                }
                // when page number is set to 1 then also reset the "offset" of backend service
                if (this._pageNumber === 1 && this._backendServiceApi) {
                    this._backendServiceApi.service.resetPaginationOptions();
                }
            }
            // calculate and refresh the multiple properties of the pagination UI
            this._availablePageSizes = pagination.pageSizes;
            if (!this._totalItems && pagination.totalItems) {
                this._totalItems = pagination.totalItems;
            }
            this.recalculateFromToIndexes();
        }
        this._pageCount = Math.ceil(this._totalItems / this._itemsPerPage);
        var currentPagination = this.getCurrentPagination();
        this.sharedService.currentPagination = currentPagination;
        if (triggerChangedEvent && !isequal(previousPagination, currentPagination)) {
            this.onPaginationChanged.next(currentPagination);
        }
    };
    PaginationService.prototype.processOnPageChanged = function (pageNumber, event) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            _this.recalculateFromToIndexes();
            if (_this._isLocalGrid && _this.dataView) {
                _this.dataView.setPagingOptions({ pageSize: _this._itemsPerPage, pageNum: (pageNumber - 1) }); // dataView page starts at 0 instead of 1
                _this.onPaginationChanged.next(_this.getFullPagination());
            }
            else {
                var itemsPerPage = +_this._itemsPerPage;
                // keep start time & end timestamps & return it after process execution
                var startTime_1 = new Date();
                // run any pre-process, if defined, for example a spinner
                if (_this._backendServiceApi.preProcess) {
                    _this._backendServiceApi.preProcess();
                }
                var query = _this._backendServiceApi.service.processOnPaginationChanged(event, { newPage: pageNumber, pageSize: itemsPerPage });
                // the processes can be Promises or an Observables (like HttpClient)
                var process_1 = _this._backendServiceApi.process(query);
                if (process_1 instanceof Promise) {
                    process_1
                        .then(function (processResult) {
                        resolve(executeBackendProcessesCallback(startTime_1, processResult, _this._backendServiceApi, _this._totalItems));
                    })
                        .catch(function (error) {
                        onBackendError(error, _this._backendServiceApi);
                        reject(process_1);
                    });
                }
                else if (isObservable(process_1)) {
                    _this._subscriptions.push(process_1.subscribe(function (processResult) {
                        resolve(executeBackendProcessesCallback(startTime_1, processResult, _this._backendServiceApi, _this._totalItems));
                    }, function (error) {
                        onBackendError(error, _this._backendServiceApi);
                        reject(process_1);
                    }));
                }
                _this.onPaginationChanged.next(_this.getFullPagination());
            }
        });
    };
    PaginationService.prototype.recalculateFromToIndexes = function () {
        if (this._totalItems === 0) {
            this._dataFrom = 0;
            this._dataTo = 1;
            this._pageNumber = 0;
        }
        else {
            this._dataFrom = this._pageNumber > 1 ? ((this._pageNumber * this._itemsPerPage) - this._itemsPerPage + 1) : 1;
            this._dataTo = (this._totalItems < this._itemsPerPage) ? this._totalItems : ((this._pageNumber || 1) * this._itemsPerPage);
            if (this._dataTo > this._totalItems) {
                this._dataTo = this._totalItems;
            }
        }
        this._pageNumber = (this._totalItems > 0 && this._pageNumber === 0) ? 1 : this._pageNumber;
        // do a final check on the From/To and make sure they are not over or below min/max acceptable values
        if (this._dataTo > this._totalItems) {
            this._dataTo = this._totalItems;
        }
        else if (this._totalItems < this._itemsPerPage) {
            this._dataTo = this._totalItems;
        }
    };
    /** Reset the Pagination to first page and recalculate necessary numbers */
    PaginationService.prototype.resetPagination = function (triggerChangedEvent) {
        if (triggerChangedEvent === void 0) { triggerChangedEvent = true; }
        if (this._isLocalGrid) {
            // on a local grid we also need to reset the DataView paging to 1st page
            this.dataView.setPagingOptions({ pageSize: this._itemsPerPage, pageNum: 0 });
        }
        this.refreshPagination(true, triggerChangedEvent);
    };
    /**
     * Toggle the Pagination (show/hide), it will use the visible if defined else it will automatically inverse when called without argument
     *
     * IMPORTANT NOTE:
     * The Pagination must be created on initial page load, then only after can you toggle it.
     * Basically this method WILL NOT WORK to show the Pagination if it was not there from the start.
     */
    PaginationService.prototype.togglePaginationVisibility = function (visible) {
        if (this.grid && this.sharedService && this.sharedService.gridOptions) {
            var isVisible = visible !== undefined ? visible : !this.sharedService.gridOptions.enablePagination;
            this.sharedService.gridOptions.enablePagination = isVisible;
            this.onPaginationVisibilityChanged.next({ visible: isVisible });
            // make sure to reset the Pagination and go back to first page to avoid any issues with Pagination being offset
            if (isVisible) {
                this.goToFirstPage();
            }
            // when using a local grid, we can reset the DataView pagination by changing its page size
            // page size of 0 would show all, hence cancel the pagination
            if (this._isLocalGrid) {
                var pageSize = visible ? this._itemsPerPage : 0;
                this.dataView.setPagingOptions({ pageSize: pageSize, pageNum: 0 });
            }
        }
    };
    // --
    // private functions
    // --------------------
    PaginationService.prototype.updateTotalItems = function (totalItems, triggerChangedEvent) {
        if (triggerChangedEvent === void 0) { triggerChangedEvent = false; }
        this._totalItems = totalItems;
        if (this._paginationOptions) {
            this._paginationOptions.totalItems = totalItems;
            this.refreshPagination(false, triggerChangedEvent);
        }
    };
    /**
     * When item is added or removed, we will refresh the numbers on the pagination however we won't trigger a backend change
     * This will have a side effect though, which is that the "To" count won't be matching the "items per page" count,
     * that is a necessary side effect to avoid triggering a backend query just to refresh the paging,
     * basically we assume that this offset is fine for the time being,
     * until user does an action which will refresh the data hence the pagination which will then become normal again
     */
    PaginationService.prototype.processOnItemAddedOrRemoved = function (items, isItemAdded) {
        if (isItemAdded === void 0) { isItemAdded = true; }
        if (items !== null) {
            var previousDataTo = this._dataTo;
            var itemCount = Array.isArray(items) ? items.length : 1;
            var itemCountWithDirection = isItemAdded ? +itemCount : -itemCount;
            // refresh the total count in the pagination and in the UI
            this._totalItems += itemCountWithDirection;
            this.recalculateFromToIndexes();
            // finally refresh the "To" count and we know it might be different than the "items per page" count
            // but this is necessary since we don't want an actual backend refresh
            this._dataTo = previousDataTo + itemCountWithDirection;
            this.onPaginationChanged.next(this.getFullPagination());
        }
    };
    PaginationService.ctorParameters = function () { return [
        { type: FilterService },
        { type: GridService },
        { type: SharedService }
    ]; };
PaginationService.ɵfac = function PaginationService_Factory(t) { return new (t || PaginationService)(ɵngcc0.ɵɵinject(FilterService), ɵngcc0.ɵɵinject(GridService), ɵngcc0.ɵɵinject(SharedService)); };
PaginationService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: PaginationService, factory: function (t) { return PaginationService.ɵfac(t); } });
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(PaginationService, [{
        type: Injectable
    }], function () { return [{ type: FilterService }, { type: GridService }, { type: SharedService }]; }, null); })();
    return PaginationService;
}());
export { PaginationService };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFnaW5hdGlvbi5zZXJ2aWNlLmpzIiwic291cmNlcyI6WyJuZzovYW5ndWxhci1zbGlja2dyaWQvYXBwL21vZHVsZXMvYW5ndWxhci1zbGlja2dyaWQvc2VydmljZXMvcGFnaW5hdGlvbi5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzNDLE9BQU8sRUFBZ0IsWUFBWSxFQUFFLE9BQU8sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUMzRCxPQUFPLEtBQUssUUFBUSxNQUFNLGdCQUFnQixDQUFDOztBQUMzQyxJQUFNLE9BQU8sR0FBRyxRQUFRLENBQUMsQ0FBQyw4QkFBOEI7QUFHeEQsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBQ2pELE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUM3QyxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFDakQsT0FBTyxFQUFFLCtCQUErQixFQUFFLGNBQWMsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ3RGLE9BQU8sRUFBRSx5QkFBeUIsRUFBRSxNQUFNLGFBQWEsQ0FBQztBQU14RDtBQUNvQixJQW1CbEIsa0JBQWtCO0FBQ3BCLElBQUUsMkJBQW9CLGFBQTRCLEVBQVUsV0FBd0IsRUFBVSxhQUE0QjtBQUFJLFFBQXhHLGtCQUFhLEdBQWIsYUFBYSxDQUFlO0FBQUMsUUFBUyxnQkFBVyxHQUFYLFdBQVcsQ0FBYTtBQUFDLFFBQVMsa0JBQWEsR0FBYixhQUFhLENBQWU7QUFBQyxRQXBCakgsaUJBQVksR0FBRyxLQUFLLENBQUM7QUFDL0IsUUFBVSxpQkFBWSxHQUFHLElBQUksQ0FBQztBQUM5QixRQUNVLGNBQVMsR0FBRyxDQUFDLENBQUM7QUFDeEIsUUFBVSxZQUFPLEdBQUcsQ0FBQyxDQUFDO0FBQ3RCLFFBQ1UsZUFBVSxHQUFHLENBQUMsQ0FBQztBQUN6QixRQUFV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QUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBTUEsQUFvQkEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBcEJBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQU1BLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFIQSxBQUtBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQU9BLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQVRBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUFBLEFBQUEsQUFNQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFvQ0EsQUFuQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBK0NBLEFBOUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQ0EsQUFBQSxBQUNBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBTUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUNBLEFBQUEsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQ0EsQUFBQSxBQUVBLEFBTUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQ0EsQUFBQSxBQXhXQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFyQkEsQUFBQSxBQURBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUE4WEEsQUFBQSxBQUFBLEFBQUEsQUE5WEEsQUE4WEEsQUE5WEEsQUFBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgU3Vic2NyaXB0aW9uLCBpc09ic2VydmFibGUsIFN1YmplY3QgfSBmcm9tICdyeGpzJztcclxuaW1wb3J0ICogYXMgaXNlcXVhbF8gZnJvbSAnbG9kYXNoLmlzZXF1YWwnO1xyXG5jb25zdCBpc2VxdWFsID0gaXNlcXVhbF87IC8vIHBhdGNoIHRvIGZpeCByb2xsdXAgdG8gd29ya1xyXG5cclxuaW1wb3J0IHsgQmFja2VuZFNlcnZpY2VBcGksIEN1cnJlbnRQYWdpbmF0aW9uLCBHcmFwaHFsUmVzdWx0LCBHcmFwaHFsUGFnaW5hdGVkUmVzdWx0LCBHcmlkT3B0aW9uLCBQYWdpbmF0aW9uLCBTZXJ2aWNlUGFnaW5hdGlvbiB9IGZyb20gJy4uL21vZGVscyc7XHJcbmltcG9ydCB7IEZpbHRlclNlcnZpY2UgfSBmcm9tICcuL2ZpbHRlci5zZXJ2aWNlJztcclxuaW1wb3J0IHsgR3JpZFNlcnZpY2UgfSBmcm9tICcuL2dyaWQuc2VydmljZSc7XHJcbmltcG9ydCB7IFNoYXJlZFNlcnZpY2UgfSBmcm9tICcuL3NoYXJlZC5zZXJ2aWNlJztcclxuaW1wb3J0IHsgZXhlY3V0ZUJhY2tlbmRQcm9jZXNzZXNDYWxsYmFjaywgb25CYWNrZW5kRXJyb3IgfSBmcm9tICcuL2JhY2tlbmQtdXRpbGl0aWVzJztcclxuaW1wb3J0IHsgdW5zdWJzY3JpYmVBbGxPYnNlcnZhYmxlcyB9IGZyb20gJy4vdXRpbGl0aWVzJztcclxuXHJcbi8vIHVzaW5nIGV4dGVybmFsIG5vbi10eXBlZCBqcyBsaWJyYXJpZXNcclxuZGVjbGFyZSBjb25zdCBTbGljazogYW55O1xyXG5cclxuQEluamVjdGFibGUoKVxyXG5leHBvcnQgY2xhc3MgUGFnaW5hdGlvblNlcnZpY2Uge1xyXG4gIHByaXZhdGUgX2luaXRpYWxpemVkID0gZmFsc2U7XHJcbiAgcHJpdmF0ZSBfaXNMb2NhbEdyaWQgPSB0cnVlO1xyXG4gIHByaXZhdGUgX2JhY2tlbmRTZXJ2aWNlQXBpOiBCYWNrZW5kU2VydmljZUFwaTtcclxuICBwcml2YXRlIF9kYXRhRnJvbSA9IDE7XHJcbiAgcHJpdmF0ZSBfZGF0YVRvID0gMTtcclxuICBwcml2YXRlIF9pdGVtc1BlclBhZ2U6IG51bWJlcjtcclxuICBwcml2YXRlIF9wYWdlQ291bnQgPSAxO1xyXG4gIHByaXZhdGUgX3BhZ2VOdW1iZXIgPSAxO1xyXG4gIHByaXZhdGUgX3RvdGFsSXRlbXMgPSAwO1xyXG4gIHByaXZhdGUgX2F2YWlsYWJsZVBhZ2VTaXplczogbnVtYmVyW107XHJcbiAgcHJpdmF0ZSBfZXZlbnRIYW5kbGVyID0gbmV3IFNsaWNrLkV2ZW50SGFuZGxlcigpO1xyXG4gIHByaXZhdGUgX3BhZ2luYXRpb25PcHRpb25zOiBQYWdpbmF0aW9uO1xyXG4gIHByaXZhdGUgX3N1YnNjcmlwdGlvbnM6IFN1YnNjcmlwdGlvbltdID0gW107XHJcbiAgb25QYWdpbmF0aW9uQ2hhbmdlZCA9IG5ldyBTdWJqZWN0PFNlcnZpY2VQYWdpbmF0aW9uPigpO1xyXG4gIG9uUGFnaW5hdGlvblZpc2liaWxpdHlDaGFuZ2VkID0gbmV3IFN1YmplY3Q8eyB2aXNpYmxlOiBib29sZWFuIH0+KCk7XHJcblxyXG4gIGRhdGFWaWV3OiBhbnk7XHJcbiAgZ3JpZDogYW55O1xyXG5cclxuICAvKiogQ29uc3RydWN0b3IgKi9cclxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGZpbHRlclNlcnZpY2U6IEZpbHRlclNlcnZpY2UsIHByaXZhdGUgZ3JpZFNlcnZpY2U6IEdyaWRTZXJ2aWNlLCBwcml2YXRlIHNoYXJlZFNlcnZpY2U6IFNoYXJlZFNlcnZpY2UpIHsgfVxyXG5cclxuICBnZXQgcGFnaW5hdGlvbk9wdGlvbnMoKTogUGFnaW5hdGlvbiB7XHJcbiAgICByZXR1cm4gdGhpcy5fcGFnaW5hdGlvbk9wdGlvbnM7XHJcbiAgfVxyXG4gIHNldCBwYWdpbmF0aW9uT3B0aW9ucyhwYWdpbmF0aW9uT3B0aW9uczogUGFnaW5hdGlvbikge1xyXG4gICAgdGhpcy5fcGFnaW5hdGlvbk9wdGlvbnMgPSBwYWdpbmF0aW9uT3B0aW9ucztcclxuICB9XHJcblxyXG4gIGdldCBhdmFpbGFibGVQYWdlU2l6ZXMoKTogbnVtYmVyW10ge1xyXG4gICAgcmV0dXJuIHRoaXMuX2F2YWlsYWJsZVBhZ2VTaXplcztcclxuICB9XHJcblxyXG4gIGdldCBkYXRhRnJvbSgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMuX2RhdGFGcm9tO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGRhdGFUbygpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMuX2RhdGFUbztcclxuICB9XHJcblxyXG4gIGdldCBpdGVtc1BlclBhZ2UoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLl9pdGVtc1BlclBhZ2U7XHJcbiAgfVxyXG5cclxuICBnZXQgcGFnZUNvdW50KCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5fcGFnZUNvdW50O1xyXG4gIH1cclxuXHJcbiAgZ2V0IHBhZ2VOdW1iZXIoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLl9wYWdlTnVtYmVyO1xyXG4gIH1cclxuXHJcbiAgc2V0IHRvdGFsSXRlbXModG90YWxJdGVtczogbnVtYmVyKSB7XHJcbiAgICB0aGlzLl90b3RhbEl0ZW1zID0gdG90YWxJdGVtcztcclxuICAgIGlmICh0aGlzLl9pbml0aWFsaXplZCkge1xyXG4gICAgICB0aGlzLnJlZnJlc2hQYWdpbmF0aW9uKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXQgdG90YWxJdGVtcygpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMuX3RvdGFsSXRlbXM7XHJcbiAgfVxyXG5cclxuICBpbml0KGdyaWQ6IGFueSwgZGF0YVZpZXc6IGFueSwgcGFnaW5hdGlvbk9wdGlvbnM6IFBhZ2luYXRpb24sIGJhY2tlbmRTZXJ2aWNlQXBpPzogQmFja2VuZFNlcnZpY2VBcGkpIHtcclxuICAgIHRoaXMuX2F2YWlsYWJsZVBhZ2VTaXplcyA9IHBhZ2luYXRpb25PcHRpb25zLnBhZ2VTaXplcztcclxuICAgIHRoaXMuZGF0YVZpZXcgPSBkYXRhVmlldztcclxuICAgIHRoaXMuZ3JpZCA9IGdyaWQ7XHJcbiAgICB0aGlzLl9iYWNrZW5kU2VydmljZUFwaSA9IGJhY2tlbmRTZXJ2aWNlQXBpO1xyXG4gICAgdGhpcy5fcGFnaW5hdGlvbk9wdGlvbnMgPSBwYWdpbmF0aW9uT3B0aW9ucztcclxuICAgIHRoaXMuX2lzTG9jYWxHcmlkID0gIWJhY2tlbmRTZXJ2aWNlQXBpO1xyXG4gICAgdGhpcy5fcGFnZU51bWJlciA9IHBhZ2luYXRpb25PcHRpb25zLnBhZ2VOdW1iZXIgfHwgMTtcclxuXHJcbiAgICBpZiAoYmFja2VuZFNlcnZpY2VBcGkgJiYgKCFiYWNrZW5kU2VydmljZUFwaS5zZXJ2aWNlIHx8ICFiYWNrZW5kU2VydmljZUFwaS5wcm9jZXNzKSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEJhY2tlbmRTZXJ2aWNlQXBpIHJlcXVpcmVzIHRoZSBmb2xsb3dpbmcgMiBwcm9wZXJ0aWVzIFwicHJvY2Vzc1wiIGFuZCBcInNlcnZpY2VcIiB0byBiZSBkZWZpbmVkLmApO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLl9pc0xvY2FsR3JpZCAmJiB0aGlzLmRhdGFWaWV3KSB7XHJcbiAgICAgIHRoaXMuX2V2ZW50SGFuZGxlci5zdWJzY3JpYmUodGhpcy5kYXRhVmlldy5vblBhZ2luZ0luZm9DaGFuZ2VkLCAoZSwgcGFnaW5nSW5mbykgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLl90b3RhbEl0ZW1zICE9PSBwYWdpbmdJbmZvLnRvdGFsUm93cykge1xyXG4gICAgICAgICAgdGhpcy51cGRhdGVUb3RhbEl0ZW1zKHBhZ2luZ0luZm8udG90YWxSb3dzKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICBkYXRhVmlldy5zZXRSZWZyZXNoSGludHMoeyBpc0ZpbHRlclVuY2hhbmdlZDogdHJ1ZSB9KTtcclxuICAgICAgZGF0YVZpZXcuc2V0UGFnaW5nT3B0aW9ucyh7IHBhZ2VTaXplOiB0aGlzLnBhZ2luYXRpb25PcHRpb25zLnBhZ2VTaXplLCBwYWdlTnVtOiAodGhpcy5fcGFnZU51bWJlciAtIDEpIH0pOyAvLyBkYXRhVmlldyBwYWdlIHN0YXJ0cyBhdCAwIGluc3RlYWQgb2YgMVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFN1YnNjcmliZSB0byBGaWx0ZXIgQ2xlYXIgJiBDaGFuZ2VkIGFuZCBnbyBiYWNrIHRvIHBhZ2UgMSB3aGVuIHRoYXQgaGFwcGVuXHJcbiAgICB0aGlzLl9zdWJzY3JpcHRpb25zLnB1c2godGhpcy5maWx0ZXJTZXJ2aWNlLm9uRmlsdGVyQ2hhbmdlZC5zdWJzY3JpYmUoKCkgPT4gdGhpcy5yZXNldFBhZ2luYXRpb24oKSkpO1xyXG4gICAgdGhpcy5fc3Vic2NyaXB0aW9ucy5wdXNoKHRoaXMuZmlsdGVyU2VydmljZS5vbkZpbHRlckNsZWFyZWQuc3Vic2NyaWJlKCgpID0+IHRoaXMucmVzZXRQYWdpbmF0aW9uKCkpKTtcclxuXHJcbiAgICAvLyBTdWJzY3JpYmUgdG8gYW55IGRhdGF2aWV3IHJvdyBjb3VudCBjaGFuZ2VkIHNvIHRoYXQgd2hlbiBBZGRpbmcvRGVsZXRpbmcgaXRlbShzKSB0aHJvdWdoIHRoZSBEYXRhVmlld1xyXG4gICAgLy8gdGhhdCB3b3VsZCB0cmlnZ2VyIGEgcmVmcmVzaCBvZiB0aGUgcGFnaW5hdGlvbiBudW1iZXJzXHJcbiAgICBpZiAodGhpcy5kYXRhVmlldykge1xyXG4gICAgICB0aGlzLl9zdWJzY3JpcHRpb25zLnB1c2godGhpcy5ncmlkU2VydmljZS5vbkl0ZW1BZGRlZC5zdWJzY3JpYmUoKGl0ZW1zOiBhbnkgfCBhbnlbXSkgPT4gdGhpcy5wcm9jZXNzT25JdGVtQWRkZWRPclJlbW92ZWQoaXRlbXMsIHRydWUpKSk7XHJcbiAgICAgIHRoaXMuX3N1YnNjcmlwdGlvbnMucHVzaCh0aGlzLmdyaWRTZXJ2aWNlLm9uSXRlbURlbGV0ZWQuc3Vic2NyaWJlKChpdGVtczogYW55IHwgYW55W10pID0+IHRoaXMucHJvY2Vzc09uSXRlbUFkZGVkT3JSZW1vdmVkKGl0ZW1zLCBmYWxzZSkpKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnJlZnJlc2hQYWdpbmF0aW9uKGZhbHNlLCBmYWxzZSk7XHJcbiAgICB0aGlzLl9pbml0aWFsaXplZCA9IHRydWU7XHJcbiAgfVxyXG5cclxuICBkaXNwb3NlKCkge1xyXG4gICAgdGhpcy5faW5pdGlhbGl6ZWQgPSBmYWxzZTtcclxuXHJcbiAgICAvLyB1bnN1YnNjcmliZSBhbGwgU2xpY2tHcmlkIGV2ZW50c1xyXG4gICAgdGhpcy5fZXZlbnRIYW5kbGVyLnVuc3Vic2NyaWJlQWxsKCk7XHJcblxyXG4gICAgLy8gYWxzbyB1bnN1YnNjcmliZSBhbGwgQW5ndWxhciBTdWJzY3JpcHRpb25zXHJcbiAgICB0aGlzLl9zdWJzY3JpcHRpb25zID0gdW5zdWJzY3JpYmVBbGxPYnNlcnZhYmxlcyh0aGlzLl9zdWJzY3JpcHRpb25zKTtcclxuICB9XHJcblxyXG4gIGdldEN1cnJlbnRQYWdlTnVtYmVyKCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5fcGFnZU51bWJlcjtcclxuICB9XHJcblxyXG4gIGdldEN1cnJlbnRQYWdpbmF0aW9uKCk6IEN1cnJlbnRQYWdpbmF0aW9uICYgeyBwYWdlU2l6ZXM6IG51bWJlcltdIH0ge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcGFnZU51bWJlcjogdGhpcy5fcGFnZU51bWJlcixcclxuICAgICAgcGFnZVNpemU6IHRoaXMuX2l0ZW1zUGVyUGFnZSxcclxuICAgICAgcGFnZVNpemVzOiB0aGlzLl9hdmFpbGFibGVQYWdlU2l6ZXMsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgZ2V0RnVsbFBhZ2luYXRpb24oKTogU2VydmljZVBhZ2luYXRpb24ge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcGFnZUNvdW50OiB0aGlzLl9wYWdlQ291bnQsXHJcbiAgICAgIHBhZ2VOdW1iZXI6IHRoaXMuX3BhZ2VOdW1iZXIsXHJcbiAgICAgIHBhZ2VTaXplOiB0aGlzLl9pdGVtc1BlclBhZ2UsXHJcbiAgICAgIHBhZ2VTaXplczogdGhpcy5fYXZhaWxhYmxlUGFnZVNpemVzLFxyXG4gICAgICB0b3RhbEl0ZW1zOiB0aGlzLl90b3RhbEl0ZW1zLFxyXG4gICAgICBkYXRhRnJvbTogdGhpcy5fZGF0YUZyb20sXHJcbiAgICAgIGRhdGFUbzogdGhpcy5fZGF0YVRvLFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGdldEN1cnJlbnRJdGVtUGVyUGFnZSgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMuX2l0ZW1zUGVyUGFnZTtcclxuICB9XHJcblxyXG4gIGNoYW5nZUl0ZW1QZXJQYWdlKGl0ZW1zUGVyUGFnZTogbnVtYmVyLCBldmVudD86IGFueSk6IFByb21pc2U8YW55PiB7XHJcbiAgICB0aGlzLl9wYWdlTnVtYmVyID0gMTtcclxuICAgIHRoaXMuX3BhZ2VDb3VudCA9IE1hdGguY2VpbCh0aGlzLl90b3RhbEl0ZW1zIC8gaXRlbXNQZXJQYWdlKTtcclxuICAgIHRoaXMuX2l0ZW1zUGVyUGFnZSA9IGl0ZW1zUGVyUGFnZTtcclxuICAgIHJldHVybiB0aGlzLnByb2Nlc3NPblBhZ2VDaGFuZ2VkKHRoaXMuX3BhZ2VOdW1iZXIsIGV2ZW50KTtcclxuICB9XHJcblxyXG4gIGdvVG9GaXJzdFBhZ2UoZXZlbnQ/OiBhbnkpOiBQcm9taXNlPGFueT4ge1xyXG4gICAgdGhpcy5fcGFnZU51bWJlciA9IDE7XHJcbiAgICByZXR1cm4gdGhpcy5wcm9jZXNzT25QYWdlQ2hhbmdlZCh0aGlzLl9wYWdlTnVtYmVyLCBldmVudCk7XHJcbiAgfVxyXG5cclxuICBnb1RvTGFzdFBhZ2UoZXZlbnQ/OiBhbnkpOiBQcm9taXNlPGFueT4ge1xyXG4gICAgdGhpcy5fcGFnZU51bWJlciA9IHRoaXMuX3BhZ2VDb3VudCB8fCAxO1xyXG4gICAgcmV0dXJuIHRoaXMucHJvY2Vzc09uUGFnZUNoYW5nZWQodGhpcy5fcGFnZU51bWJlciwgZXZlbnQpO1xyXG4gIH1cclxuXHJcbiAgZ29Ub05leHRQYWdlKGV2ZW50PzogYW55KTogUHJvbWlzZTxhbnk+IHtcclxuICAgIGlmICh0aGlzLl9wYWdlTnVtYmVyIDwgdGhpcy5fcGFnZUNvdW50KSB7XHJcbiAgICAgIHRoaXMuX3BhZ2VOdW1iZXIrKztcclxuICAgICAgcmV0dXJuIHRoaXMucHJvY2Vzc09uUGFnZUNoYW5nZWQodGhpcy5fcGFnZU51bWJlciwgZXZlbnQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gcmVzb2x2ZShmYWxzZSkpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ29Ub1BhZ2VOdW1iZXIocGFnZU51bWJlcjogbnVtYmVyLCBldmVudD86IGFueSk6IFByb21pc2U8YW55PiB7XHJcbiAgICBjb25zdCBwcmV2aW91c1BhZ2VOdW1iZXIgPSB0aGlzLl9wYWdlTnVtYmVyO1xyXG5cclxuICAgIGlmIChwYWdlTnVtYmVyIDwgMSkge1xyXG4gICAgICB0aGlzLl9wYWdlTnVtYmVyID0gMTtcclxuICAgIH0gZWxzZSBpZiAocGFnZU51bWJlciA+IHRoaXMuX3BhZ2VDb3VudCkge1xyXG4gICAgICB0aGlzLl9wYWdlTnVtYmVyID0gdGhpcy5fcGFnZUNvdW50O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fcGFnZU51bWJlciA9IHBhZ2VOdW1iZXI7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuX3BhZ2VOdW1iZXIgIT09IHByZXZpb3VzUGFnZU51bWJlcikge1xyXG4gICAgICByZXR1cm4gdGhpcy5wcm9jZXNzT25QYWdlQ2hhbmdlZCh0aGlzLl9wYWdlTnVtYmVyLCBldmVudCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiByZXNvbHZlKGZhbHNlKSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnb1RvUHJldmlvdXNQYWdlKGV2ZW50PzogYW55KTogUHJvbWlzZTxhbnk+IHtcclxuICAgIGlmICh0aGlzLl9wYWdlTnVtYmVyID4gMSkge1xyXG4gICAgICB0aGlzLl9wYWdlTnVtYmVyLS07XHJcbiAgICAgIHJldHVybiB0aGlzLnByb2Nlc3NPblBhZ2VDaGFuZ2VkKHRoaXMuX3BhZ2VOdW1iZXIsIGV2ZW50KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHJlc29sdmUoZmFsc2UpKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlZnJlc2hQYWdpbmF0aW9uKGlzUGFnZU51bWJlclJlc2V0OiBib29sZWFuID0gZmFsc2UsIHRyaWdnZXJDaGFuZ2VkRXZlbnQgPSB0cnVlKSB7XHJcbiAgICBjb25zdCBwcmV2aW91c1BhZ2luYXRpb24gPSB7IC4uLnRoaXMuZ2V0Q3VycmVudFBhZ2luYXRpb24oKSB9O1xyXG5cclxuICAgIGlmICh0aGlzLl9wYWdpbmF0aW9uT3B0aW9ucykge1xyXG4gICAgICBjb25zdCBwYWdpbmF0aW9uID0gdGhpcy5fcGFnaW5hdGlvbk9wdGlvbnM7XHJcblxyXG4gICAgICAvLyBzZXQgdGhlIG51bWJlciBvZiBpdGVtcyBwZXIgcGFnZSBpZiBub3QgYWxyZWFkeSBzZXRcclxuICAgICAgaWYgKCF0aGlzLl9pdGVtc1BlclBhZ2UpIHtcclxuICAgICAgICBpZiAodGhpcy5faXNMb2NhbEdyaWQpIHtcclxuICAgICAgICAgIHRoaXMuX2l0ZW1zUGVyUGFnZSA9IHBhZ2luYXRpb24ucGFnZVNpemU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuX2l0ZW1zUGVyUGFnZSA9ICsoKHRoaXMuX2JhY2tlbmRTZXJ2aWNlQXBpICYmIHRoaXMuX2JhY2tlbmRTZXJ2aWNlQXBpLm9wdGlvbnMgJiYgdGhpcy5fYmFja2VuZFNlcnZpY2VBcGkub3B0aW9ucy5wYWdpbmF0aW9uT3B0aW9ucyAmJiB0aGlzLl9iYWNrZW5kU2VydmljZUFwaS5vcHRpb25zLnBhZ2luYXRpb25PcHRpb25zLmZpcnN0KSA/IHRoaXMuX2JhY2tlbmRTZXJ2aWNlQXBpLm9wdGlvbnMucGFnaW5hdGlvbk9wdGlvbnMuZmlyc3QgOiBwYWdpbmF0aW9uLnBhZ2VTaXplKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIGlmIHRvdGFsSXRlbXMgY2hhbmdlZCwgd2Ugc2hvdWxkIGFsd2F5cyBnbyBiYWNrIHRvIHRoZSBmaXJzdCBwYWdlIGFuZCByZWNhbGN1bGF0aW9uIHRoZSBGcm9tLVRvIGluZGV4ZXNcclxuICAgICAgaWYgKGlzUGFnZU51bWJlclJlc2V0IHx8IHRoaXMuX3RvdGFsSXRlbXMgIT09IHBhZ2luYXRpb24udG90YWxJdGVtcykge1xyXG4gICAgICAgIGlmIChpc1BhZ2VOdW1iZXJSZXNldCkge1xyXG4gICAgICAgICAgdGhpcy5fcGFnZU51bWJlciA9IDE7XHJcbiAgICAgICAgICB0aGlzLnBhZ2luYXRpb25PcHRpb25zLnBhZ2VOdW1iZXIgPSAxO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoIXRoaXMuX2luaXRpYWxpemVkICYmIHBhZ2luYXRpb24ucGFnZU51bWJlciAmJiBwYWdpbmF0aW9uLnBhZ2VOdW1iZXIgPiAxKSB7XHJcbiAgICAgICAgICB0aGlzLl9wYWdlTnVtYmVyID0gcGFnaW5hdGlvbi5wYWdlTnVtYmVyIHx8IDE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyB3aGVuIHBhZ2UgbnVtYmVyIGlzIHNldCB0byAxIHRoZW4gYWxzbyByZXNldCB0aGUgXCJvZmZzZXRcIiBvZiBiYWNrZW5kIHNlcnZpY2VcclxuICAgICAgICBpZiAodGhpcy5fcGFnZU51bWJlciA9PT0gMSAmJiB0aGlzLl9iYWNrZW5kU2VydmljZUFwaSkge1xyXG4gICAgICAgICAgdGhpcy5fYmFja2VuZFNlcnZpY2VBcGkuc2VydmljZS5yZXNldFBhZ2luYXRpb25PcHRpb25zKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBjYWxjdWxhdGUgYW5kIHJlZnJlc2ggdGhlIG11bHRpcGxlIHByb3BlcnRpZXMgb2YgdGhlIHBhZ2luYXRpb24gVUlcclxuICAgICAgdGhpcy5fYXZhaWxhYmxlUGFnZVNpemVzID0gcGFnaW5hdGlvbi5wYWdlU2l6ZXM7XHJcbiAgICAgIGlmICghdGhpcy5fdG90YWxJdGVtcyAmJiBwYWdpbmF0aW9uLnRvdGFsSXRlbXMpIHtcclxuICAgICAgICB0aGlzLl90b3RhbEl0ZW1zID0gcGFnaW5hdGlvbi50b3RhbEl0ZW1zO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMucmVjYWxjdWxhdGVGcm9tVG9JbmRleGVzKCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLl9wYWdlQ291bnQgPSBNYXRoLmNlaWwodGhpcy5fdG90YWxJdGVtcyAvIHRoaXMuX2l0ZW1zUGVyUGFnZSk7XHJcbiAgICBjb25zdCBjdXJyZW50UGFnaW5hdGlvbiA9IHRoaXMuZ2V0Q3VycmVudFBhZ2luYXRpb24oKTtcclxuICAgIHRoaXMuc2hhcmVkU2VydmljZS5jdXJyZW50UGFnaW5hdGlvbiA9IGN1cnJlbnRQYWdpbmF0aW9uO1xyXG5cclxuICAgIGlmICh0cmlnZ2VyQ2hhbmdlZEV2ZW50ICYmICFpc2VxdWFsKHByZXZpb3VzUGFnaW5hdGlvbiwgY3VycmVudFBhZ2luYXRpb24pKSB7XHJcbiAgICAgIHRoaXMub25QYWdpbmF0aW9uQ2hhbmdlZC5uZXh0KGN1cnJlbnRQYWdpbmF0aW9uKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByb2Nlc3NPblBhZ2VDaGFuZ2VkKHBhZ2VOdW1iZXI6IG51bWJlciwgZXZlbnQ/OiBFdmVudCB8IHVuZGVmaW5lZCk6IFByb21pc2U8YW55PiB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICB0aGlzLnJlY2FsY3VsYXRlRnJvbVRvSW5kZXhlcygpO1xyXG5cclxuICAgICAgaWYgKHRoaXMuX2lzTG9jYWxHcmlkICYmIHRoaXMuZGF0YVZpZXcpIHtcclxuICAgICAgICB0aGlzLmRhdGFWaWV3LnNldFBhZ2luZ09wdGlvbnMoeyBwYWdlU2l6ZTogdGhpcy5faXRlbXNQZXJQYWdlLCBwYWdlTnVtOiAocGFnZU51bWJlciAtIDEpIH0pOyAvLyBkYXRhVmlldyBwYWdlIHN0YXJ0cyBhdCAwIGluc3RlYWQgb2YgMVxyXG4gICAgICAgIHRoaXMub25QYWdpbmF0aW9uQ2hhbmdlZC5uZXh0KHRoaXMuZ2V0RnVsbFBhZ2luYXRpb24oKSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc3QgaXRlbXNQZXJQYWdlID0gK3RoaXMuX2l0ZW1zUGVyUGFnZTtcclxuXHJcbiAgICAgICAgLy8ga2VlcCBzdGFydCB0aW1lICYgZW5kIHRpbWVzdGFtcHMgJiByZXR1cm4gaXQgYWZ0ZXIgcHJvY2VzcyBleGVjdXRpb25cclxuICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBuZXcgRGF0ZSgpO1xyXG5cclxuICAgICAgICAvLyBydW4gYW55IHByZS1wcm9jZXNzLCBpZiBkZWZpbmVkLCBmb3IgZXhhbXBsZSBhIHNwaW5uZXJcclxuICAgICAgICBpZiAodGhpcy5fYmFja2VuZFNlcnZpY2VBcGkucHJlUHJvY2Vzcykge1xyXG4gICAgICAgICAgdGhpcy5fYmFja2VuZFNlcnZpY2VBcGkucHJlUHJvY2VzcygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgcXVlcnkgPSB0aGlzLl9iYWNrZW5kU2VydmljZUFwaS5zZXJ2aWNlLnByb2Nlc3NPblBhZ2luYXRpb25DaGFuZ2VkKGV2ZW50LCB7IG5ld1BhZ2U6IHBhZ2VOdW1iZXIsIHBhZ2VTaXplOiBpdGVtc1BlclBhZ2UgfSk7XHJcblxyXG4gICAgICAgIC8vIHRoZSBwcm9jZXNzZXMgY2FuIGJlIFByb21pc2VzIG9yIGFuIE9ic2VydmFibGVzIChsaWtlIEh0dHBDbGllbnQpXHJcbiAgICAgICAgY29uc3QgcHJvY2VzcyA9IHRoaXMuX2JhY2tlbmRTZXJ2aWNlQXBpLnByb2Nlc3MocXVlcnkpO1xyXG4gICAgICAgIGlmIChwcm9jZXNzIGluc3RhbmNlb2YgUHJvbWlzZSkge1xyXG4gICAgICAgICAgcHJvY2Vzc1xyXG4gICAgICAgICAgICAudGhlbigocHJvY2Vzc1Jlc3VsdDogR3JhcGhxbFJlc3VsdCB8IEdyYXBocWxQYWdpbmF0ZWRSZXN1bHQgfCBhbnkpID0+IHtcclxuICAgICAgICAgICAgICByZXNvbHZlKGV4ZWN1dGVCYWNrZW5kUHJvY2Vzc2VzQ2FsbGJhY2soc3RhcnRUaW1lLCBwcm9jZXNzUmVzdWx0LCB0aGlzLl9iYWNrZW5kU2VydmljZUFwaSwgdGhpcy5fdG90YWxJdGVtcykpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgb25CYWNrZW5kRXJyb3IoZXJyb3IsIHRoaXMuX2JhY2tlbmRTZXJ2aWNlQXBpKTtcclxuICAgICAgICAgICAgICByZWplY3QocHJvY2Vzcyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaXNPYnNlcnZhYmxlKHByb2Nlc3MpKSB7XHJcbiAgICAgICAgICB0aGlzLl9zdWJzY3JpcHRpb25zLnB1c2goXHJcbiAgICAgICAgICAgIHByb2Nlc3Muc3Vic2NyaWJlKFxyXG4gICAgICAgICAgICAgIChwcm9jZXNzUmVzdWx0OiBHcmFwaHFsUmVzdWx0IHwgR3JhcGhxbFBhZ2luYXRlZFJlc3VsdCB8IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShleGVjdXRlQmFja2VuZFByb2Nlc3Nlc0NhbGxiYWNrKHN0YXJ0VGltZSwgcHJvY2Vzc1Jlc3VsdCwgdGhpcy5fYmFja2VuZFNlcnZpY2VBcGksIHRoaXMuX3RvdGFsSXRlbXMpKTtcclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgIChlcnJvcjogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBvbkJhY2tlbmRFcnJvcihlcnJvciwgdGhpcy5fYmFja2VuZFNlcnZpY2VBcGkpO1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KHByb2Nlc3MpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKVxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vblBhZ2luYXRpb25DaGFuZ2VkLm5leHQodGhpcy5nZXRGdWxsUGFnaW5hdGlvbigpKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICByZWNhbGN1bGF0ZUZyb21Ub0luZGV4ZXMoKSB7XHJcbiAgICBpZiAodGhpcy5fdG90YWxJdGVtcyA9PT0gMCkge1xyXG4gICAgICB0aGlzLl9kYXRhRnJvbSA9IDA7XHJcbiAgICAgIHRoaXMuX2RhdGFUbyA9IDE7XHJcbiAgICAgIHRoaXMuX3BhZ2VOdW1iZXIgPSAwO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fZGF0YUZyb20gPSB0aGlzLl9wYWdlTnVtYmVyID4gMSA/ICgodGhpcy5fcGFnZU51bWJlciAqIHRoaXMuX2l0ZW1zUGVyUGFnZSkgLSB0aGlzLl9pdGVtc1BlclBhZ2UgKyAxKSA6IDE7XHJcbiAgICAgIHRoaXMuX2RhdGFUbyA9ICh0aGlzLl90b3RhbEl0ZW1zIDwgdGhpcy5faXRlbXNQZXJQYWdlKSA/IHRoaXMuX3RvdGFsSXRlbXMgOiAoKHRoaXMuX3BhZ2VOdW1iZXIgfHwgMSkgKiB0aGlzLl9pdGVtc1BlclBhZ2UpO1xyXG4gICAgICBpZiAodGhpcy5fZGF0YVRvID4gdGhpcy5fdG90YWxJdGVtcykge1xyXG4gICAgICAgIHRoaXMuX2RhdGFUbyA9IHRoaXMuX3RvdGFsSXRlbXM7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMuX3BhZ2VOdW1iZXIgPSAodGhpcy5fdG90YWxJdGVtcyA+IDAgJiYgdGhpcy5fcGFnZU51bWJlciA9PT0gMCkgPyAxIDogdGhpcy5fcGFnZU51bWJlcjtcclxuXHJcbiAgICAvLyBkbyBhIGZpbmFsIGNoZWNrIG9uIHRoZSBGcm9tL1RvIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgbm90IG92ZXIgb3IgYmVsb3cgbWluL21heCBhY2NlcHRhYmxlIHZhbHVlc1xyXG4gICAgaWYgKHRoaXMuX2RhdGFUbyA+IHRoaXMuX3RvdGFsSXRlbXMpIHtcclxuICAgICAgdGhpcy5fZGF0YVRvID0gdGhpcy5fdG90YWxJdGVtcztcclxuICAgIH0gZWxzZSBpZiAodGhpcy5fdG90YWxJdGVtcyA8IHRoaXMuX2l0ZW1zUGVyUGFnZSkge1xyXG4gICAgICB0aGlzLl9kYXRhVG8gPSB0aGlzLl90b3RhbEl0ZW1zO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqIFJlc2V0IHRoZSBQYWdpbmF0aW9uIHRvIGZpcnN0IHBhZ2UgYW5kIHJlY2FsY3VsYXRlIG5lY2Vzc2FyeSBudW1iZXJzICovXHJcbiAgcmVzZXRQYWdpbmF0aW9uKHRyaWdnZXJDaGFuZ2VkRXZlbnQgPSB0cnVlKSB7XHJcbiAgICBpZiAodGhpcy5faXNMb2NhbEdyaWQpIHtcclxuICAgICAgLy8gb24gYSBsb2NhbCBncmlkIHdlIGFsc28gbmVlZCB0byByZXNldCB0aGUgRGF0YVZpZXcgcGFnaW5nIHRvIDFzdCBwYWdlXHJcbiAgICAgIHRoaXMuZGF0YVZpZXcuc2V0UGFnaW5nT3B0aW9ucyh7IHBhZ2VTaXplOiB0aGlzLl9pdGVtc1BlclBhZ2UsIHBhZ2VOdW06IDAgfSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLnJlZnJlc2hQYWdpbmF0aW9uKHRydWUsIHRyaWdnZXJDaGFuZ2VkRXZlbnQpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVG9nZ2xlIHRoZSBQYWdpbmF0aW9uIChzaG93L2hpZGUpLCBpdCB3aWxsIHVzZSB0aGUgdmlzaWJsZSBpZiBkZWZpbmVkIGVsc2UgaXQgd2lsbCBhdXRvbWF0aWNhbGx5IGludmVyc2Ugd2hlbiBjYWxsZWQgd2l0aG91dCBhcmd1bWVudFxyXG4gICAqXHJcbiAgICogSU1QT1JUQU5UIE5PVEU6XHJcbiAgICogVGhlIFBhZ2luYXRpb24gbXVzdCBiZSBjcmVhdGVkIG9uIGluaXRpYWwgcGFnZSBsb2FkLCB0aGVuIG9ubHkgYWZ0ZXIgY2FuIHlvdSB0b2dnbGUgaXQuXHJcbiAgICogQmFzaWNhbGx5IHRoaXMgbWV0aG9kIFdJTEwgTk9UIFdPUksgdG8gc2hvdyB0aGUgUGFnaW5hdGlvbiBpZiBpdCB3YXMgbm90IHRoZXJlIGZyb20gdGhlIHN0YXJ0LlxyXG4gICAqL1xyXG4gIHRvZ2dsZVBhZ2luYXRpb25WaXNpYmlsaXR5KHZpc2libGU/OiBib29sZWFuKSB7XHJcbiAgICBpZiAodGhpcy5ncmlkICYmIHRoaXMuc2hhcmVkU2VydmljZSAmJiB0aGlzLnNoYXJlZFNlcnZpY2UuZ3JpZE9wdGlvbnMpIHtcclxuICAgICAgY29uc3QgaXNWaXNpYmxlID0gdmlzaWJsZSAhPT0gdW5kZWZpbmVkID8gdmlzaWJsZSA6ICF0aGlzLnNoYXJlZFNlcnZpY2UuZ3JpZE9wdGlvbnMuZW5hYmxlUGFnaW5hdGlvbjtcclxuICAgICAgdGhpcy5zaGFyZWRTZXJ2aWNlLmdyaWRPcHRpb25zLmVuYWJsZVBhZ2luYXRpb24gPSBpc1Zpc2libGU7XHJcbiAgICAgIHRoaXMub25QYWdpbmF0aW9uVmlzaWJpbGl0eUNoYW5nZWQubmV4dCh7IHZpc2libGU6IGlzVmlzaWJsZSB9KTtcclxuXHJcbiAgICAgIC8vIG1ha2Ugc3VyZSB0byByZXNldCB0aGUgUGFnaW5hdGlvbiBhbmQgZ28gYmFjayB0byBmaXJzdCBwYWdlIHRvIGF2b2lkIGFueSBpc3N1ZXMgd2l0aCBQYWdpbmF0aW9uIGJlaW5nIG9mZnNldFxyXG4gICAgICBpZiAoaXNWaXNpYmxlKSB7XHJcbiAgICAgICAgdGhpcy5nb1RvRmlyc3RQYWdlKCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIHdoZW4gdXNpbmcgYSBsb2NhbCBncmlkLCB3ZSBjYW4gcmVzZXQgdGhlIERhdGFWaWV3IHBhZ2luYXRpb24gYnkgY2hhbmdpbmcgaXRzIHBhZ2Ugc2l6ZVxyXG4gICAgICAvLyBwYWdlIHNpemUgb2YgMCB3b3VsZCBzaG93IGFsbCwgaGVuY2UgY2FuY2VsIHRoZSBwYWdpbmF0aW9uXHJcbiAgICAgIGlmICh0aGlzLl9pc0xvY2FsR3JpZCkge1xyXG4gICAgICAgIGNvbnN0IHBhZ2VTaXplID0gdmlzaWJsZSA/IHRoaXMuX2l0ZW1zUGVyUGFnZSA6IDA7XHJcbiAgICAgICAgdGhpcy5kYXRhVmlldy5zZXRQYWdpbmdPcHRpb25zKHsgcGFnZVNpemUsIHBhZ2VOdW06IDAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIC0tXHJcbiAgLy8gcHJpdmF0ZSBmdW5jdGlvbnNcclxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICB1cGRhdGVUb3RhbEl0ZW1zKHRvdGFsSXRlbXM6IG51bWJlciwgdHJpZ2dlckNoYW5nZWRFdmVudCA9IGZhbHNlKSB7XHJcbiAgICB0aGlzLl90b3RhbEl0ZW1zID0gdG90YWxJdGVtcztcclxuICAgIGlmICh0aGlzLl9wYWdpbmF0aW9uT3B0aW9ucykge1xyXG4gICAgICB0aGlzLl9wYWdpbmF0aW9uT3B0aW9ucy50b3RhbEl0ZW1zID0gdG90YWxJdGVtcztcclxuICAgICAgdGhpcy5yZWZyZXNoUGFnaW5hdGlvbihmYWxzZSwgdHJpZ2dlckNoYW5nZWRFdmVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBXaGVuIGl0ZW0gaXMgYWRkZWQgb3IgcmVtb3ZlZCwgd2Ugd2lsbCByZWZyZXNoIHRoZSBudW1iZXJzIG9uIHRoZSBwYWdpbmF0aW9uIGhvd2V2ZXIgd2Ugd29uJ3QgdHJpZ2dlciBhIGJhY2tlbmQgY2hhbmdlXHJcbiAgICogVGhpcyB3aWxsIGhhdmUgYSBzaWRlIGVmZmVjdCB0aG91Z2gsIHdoaWNoIGlzIHRoYXQgdGhlIFwiVG9cIiBjb3VudCB3b24ndCBiZSBtYXRjaGluZyB0aGUgXCJpdGVtcyBwZXIgcGFnZVwiIGNvdW50LFxyXG4gICAqIHRoYXQgaXMgYSBuZWNlc3Nhcnkgc2lkZSBlZmZlY3QgdG8gYXZvaWQgdHJpZ2dlcmluZyBhIGJhY2tlbmQgcXVlcnkganVzdCB0byByZWZyZXNoIHRoZSBwYWdpbmcsXHJcbiAgICogYmFzaWNhbGx5IHdlIGFzc3VtZSB0aGF0IHRoaXMgb2Zmc2V0IGlzIGZpbmUgZm9yIHRoZSB0aW1lIGJlaW5nLFxyXG4gICAqIHVudGlsIHVzZXIgZG9lcyBhbiBhY3Rpb24gd2hpY2ggd2lsbCByZWZyZXNoIHRoZSBkYXRhIGhlbmNlIHRoZSBwYWdpbmF0aW9uIHdoaWNoIHdpbGwgdGhlbiBiZWNvbWUgbm9ybWFsIGFnYWluXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBwcm9jZXNzT25JdGVtQWRkZWRPclJlbW92ZWQoaXRlbXM6IGFueSB8IGFueVtdLCBpc0l0ZW1BZGRlZCA9IHRydWUpIHtcclxuICAgIGlmIChpdGVtcyAhPT0gbnVsbCkge1xyXG4gICAgICBjb25zdCBwcmV2aW91c0RhdGFUbyA9IHRoaXMuX2RhdGFUbztcclxuICAgICAgY29uc3QgaXRlbUNvdW50ID0gQXJyYXkuaXNBcnJheShpdGVtcykgPyBpdGVtcy5sZW5ndGggOiAxO1xyXG4gICAgICBjb25zdCBpdGVtQ291bnRXaXRoRGlyZWN0aW9uID0gaXNJdGVtQWRkZWQgPyAraXRlbUNvdW50IDogLWl0ZW1Db3VudDtcclxuXHJcbiAgICAgIC8vIHJlZnJlc2ggdGhlIHRvdGFsIGNvdW50IGluIHRoZSBwYWdpbmF0aW9uIGFuZCBpbiB0aGUgVUlcclxuICAgICAgdGhpcy5fdG90YWxJdGVtcyArPSBpdGVtQ291bnRXaXRoRGlyZWN0aW9uO1xyXG4gICAgICB0aGlzLnJlY2FsY3VsYXRlRnJvbVRvSW5kZXhlcygpO1xyXG5cclxuICAgICAgLy8gZmluYWxseSByZWZyZXNoIHRoZSBcIlRvXCIgY291bnQgYW5kIHdlIGtub3cgaXQgbWlnaHQgYmUgZGlmZmVyZW50IHRoYW4gdGhlIFwiaXRlbXMgcGVyIHBhZ2VcIiBjb3VudFxyXG4gICAgICAvLyBidXQgdGhpcyBpcyBuZWNlc3Nhcnkgc2luY2Ugd2UgZG9uJ3Qgd2FudCBhbiBhY3R1YWwgYmFja2VuZCByZWZyZXNoXHJcbiAgICAgIHRoaXMuX2RhdGFUbyA9IHByZXZpb3VzRGF0YVRvICsgaXRlbUNvdW50V2l0aERpcmVjdGlvbjtcclxuICAgICAgdGhpcy5vblBhZ2luYXRpb25DaGFuZ2VkLm5leHQodGhpcy5nZXRGdWxsUGFnaW5hdGlvbigpKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIl19