import * as tslib_1 from "tslib";
import * as isequal_ from 'lodash.isequal';
import * as Éµngcc0 from '@angular/core';
var isequal = isequal_; // patch to fix rollup to work
import { ExtensionName, GridStateType, } from './../models/index';
import { ExtensionService } from './extension.service';
import { FilterService } from './filter.service';
import { SortService } from './sort.service';
import { Subject } from 'rxjs';
import { unsubscribeAllObservables } from './utilities';
import { SharedService } from './shared.service';
import { Injectable } from '@angular/core';
var GridStateService = /** @class */ (function () {
    function GridStateService(extensionService, filterService, sharedService, sortService) {
        this.extensionService = extensionService;
        this.filterService = filterService;
        this.sharedService = sharedService;
        this.sortService = sortService;
        this._columns = [];
        this._currentColumns = [];
        this._subscriptions = [];
        this._selectedRowDataContextIds = []; // used with row selection
        this._selectedFilteredRowDataContextIds = []; // used with row selection
        this._wasRecheckedAfterPageChange = true; // used with row selection & pagination
        this.onGridStateChanged = new Subject();
        this._eventHandler = new Slick.EventHandler();
    }
    Object.defineProperty(GridStateService.prototype, "_gridOptions", {
        /** Getter for the Grid Options pulled through the Grid Object */
        get: function () {
            return (this._grid && this._grid.getOptions) ? this._grid.getOptions() : {};
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(GridStateService.prototype, "datasetIdPropName", {
        get: function () {
            return this._gridOptions.datasetIdPropertyName || 'id';
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(GridStateService.prototype, "selectedRowDataContextIds", {
        /** Getter of the selected data context object IDs */
        get: function () {
            return this._selectedRowDataContextIds;
        },
        /** Setter of the selected data context object IDs */
        set: function (dataContextIds) {
            this._selectedRowDataContextIds = dataContextIds;
            // since this is coming from a preset, we also need to update the filtered IDs
            this._selectedFilteredRowDataContextIds = dataContextIds;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Initialize the Grid State Service
     * @param grid
     */
    GridStateService.prototype.init = function (grid, dataView) {
        this._grid = grid;
        this._dataView = dataView;
        this.subscribeToAllGridChanges(grid);
    };
    /** Dispose of all the SlickGrid & Angular subscriptions */
    GridStateService.prototype.dispose = function () {
        // unsubscribe all SlickGrid events
        this._eventHandler.unsubscribeAll();
        // also unsubscribe all Angular Subscriptions
        this._subscriptions = unsubscribeAllObservables(this._subscriptions);
        this._currentColumns = [];
        this._columns = [];
    };
    /**
     * Get the current grid state (filters/sorters/pagination)
     * @return grid state
     */
    GridStateService.prototype.getCurrentGridState = function (args) {
        var gridState = {
            columns: this.getCurrentColumns(),
            filters: this.getCurrentFilters(),
            sorters: this.getCurrentSorters(),
        };
        var currentPagination = this.getCurrentPagination();
        if (currentPagination) {
            gridState.pagination = currentPagination;
        }
        if (this.hasRowSelectionEnabled()) {
            var currentRowSelection = this.getCurrentRowSelections(args && args.requestRefreshRowFilteredRow);
            if (currentRowSelection) {
                gridState.rowSelection = currentRowSelection;
            }
        }
        return gridState;
    };
    /**
     * Get the Columns (and their state: visibility/position) that are currently applied in the grid
     * @return current columns
     */
    GridStateService.prototype.getColumns = function () {
        return this._columns;
    };
    /**
     * From an array of Grid Column Definitions, get the associated Current Columns
     * @param gridColumns
     */
    GridStateService.prototype.getAssociatedCurrentColumns = function (gridColumns) {
        var currentColumns = [];
        if (gridColumns && Array.isArray(gridColumns)) {
            gridColumns.forEach(function (column, index) {
                if (column && column.id) {
                    currentColumns.push({
                        columnId: column.id,
                        cssClass: column.cssClass || '',
                        headerCssClass: column.headerCssClass || '',
                        width: column.width || 0
                    });
                }
            });
        }
        this._currentColumns = currentColumns;
        return currentColumns;
    };
    /**
     * From an array of Current Columns, get the associated Grid Column Definitions
     * @param grid
     * @param currentColumns
     */
    GridStateService.prototype.getAssociatedGridColumns = function (grid, currentColumns) {
        var columns = [];
        var gridColumns = grid.getColumns();
        if (currentColumns && Array.isArray(currentColumns)) {
            currentColumns.forEach(function (currentColumn, index) {
                var gridColumn = gridColumns.find(function (c) { return c.id === currentColumn.columnId; });
                if (gridColumn && gridColumn.id) {
                    columns.push(tslib_1.__assign({}, gridColumn, { cssClass: currentColumn.cssClass, headerCssClass: currentColumn.headerCssClass, width: currentColumn.width }));
                }
            });
        }
        this._columns = columns;
        return columns;
    };
    /**
     * Get the Columns (and their states: visibility/position/width) that are currently applied in the grid
     * @return current columns
     */
    GridStateService.prototype.getCurrentColumns = function () {
        var currentColumns = [];
        if (this._currentColumns && Array.isArray(this._currentColumns) && this._currentColumns.length > 0) {
            currentColumns = this._currentColumns;
        }
        else {
            currentColumns = this.getAssociatedCurrentColumns(this._grid.getColumns());
        }
        return currentColumns;
    };
    /**
     * Get the Filters (and their state, columnId, searchTerm(s)) that are currently applied in the grid
     * @return current filters
     */
    GridStateService.prototype.getCurrentFilters = function () {
        if (this._gridOptions && this._gridOptions.backendServiceApi) {
            var backendService = this._gridOptions.backendServiceApi.service;
            if (backendService && backendService.getCurrentFilters) {
                return backendService.getCurrentFilters();
            }
        }
        else if (this.filterService && this.filterService.getCurrentLocalFilters) {
            return this.filterService.getCurrentLocalFilters();
        }
        return null;
    };
    /**
     * Get current Pagination (and its state, pageNumber, pageSize) that are currently applied in the grid
     * @return current pagination state
     */
    GridStateService.prototype.getCurrentPagination = function () {
        if (this._gridOptions.enablePagination) {
            if (this._gridOptions && this._gridOptions.backendServiceApi) {
                var backendService = this._gridOptions.backendServiceApi.service;
                if (backendService && backendService.getCurrentPagination) {
                    return backendService.getCurrentPagination();
                }
            }
            else {
                return this.sharedService.currentPagination;
            }
        }
        return null;
    };
    /**
     * Get the current Row Selections (and its state, gridRowIndexes, dataContextIds, filteredDataContextIds) that are currently applied in the grid
     * @return current row selection
     */
    GridStateService.prototype.getCurrentRowSelections = function (requestRefreshFilteredRow) {
        if (requestRefreshFilteredRow === void 0) { requestRefreshFilteredRow = true; }
        if (this._grid && this._gridOptions && this._dataView && this.hasRowSelectionEnabled()) {
            if (this._grid.getSelectedRows && this._dataView.mapRowsToIds) {
                var filteredDataContextIds = [];
                var gridRowIndexes = this._dataView.mapIdsToRows(this._selectedRowDataContextIds || []); // note that this will return only what is visible in current page
                var dataContextIds = this._selectedRowDataContextIds;
                // user might request to refresh the filtered selection dataset
                // typically always True, except when "reEvaluateRowSelectionAfterFilterChange" is called and we don't need to refresh the filtered dataset twice
                if (requestRefreshFilteredRow === true) {
                    filteredDataContextIds = this.refreshFilteredRowSelections();
                }
                filteredDataContextIds = this._selectedFilteredRowDataContextIds;
                return { gridRowIndexes: gridRowIndexes, dataContextIds: dataContextIds, filteredDataContextIds: filteredDataContextIds };
            }
        }
        return null;
    };
    /**
     * Get the current Sorters (and their state, columnId, direction) that are currently applied in the grid
     * @return current sorters
     */
    GridStateService.prototype.getCurrentSorters = function () {
        if (this._gridOptions && this._gridOptions.backendServiceApi) {
            var backendService = this._gridOptions.backendServiceApi.service;
            if (backendService && backendService.getCurrentSorters) {
                return backendService.getCurrentSorters();
            }
        }
        else if (this.sortService && this.sortService.getCurrentLocalSorters) {
            return this.sortService.getCurrentLocalSorters();
        }
        return null;
    };
    /** Check whether the row selection needs to be preserved */
    GridStateService.prototype.needToPreserveRowSelection = function () {
        var preservedRowSelection = false;
        if (this._gridOptions && this._gridOptions.dataView && this._gridOptions.dataView.hasOwnProperty('syncGridSelection')) {
            var syncGridSelection = this._gridOptions.dataView.syncGridSelection;
            if (typeof syncGridSelection === 'boolean') {
                preservedRowSelection = this._gridOptions.dataView.syncGridSelection;
            }
            else {
                preservedRowSelection = syncGridSelection.preserveHidden;
            }
            // if the result is True but the grid is using a Backend Service, we will do an extra flag check the reason is because it might have some unintended behaviors
            // with the BackendServiceApi because technically the data in the page changes the DataView on every page.
            if (preservedRowSelection && this._gridOptions.backendServiceApi && this._gridOptions.dataView.hasOwnProperty('syncGridSelectionWithBackendService')) {
                preservedRowSelection = this._gridOptions.dataView.syncGridSelectionWithBackendService;
            }
        }
        return preservedRowSelection;
    };
    GridStateService.prototype.resetColumns = function (columnDefinitions) {
        var columns = columnDefinitions || this._columns;
        var currentColumns = this.getAssociatedCurrentColumns(columns);
        this.onGridStateChanged.next({ change: { newValues: currentColumns, type: GridStateType.columns }, gridState: this.getCurrentGridState() });
    };
    /** if we use Row Selection or the Checkbox Selector, we need to reset any selection */
    GridStateService.prototype.resetRowSelectionWhenRequired = function () {
        if (!this.needToPreserveRowSelection() && (this._gridOptions.enableRowSelection || this._gridOptions.enableCheckboxSelector)) {
            // this also requires the Row Selection Model to be registered as well
            var rowSelectionExtension = this.extensionService && this.extensionService.getExtensionByName && this.extensionService.getExtensionByName(ExtensionName.rowSelection);
            if (rowSelectionExtension && rowSelectionExtension.instance) {
                this._grid.setSelectedRows([]);
            }
        }
    };
    /**
     * Subscribe to all necessary SlickGrid or Service Events that deals with a Grid change,
     * when triggered, we will publish a Grid State Event with current Grid State
     */
    GridStateService.prototype.subscribeToAllGridChanges = function (grid) {
        var _this = this;
        // Subscribe to Event Emitter of Filter changed
        this._subscriptions.push(this.filterService.onFilterChanged.subscribe(function (currentFilters) {
            _this.resetRowSelectionWhenRequired();
            // trigger a Grid State filter change, however don't reevaluate the filtered row selections, we'll do that on the next Grid State change below
            _this.onGridStateChanged.next({ change: { newValues: currentFilters, type: GridStateType.filter }, gridState: _this.getCurrentGridState({ requestRefreshRowFilteredRow: !_this.hasRowSelectionEnabled() }) });
            // when Row Selection is enabled, we also need to re-evaluate the row selection with the leftover filtered dataset
            if (_this.hasRowSelectionEnabled()) {
                _this.reEvaluateRowSelectionAfterFilterChange();
            }
        }));
        // Subscribe to Event Emitter of Filter cleared
        this._subscriptions.push(this.filterService.onFilterCleared.subscribe(function () {
            _this.resetRowSelectionWhenRequired();
            _this.onGridStateChanged.next({ change: { newValues: [], type: GridStateType.filter }, gridState: _this.getCurrentGridState() });
        }));
        // Subscribe to Event Emitter of Sort changed
        this._subscriptions.push(this.sortService.onSortChanged.subscribe(function (currentSorters) {
            _this.resetRowSelectionWhenRequired();
            _this.onGridStateChanged.next({ change: { newValues: currentSorters, type: GridStateType.sorter }, gridState: _this.getCurrentGridState() });
        }));
        // Subscribe to Event Emitter of Sort cleared
        this._subscriptions.push(this.sortService.onSortCleared.subscribe(function () {
            _this.resetRowSelectionWhenRequired();
            _this.onGridStateChanged.next({ change: { newValues: [], type: GridStateType.sorter }, gridState: _this.getCurrentGridState() });
        }));
        // Subscribe to ColumnPicker and/or GridMenu for show/hide Columns visibility changes
        this.bindExtensionAddonEventToGridStateChange(ExtensionName.columnPicker, 'onColumnsChanged');
        this.bindExtensionAddonEventToGridStateChange(ExtensionName.gridMenu, 'onColumnsChanged');
        // subscribe to Column Resize & Reordering
        this.bindSlickGridColumnChangeEventToGridStateChange('onColumnsReordered', grid);
        this.bindSlickGridColumnChangeEventToGridStateChange('onColumnsResized', grid);
        // subscribe to Row Selection changes (when enabled)
        if (this._gridOptions.enableRowSelection || this._gridOptions.enableCheckboxSelector) {
            this.bindSlickGridRowSelectionToGridStateChange();
        }
        // subscribe to HeaderMenu (hide column)
        this._subscriptions.push(this.sharedService.onHeaderMenuHideColumns.subscribe(function (visibleColumns) {
            var currentColumns = _this.getAssociatedCurrentColumns(visibleColumns);
            _this.onGridStateChanged.next({ change: { newValues: currentColumns, type: GridStateType.columns }, gridState: _this.getCurrentGridState() });
        }));
    };
    // --
    // private methods
    // ------------------
    /**
     * Bind a SlickGrid Extension Event to a Grid State change event
     * @param extension name
     * @param grid
     */
    GridStateService.prototype.bindExtensionAddonEventToGridStateChange = function (extensionName, eventName) {
        var _this = this;
        var extension = this.extensionService && this.extensionService.getExtensionByName && this.extensionService.getExtensionByName(extensionName);
        var slickEvent = extension && extension.instance && extension.instance[eventName];
        if (slickEvent && slickEvent.subscribe) {
            this._eventHandler.subscribe(slickEvent, function (e, args) {
                var columns = args && args.columns;
                var currentColumns = _this.getAssociatedCurrentColumns(columns);
                _this.onGridStateChanged.next({ change: { newValues: currentColumns, type: GridStateType.columns }, gridState: _this.getCurrentGridState() });
            });
        }
    };
    /**
     * Bind a Grid Event (of Column changes) to a Grid State change event
     * @param event name
     * @param grid
     */
    GridStateService.prototype.bindSlickGridColumnChangeEventToGridStateChange = function (eventName, grid) {
        var _this = this;
        var slickGridEvent = grid && grid[eventName];
        if (slickGridEvent && slickGridEvent.subscribe) {
            this._eventHandler.subscribe(slickGridEvent, function () {
                var columns = grid.getColumns();
                var currentColumns = _this.getAssociatedCurrentColumns(columns);
                _this.onGridStateChanged.next({ change: { newValues: currentColumns, type: GridStateType.columns }, gridState: _this.getCurrentGridState() });
            });
        }
    };
    /**
     * Bind a Grid Event of Row Selection change to a Grid State change event
     * For the row selection, we can't just use the getSelectedRows() since this will only return the visible rows shown in the UI which is not enough.
     * The process is much more complex, what we have to do instead is the following
     * 1. when changing a row selection, we'll add the new selection if it's not yet in the global array of selected IDs
     * 2. when deleting a row selection, we'll remove the selection from our global array of selected IDs (unless it came from a page change)
     * 3. if we use Pagination and we change page, we'll keep track with a flag (this flag will be used to skip any deletion when we're changing page)
     * 4. after the Page or DataView is changed or updated, we'll do an extra (and delayed) check to make sure that what we have in our global array of selected IDs is displayed on screen
     */
    GridStateService.prototype.bindSlickGridRowSelectionToGridStateChange = function () {
        var _this = this;
        if (this._grid && this._gridOptions && this._dataView) {
            this._eventHandler.subscribe(this._dataView.onBeforePagingInfoChanged, function () {
                _this._wasRecheckedAfterPageChange = false; // reset the page check flag, to skip deletions on page change (used in code below)
            });
            this._eventHandler.subscribe(this._dataView.onPagingInfoChanged, function () {
                // when user changes page, the selected row indexes might not show up
                // we can check to make sure it is but it has to be in a delay so it happens after the first "onSelectedRowsChanged" is triggered
                setTimeout(function () {
                    var shouldBeSelectedRowIndexes = _this._dataView.mapIdsToRows(_this._selectedRowDataContextIds || []);
                    var currentSelectedRowIndexes = _this._grid.getSelectedRows();
                    if (!isequal(shouldBeSelectedRowIndexes, currentSelectedRowIndexes)) {
                        _this._grid.setSelectedRows(shouldBeSelectedRowIndexes);
                    }
                });
            });
            this._eventHandler.subscribe(this._grid.onSelectedRowsChanged, function (e, args) {
                if (Array.isArray(args.rows) && Array.isArray(args.previousSelectedRows)) {
                    var newSelectedRows_1 = args.rows;
                    var prevSelectedRows_1 = args.previousSelectedRows;
                    var newSelectedAdditions = newSelectedRows_1.filter(function (i) { return prevSelectedRows_1.indexOf(i) < 0; });
                    var newSelectedDeletions = prevSelectedRows_1.filter(function (i) { return newSelectedRows_1.indexOf(i) < 0; });
                    // deletion might happen when user is changing page, if that is the case then skip the deletion since it's only a visual deletion (current page)
                    // if it's not a page change (when the flag is true), then proceed with the deletion in our global array of selected IDs
                    if (_this._wasRecheckedAfterPageChange && newSelectedDeletions.length > 0) {
                        var toDeleteDataIds = _this._dataView.mapRowsToIds(newSelectedDeletions) || [];
                        toDeleteDataIds.forEach(function (removeId) {
                            _this._selectedRowDataContextIds.splice(_this._selectedRowDataContextIds.indexOf(removeId), 1);
                        });
                    }
                    // if we have newly added selected row(s), let's update our global array of selected IDs
                    if (newSelectedAdditions.length > 0) {
                        var toAddDataIds = _this._dataView.mapRowsToIds(newSelectedAdditions) || [];
                        toAddDataIds.forEach(function (dataId) {
                            if (_this._selectedRowDataContextIds.indexOf(dataId) === -1) {
                                _this._selectedRowDataContextIds.push(dataId);
                            }
                        });
                    }
                    // we set this flag which will be used on the 2nd time the "onSelectedRowsChanged" event is called
                    // when it's the first time, we skip deletion and this is what this flag is for
                    _this._wasRecheckedAfterPageChange = true;
                    // form our full selected row IDs, let's make sure these indexes are selected in the grid, if not then let's call a reselect
                    // this could happen if the previous step was a page change
                    var shouldBeSelectedRowIndexes = _this._dataView.mapIdsToRows(_this._selectedRowDataContextIds || []);
                    var currentSelectedRowIndexes = _this._grid.getSelectedRows();
                    if (!isequal(shouldBeSelectedRowIndexes, currentSelectedRowIndexes)) {
                        _this._grid.setSelectedRows(shouldBeSelectedRowIndexes);
                    }
                    var filteredDataContextIds = _this.refreshFilteredRowSelections();
                    var newValues = { gridRowIndexes: _this._grid.getSelectedRows(), dataContextIds: _this._selectedRowDataContextIds, filteredDataContextIds: filteredDataContextIds };
                    _this.onGridStateChanged.next({ change: { newValues: newValues, type: GridStateType.rowSelection }, gridState: _this.getCurrentGridState() });
                }
            });
        }
    };
    /** Check wether the grid has the Row Selection enabled */
    GridStateService.prototype.hasRowSelectionEnabled = function () {
        var selectionModel = this._grid.getSelectionModel();
        var isRowSelectionEnabled = this._gridOptions.enableRowSelection || this._gridOptions.enableCheckboxSelector;
        return (isRowSelectionEnabled && selectionModel);
    };
    GridStateService.prototype.reEvaluateRowSelectionAfterFilterChange = function () {
        var currentSelectedRowIndexes = this._grid.getSelectedRows();
        var previousSelectedFilteredRowDataContextIds = this._selectedFilteredRowDataContextIds.slice();
        var filteredDataContextIds = this.refreshFilteredRowSelections();
        // when selection changed, we'll send a Grid State event with the selection changes
        if (!isequal(this._selectedFilteredRowDataContextIds, previousSelectedFilteredRowDataContextIds)) {
            var newValues = { gridRowIndexes: currentSelectedRowIndexes, dataContextIds: this._selectedRowDataContextIds, filteredDataContextIds: filteredDataContextIds };
            this.onGridStateChanged.next({ change: { newValues: newValues, type: GridStateType.rowSelection }, gridState: this.getCurrentGridState({ requestRefreshRowFilteredRow: false }) });
        }
    };
    /** When a Filter is triggered or when user request it, we will refresh the filtered selection array and return it */
    GridStateService.prototype.refreshFilteredRowSelections = function () {
        var _this = this;
        var tmpFilteredArray = [];
        var filteredDataset = this._dataView.getFilteredItems() || [];
        if (Array.isArray(this._selectedRowDataContextIds)) {
            var selectedFilteredRowDataContextIds = tslib_1.__spread(this._selectedRowDataContextIds); // take a fresh copy of all selections before filtering the row ids
            tmpFilteredArray = selectedFilteredRowDataContextIds.filter(function (selectedRowId) {
                return filteredDataset.findIndex(function (item) { return item[_this.datasetIdPropName] === selectedRowId; }) > -1;
            });
            this._selectedFilteredRowDataContextIds = tmpFilteredArray;
        }
        return tmpFilteredArray;
    };
    GridStateService.ctorParameters = function () { return [
        { type: ExtensionService },
        { type: FilterService },
        { type: SharedService },
        { type: SortService }
    ]; };
GridStateService.Éµfac = function GridStateService_Factory(t) { return new (t || GridStateService)(Éµngcc0.ÉµÉµinject(ExtensionService), Éµngcc0.ÉµÉµinject(FilterService), Éµngcc0.ÉµÉµinject(SharedService), Éµngcc0.ÉµÉµinject(SortService)); };
GridStateService.Éµprov = Éµngcc0.ÉµÉµdefineInjectable({ token: GridStateService, factory: function (t) { return GridStateService.Éµfac(t); } });
/*@__PURE__*/ (function () { Éµngcc0.ÉµsetClassMetadata(GridStateService, [{
        type: Injectable
    }], function () { return [{ type: ExtensionService }, { type: FilterService }, { type: SharedService }, { type: SortService }]; }, null); })();
    return GridStateService;
}());
export { GridStateService };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ3JpZFN0YXRlLnNlcnZpY2UuanMiLCJzb3VyY2VzIjpbIm5nOi9hbmd1bGFyLXNsaWNrZ3JpZC9hcHAvbW9kdWxlcy9hbmd1bGFyLXNsaWNrZ3JpZC9zZXJ2aWNlcy9ncmlkU3RhdGUuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxLQUFLLFFBQVEsTUFBTSxnQkFBZ0IsQ0FBQzs7QUFDM0MsSUFBTSxPQUFPLEdBQUcsUUFBUSxDQUFDLENBQUMsOEJBQThCO0FBRXhELE9BQU8sRUFPTCxhQUFhLEVBSWIsYUFBYSxHQUVkLE1BQU0sbUJBQW1CLENBQUM7QUFDM0IsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDdkQsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBQ2pELE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUM3QyxPQUFPLEVBQUUsT0FBTyxFQUFnQixNQUFNLE1BQU0sQ0FBQztBQUM3QyxPQUFPLEVBQUUseUJBQXlCLEVBQUUsTUFBTSxhQUFhLENBQUM7QUFDeEQsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBQ2pELE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFNM0M7QUFDb0IsSUFXbEIsMEJBQ1UsZ0JBQWtDLEVBQ2xDLGFBQTRCLEVBQzVCLGFBQTRCLEVBQzVCLFdBQXdCO0FBQ2pDLFFBSlMscUJBQWdCLEdBQWhCLGdCQUFnQixDQUFrQjtBQUFDLFFBQ25DLGtCQUFhLEdBQWIsYUFBYSxDQUFlO0FBQUMsUUFDN0Isa0JBQWEsR0FBYixhQUFhLENBQWU7QUFBQyxRQUM3QixnQkFBVyxHQUFYLFdBQVcsQ0FBYTtBQUNwQyxRQWZVLGFBQVEsR0FBYSxFQUFFLENBQUM7QUFDbEMsUUFBVSxvQkFBZSxHQUFvQixFQUFFLENBQUM7QUFDaEQsUUFFVSxtQkFBYyxHQUFtQixFQUFFLENBQUM7QUFDOUMs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LEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFPQSxBQUFBLEFBSUEsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQU1BLEFBWUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBSEEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQWRBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBR0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBUUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFHQSxBQUFBLEFBQUEsQUFEQSxBQUFBLEFBQ0EsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBR0EsQUFBQSxBQUFBLEFBREEsQUFBQSxBQUNBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFSQSxBQVVBLEFBR0EsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBR0EsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBR0EsQUFDQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBRUEsQUFHQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBSUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBR0EsQUFDQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFFQSxBQUdBLEFBQ0EsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBRUEsQUFHQSxBQUNBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBR0EsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBRUEsQUFHQSxBQUNBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQ0EsQUFDQSxBQUFBLEFBRUEsQUFHQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQTREQSxBQTNEQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBRUEsQUFJQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFXQSxBQVZBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQ0EsQUFBQSxBQUVBLEFBSUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBVUEsQUFUQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUFBLEFBRUEsQUFRQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBK0RBLEFBOURBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQ0EsQUFBQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUFBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBV0EsQUFWQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUF0ZEEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQWhCQSxBQUFBLEFBREEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQW9lQSxBQUFBLEFBQUEsQUFBQSxBQXBlQSxBQW9lQSxBQXBlQSxBQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgaXNlcXVhbF8gZnJvbSAnbG9kYXNoLmlzZXF1YWwnO1xyXG5jb25zdCBpc2VxdWFsID0gaXNlcXVhbF87IC8vIHBhdGNoIHRvIGZpeCByb2xsdXAgdG8gd29ya1xyXG5cclxuaW1wb3J0IHtcclxuICBDb2x1bW4sXHJcbiAgQ3VycmVudENvbHVtbixcclxuICBDdXJyZW50RmlsdGVyLFxyXG4gIEN1cnJlbnRQYWdpbmF0aW9uLFxyXG4gIEN1cnJlbnRSb3dTZWxlY3Rpb24sXHJcbiAgQ3VycmVudFNvcnRlcixcclxuICBFeHRlbnNpb25OYW1lLFxyXG4gIEdyaWRPcHRpb24sXHJcbiAgR3JpZFN0YXRlLFxyXG4gIEdyaWRTdGF0ZUNoYW5nZSxcclxuICBHcmlkU3RhdGVUeXBlLFxyXG4gIFNsaWNrRXZlbnRIYW5kbGVyLFxyXG59IGZyb20gJy4vLi4vbW9kZWxzL2luZGV4JztcclxuaW1wb3J0IHsgRXh0ZW5zaW9uU2VydmljZSB9IGZyb20gJy4vZXh0ZW5zaW9uLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBGaWx0ZXJTZXJ2aWNlIH0gZnJvbSAnLi9maWx0ZXIuc2VydmljZSc7XHJcbmltcG9ydCB7IFNvcnRTZXJ2aWNlIH0gZnJvbSAnLi9zb3J0LnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBTdWJqZWN0LCBTdWJzY3JpcHRpb24gfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHsgdW5zdWJzY3JpYmVBbGxPYnNlcnZhYmxlcyB9IGZyb20gJy4vdXRpbGl0aWVzJztcclxuaW1wb3J0IHsgU2hhcmVkU2VydmljZSB9IGZyb20gJy4vc2hhcmVkLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcblxyXG4vLyB1c2luZyBleHRlcm5hbCBub24tdHlwZWQganMgbGlicmFyaWVzXHJcbmRlY2xhcmUgY29uc3QgU2xpY2s6IGFueTtcclxuXHJcbkBJbmplY3RhYmxlKClcclxuZXhwb3J0IGNsYXNzIEdyaWRTdGF0ZVNlcnZpY2Uge1xyXG4gIHByaXZhdGUgX2V2ZW50SGFuZGxlcjogU2xpY2tFdmVudEhhbmRsZXI7XHJcbiAgcHJpdmF0ZSBfY29sdW1uczogQ29sdW1uW10gPSBbXTtcclxuICBwcml2YXRlIF9jdXJyZW50Q29sdW1uczogQ3VycmVudENvbHVtbltdID0gW107XHJcbiAgcHJpdmF0ZSBfZGF0YVZpZXc6IGFueTtcclxuICBwcml2YXRlIF9ncmlkOiBhbnk7XHJcbiAgcHJpdmF0ZSBfc3Vic2NyaXB0aW9uczogU3Vic2NyaXB0aW9uW10gPSBbXTtcclxuICBwcml2YXRlIF9zZWxlY3RlZFJvd0RhdGFDb250ZXh0SWRzOiBBcnJheTxudW1iZXIgfCBzdHJpbmc+IHwgdW5kZWZpbmVkID0gW107IC8vIHVzZWQgd2l0aCByb3cgc2VsZWN0aW9uXHJcbiAgcHJpdmF0ZSBfc2VsZWN0ZWRGaWx0ZXJlZFJvd0RhdGFDb250ZXh0SWRzOiBBcnJheTxudW1iZXIgfCBzdHJpbmc+IHwgdW5kZWZpbmVkID0gW107IC8vIHVzZWQgd2l0aCByb3cgc2VsZWN0aW9uXHJcbiAgcHJpdmF0ZSBfd2FzUmVjaGVja2VkQWZ0ZXJQYWdlQ2hhbmdlID0gdHJ1ZTsgLy8gdXNlZCB3aXRoIHJvdyBzZWxlY3Rpb24gJiBwYWdpbmF0aW9uXHJcbiAgb25HcmlkU3RhdGVDaGFuZ2VkID0gbmV3IFN1YmplY3Q8R3JpZFN0YXRlQ2hhbmdlPigpO1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHByaXZhdGUgZXh0ZW5zaW9uU2VydmljZTogRXh0ZW5zaW9uU2VydmljZSxcclxuICAgIHByaXZhdGUgZmlsdGVyU2VydmljZTogRmlsdGVyU2VydmljZSxcclxuICAgIHByaXZhdGUgc2hhcmVkU2VydmljZTogU2hhcmVkU2VydmljZSxcclxuICAgIHByaXZhdGUgc29ydFNlcnZpY2U6IFNvcnRTZXJ2aWNlXHJcbiAgKSB7XHJcbiAgICB0aGlzLl9ldmVudEhhbmRsZXIgPSBuZXcgU2xpY2suRXZlbnRIYW5kbGVyKCk7XHJcbiAgfVxyXG5cclxuICAvKiogR2V0dGVyIGZvciB0aGUgR3JpZCBPcHRpb25zIHB1bGxlZCB0aHJvdWdoIHRoZSBHcmlkIE9iamVjdCAqL1xyXG4gIHByaXZhdGUgZ2V0IF9ncmlkT3B0aW9ucygpOiBHcmlkT3B0aW9uIHtcclxuICAgIHJldHVybiAodGhpcy5fZ3JpZCAmJiB0aGlzLl9ncmlkLmdldE9wdGlvbnMpID8gdGhpcy5fZ3JpZC5nZXRPcHRpb25zKCkgOiB7fTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0IGRhdGFzZXRJZFByb3BOYW1lKCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gdGhpcy5fZ3JpZE9wdGlvbnMuZGF0YXNldElkUHJvcGVydHlOYW1lIHx8ICdpZCc7XHJcbiAgfVxyXG5cclxuICAvKiogR2V0dGVyIG9mIHRoZSBzZWxlY3RlZCBkYXRhIGNvbnRleHQgb2JqZWN0IElEcyAqL1xyXG4gIGdldCBzZWxlY3RlZFJvd0RhdGFDb250ZXh0SWRzKCk6IEFycmF5PG51bWJlciB8IHN0cmluZz4gfCB1bmRlZmluZWQge1xyXG4gICAgcmV0dXJuIHRoaXMuX3NlbGVjdGVkUm93RGF0YUNvbnRleHRJZHM7XHJcbiAgfVxyXG5cclxuICAvKiogU2V0dGVyIG9mIHRoZSBzZWxlY3RlZCBkYXRhIGNvbnRleHQgb2JqZWN0IElEcyAqL1xyXG4gIHNldCBzZWxlY3RlZFJvd0RhdGFDb250ZXh0SWRzKGRhdGFDb250ZXh0SWRzOiBBcnJheTxudW1iZXIgfCBzdHJpbmc+IHwgdW5kZWZpbmVkKSB7XHJcbiAgICB0aGlzLl9zZWxlY3RlZFJvd0RhdGFDb250ZXh0SWRzID0gZGF0YUNvbnRleHRJZHM7XHJcblxyXG4gICAgLy8gc2luY2UgdGhpcyBpcyBjb21pbmcgZnJvbSBhIHByZXNldCwgd2UgYWxzbyBuZWVkIHRvIHVwZGF0ZSB0aGUgZmlsdGVyZWQgSURzXHJcbiAgICB0aGlzLl9zZWxlY3RlZEZpbHRlcmVkUm93RGF0YUNvbnRleHRJZHMgPSBkYXRhQ29udGV4dElkcztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEluaXRpYWxpemUgdGhlIEdyaWQgU3RhdGUgU2VydmljZVxyXG4gICAqIEBwYXJhbSBncmlkXHJcbiAgICovXHJcbiAgaW5pdChncmlkOiBhbnksIGRhdGFWaWV3OiBhbnkpOiB2b2lkIHtcclxuICAgIHRoaXMuX2dyaWQgPSBncmlkO1xyXG4gICAgdGhpcy5fZGF0YVZpZXcgPSBkYXRhVmlldztcclxuICAgIHRoaXMuc3Vic2NyaWJlVG9BbGxHcmlkQ2hhbmdlcyhncmlkKTtcclxuICB9XHJcblxyXG4gIC8qKiBEaXNwb3NlIG9mIGFsbCB0aGUgU2xpY2tHcmlkICYgQW5ndWxhciBzdWJzY3JpcHRpb25zICovXHJcbiAgZGlzcG9zZSgpIHtcclxuICAgIC8vIHVuc3Vic2NyaWJlIGFsbCBTbGlja0dyaWQgZXZlbnRzXHJcbiAgICB0aGlzLl9ldmVudEhhbmRsZXIudW5zdWJzY3JpYmVBbGwoKTtcclxuXHJcbiAgICAvLyBhbHNvIHVuc3Vic2NyaWJlIGFsbCBBbmd1bGFyIFN1YnNjcmlwdGlvbnNcclxuICAgIHRoaXMuX3N1YnNjcmlwdGlvbnMgPSB1bnN1YnNjcmliZUFsbE9ic2VydmFibGVzKHRoaXMuX3N1YnNjcmlwdGlvbnMpO1xyXG5cclxuICAgIHRoaXMuX2N1cnJlbnRDb2x1bW5zID0gW107XHJcbiAgICB0aGlzLl9jb2x1bW5zID0gW107XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXQgdGhlIGN1cnJlbnQgZ3JpZCBzdGF0ZSAoZmlsdGVycy9zb3J0ZXJzL3BhZ2luYXRpb24pXHJcbiAgICogQHJldHVybiBncmlkIHN0YXRlXHJcbiAgICovXHJcbiAgZ2V0Q3VycmVudEdyaWRTdGF0ZShhcmdzPzogeyByZXF1ZXN0UmVmcmVzaFJvd0ZpbHRlcmVkUm93PzogYm9vbGVhbiB9KTogR3JpZFN0YXRlIHtcclxuICAgIGNvbnN0IGdyaWRTdGF0ZTogR3JpZFN0YXRlID0ge1xyXG4gICAgICBjb2x1bW5zOiB0aGlzLmdldEN1cnJlbnRDb2x1bW5zKCksXHJcbiAgICAgIGZpbHRlcnM6IHRoaXMuZ2V0Q3VycmVudEZpbHRlcnMoKSxcclxuICAgICAgc29ydGVyczogdGhpcy5nZXRDdXJyZW50U29ydGVycygpLFxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBjdXJyZW50UGFnaW5hdGlvbiA9IHRoaXMuZ2V0Q3VycmVudFBhZ2luYXRpb24oKTtcclxuICAgIGlmIChjdXJyZW50UGFnaW5hdGlvbikge1xyXG4gICAgICBncmlkU3RhdGUucGFnaW5hdGlvbiA9IGN1cnJlbnRQYWdpbmF0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLmhhc1Jvd1NlbGVjdGlvbkVuYWJsZWQoKSkge1xyXG4gICAgICBjb25zdCBjdXJyZW50Um93U2VsZWN0aW9uID0gdGhpcy5nZXRDdXJyZW50Um93U2VsZWN0aW9ucyhhcmdzICYmIGFyZ3MucmVxdWVzdFJlZnJlc2hSb3dGaWx0ZXJlZFJvdyk7XHJcbiAgICAgIGlmIChjdXJyZW50Um93U2VsZWN0aW9uKSB7XHJcbiAgICAgICAgZ3JpZFN0YXRlLnJvd1NlbGVjdGlvbiA9IGN1cnJlbnRSb3dTZWxlY3Rpb247XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBncmlkU3RhdGU7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXQgdGhlIENvbHVtbnMgKGFuZCB0aGVpciBzdGF0ZTogdmlzaWJpbGl0eS9wb3NpdGlvbikgdGhhdCBhcmUgY3VycmVudGx5IGFwcGxpZWQgaW4gdGhlIGdyaWRcclxuICAgKiBAcmV0dXJuIGN1cnJlbnQgY29sdW1uc1xyXG4gICAqL1xyXG4gIGdldENvbHVtbnMoKTogQ29sdW1uW10ge1xyXG4gICAgcmV0dXJuIHRoaXMuX2NvbHVtbnM7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBGcm9tIGFuIGFycmF5IG9mIEdyaWQgQ29sdW1uIERlZmluaXRpb25zLCBnZXQgdGhlIGFzc29jaWF0ZWQgQ3VycmVudCBDb2x1bW5zXHJcbiAgICogQHBhcmFtIGdyaWRDb2x1bW5zXHJcbiAgICovXHJcbiAgZ2V0QXNzb2NpYXRlZEN1cnJlbnRDb2x1bW5zKGdyaWRDb2x1bW5zOiBDb2x1bW5bXSk6IEN1cnJlbnRDb2x1bW5bXSB7XHJcbiAgICBjb25zdCBjdXJyZW50Q29sdW1uczogQ3VycmVudENvbHVtbltdID0gW107XHJcblxyXG4gICAgaWYgKGdyaWRDb2x1bW5zICYmIEFycmF5LmlzQXJyYXkoZ3JpZENvbHVtbnMpKSB7XHJcbiAgICAgIGdyaWRDb2x1bW5zLmZvckVhY2goKGNvbHVtbjogQ29sdW1uLCBpbmRleDogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgaWYgKGNvbHVtbiAmJiBjb2x1bW4uaWQpIHtcclxuICAgICAgICAgIGN1cnJlbnRDb2x1bW5zLnB1c2goe1xyXG4gICAgICAgICAgICBjb2x1bW5JZDogY29sdW1uLmlkIGFzIHN0cmluZyxcclxuICAgICAgICAgICAgY3NzQ2xhc3M6IGNvbHVtbi5jc3NDbGFzcyB8fCAnJyxcclxuICAgICAgICAgICAgaGVhZGVyQ3NzQ2xhc3M6IGNvbHVtbi5oZWFkZXJDc3NDbGFzcyB8fCAnJyxcclxuICAgICAgICAgICAgd2lkdGg6IGNvbHVtbi53aWR0aCB8fCAwXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgdGhpcy5fY3VycmVudENvbHVtbnMgPSBjdXJyZW50Q29sdW1ucztcclxuICAgIHJldHVybiBjdXJyZW50Q29sdW1ucztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEZyb20gYW4gYXJyYXkgb2YgQ3VycmVudCBDb2x1bW5zLCBnZXQgdGhlIGFzc29jaWF0ZWQgR3JpZCBDb2x1bW4gRGVmaW5pdGlvbnNcclxuICAgKiBAcGFyYW0gZ3JpZFxyXG4gICAqIEBwYXJhbSBjdXJyZW50Q29sdW1uc1xyXG4gICAqL1xyXG4gIGdldEFzc29jaWF0ZWRHcmlkQ29sdW1ucyhncmlkOiBhbnksIGN1cnJlbnRDb2x1bW5zOiBDdXJyZW50Q29sdW1uW10pOiBDb2x1bW5bXSB7XHJcbiAgICBjb25zdCBjb2x1bW5zOiBDb2x1bW5bXSA9IFtdO1xyXG4gICAgY29uc3QgZ3JpZENvbHVtbnM6IENvbHVtbltdID0gZ3JpZC5nZXRDb2x1bW5zKCk7XHJcblxyXG4gICAgaWYgKGN1cnJlbnRDb2x1bW5zICYmIEFycmF5LmlzQXJyYXkoY3VycmVudENvbHVtbnMpKSB7XHJcbiAgICAgIGN1cnJlbnRDb2x1bW5zLmZvckVhY2goKGN1cnJlbnRDb2x1bW46IEN1cnJlbnRDb2x1bW4sIGluZGV4OiBudW1iZXIpID0+IHtcclxuICAgICAgICBjb25zdCBncmlkQ29sdW1uOiBDb2x1bW4gPSBncmlkQ29sdW1ucy5maW5kKChjOiBDb2x1bW4pID0+IGMuaWQgPT09IGN1cnJlbnRDb2x1bW4uY29sdW1uSWQpO1xyXG4gICAgICAgIGlmIChncmlkQ29sdW1uICYmIGdyaWRDb2x1bW4uaWQpIHtcclxuICAgICAgICAgIGNvbHVtbnMucHVzaCh7XHJcbiAgICAgICAgICAgIC4uLmdyaWRDb2x1bW4sXHJcbiAgICAgICAgICAgIGNzc0NsYXNzOiBjdXJyZW50Q29sdW1uLmNzc0NsYXNzLFxyXG4gICAgICAgICAgICBoZWFkZXJDc3NDbGFzczogY3VycmVudENvbHVtbi5oZWFkZXJDc3NDbGFzcyxcclxuICAgICAgICAgICAgd2lkdGg6IGN1cnJlbnRDb2x1bW4ud2lkdGhcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLl9jb2x1bW5zID0gY29sdW1ucztcclxuICAgIHJldHVybiBjb2x1bW5zO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IHRoZSBDb2x1bW5zIChhbmQgdGhlaXIgc3RhdGVzOiB2aXNpYmlsaXR5L3Bvc2l0aW9uL3dpZHRoKSB0aGF0IGFyZSBjdXJyZW50bHkgYXBwbGllZCBpbiB0aGUgZ3JpZFxyXG4gICAqIEByZXR1cm4gY3VycmVudCBjb2x1bW5zXHJcbiAgICovXHJcbiAgZ2V0Q3VycmVudENvbHVtbnMoKTogQ3VycmVudENvbHVtbltdIHtcclxuICAgIGxldCBjdXJyZW50Q29sdW1uczogQ3VycmVudENvbHVtbltdID0gW107XHJcbiAgICBpZiAodGhpcy5fY3VycmVudENvbHVtbnMgJiYgQXJyYXkuaXNBcnJheSh0aGlzLl9jdXJyZW50Q29sdW1ucykgJiYgdGhpcy5fY3VycmVudENvbHVtbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICBjdXJyZW50Q29sdW1ucyA9IHRoaXMuX2N1cnJlbnRDb2x1bW5zO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY3VycmVudENvbHVtbnMgPSB0aGlzLmdldEFzc29jaWF0ZWRDdXJyZW50Q29sdW1ucyh0aGlzLl9ncmlkLmdldENvbHVtbnMoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGN1cnJlbnRDb2x1bW5zO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IHRoZSBGaWx0ZXJzIChhbmQgdGhlaXIgc3RhdGUsIGNvbHVtbklkLCBzZWFyY2hUZXJtKHMpKSB0aGF0IGFyZSBjdXJyZW50bHkgYXBwbGllZCBpbiB0aGUgZ3JpZFxyXG4gICAqIEByZXR1cm4gY3VycmVudCBmaWx0ZXJzXHJcbiAgICovXHJcbiAgZ2V0Q3VycmVudEZpbHRlcnMoKTogQ3VycmVudEZpbHRlcltdIHwgbnVsbCB7XHJcbiAgICBpZiAodGhpcy5fZ3JpZE9wdGlvbnMgJiYgdGhpcy5fZ3JpZE9wdGlvbnMuYmFja2VuZFNlcnZpY2VBcGkpIHtcclxuICAgICAgY29uc3QgYmFja2VuZFNlcnZpY2UgPSB0aGlzLl9ncmlkT3B0aW9ucy5iYWNrZW5kU2VydmljZUFwaS5zZXJ2aWNlO1xyXG4gICAgICBpZiAoYmFja2VuZFNlcnZpY2UgJiYgYmFja2VuZFNlcnZpY2UuZ2V0Q3VycmVudEZpbHRlcnMpIHtcclxuICAgICAgICByZXR1cm4gYmFja2VuZFNlcnZpY2UuZ2V0Q3VycmVudEZpbHRlcnMoKSBhcyBDdXJyZW50RmlsdGVyW107XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAodGhpcy5maWx0ZXJTZXJ2aWNlICYmIHRoaXMuZmlsdGVyU2VydmljZS5nZXRDdXJyZW50TG9jYWxGaWx0ZXJzKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmZpbHRlclNlcnZpY2UuZ2V0Q3VycmVudExvY2FsRmlsdGVycygpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXQgY3VycmVudCBQYWdpbmF0aW9uIChhbmQgaXRzIHN0YXRlLCBwYWdlTnVtYmVyLCBwYWdlU2l6ZSkgdGhhdCBhcmUgY3VycmVudGx5IGFwcGxpZWQgaW4gdGhlIGdyaWRcclxuICAgKiBAcmV0dXJuIGN1cnJlbnQgcGFnaW5hdGlvbiBzdGF0ZVxyXG4gICAqL1xyXG4gIGdldEN1cnJlbnRQYWdpbmF0aW9uKCk6IEN1cnJlbnRQYWdpbmF0aW9uIHwgbnVsbCB7XHJcbiAgICBpZiAodGhpcy5fZ3JpZE9wdGlvbnMuZW5hYmxlUGFnaW5hdGlvbikge1xyXG4gICAgICBpZiAodGhpcy5fZ3JpZE9wdGlvbnMgJiYgdGhpcy5fZ3JpZE9wdGlvbnMuYmFja2VuZFNlcnZpY2VBcGkpIHtcclxuICAgICAgICBjb25zdCBiYWNrZW5kU2VydmljZSA9IHRoaXMuX2dyaWRPcHRpb25zLmJhY2tlbmRTZXJ2aWNlQXBpLnNlcnZpY2U7XHJcbiAgICAgICAgaWYgKGJhY2tlbmRTZXJ2aWNlICYmIGJhY2tlbmRTZXJ2aWNlLmdldEN1cnJlbnRQYWdpbmF0aW9uKSB7XHJcbiAgICAgICAgICByZXR1cm4gYmFja2VuZFNlcnZpY2UuZ2V0Q3VycmVudFBhZ2luYXRpb24oKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2hhcmVkU2VydmljZS5jdXJyZW50UGFnaW5hdGlvbjtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXQgdGhlIGN1cnJlbnQgUm93IFNlbGVjdGlvbnMgKGFuZCBpdHMgc3RhdGUsIGdyaWRSb3dJbmRleGVzLCBkYXRhQ29udGV4dElkcywgZmlsdGVyZWREYXRhQ29udGV4dElkcykgdGhhdCBhcmUgY3VycmVudGx5IGFwcGxpZWQgaW4gdGhlIGdyaWRcclxuICAgKiBAcmV0dXJuIGN1cnJlbnQgcm93IHNlbGVjdGlvblxyXG4gICAqL1xyXG4gIGdldEN1cnJlbnRSb3dTZWxlY3Rpb25zKHJlcXVlc3RSZWZyZXNoRmlsdGVyZWRSb3cgPSB0cnVlKTogQ3VycmVudFJvd1NlbGVjdGlvbiB8IG51bGwge1xyXG4gICAgaWYgKHRoaXMuX2dyaWQgJiYgdGhpcy5fZ3JpZE9wdGlvbnMgJiYgdGhpcy5fZGF0YVZpZXcgJiYgdGhpcy5oYXNSb3dTZWxlY3Rpb25FbmFibGVkKCkpIHtcclxuICAgICAgaWYgKHRoaXMuX2dyaWQuZ2V0U2VsZWN0ZWRSb3dzICYmIHRoaXMuX2RhdGFWaWV3Lm1hcFJvd3NUb0lkcykge1xyXG4gICAgICAgIGxldCBmaWx0ZXJlZERhdGFDb250ZXh0SWRzOiBBcnJheTxudW1iZXIgfCBzdHJpbmc+IHwgdW5kZWZpbmVkID0gW107XHJcbiAgICAgICAgY29uc3QgZ3JpZFJvd0luZGV4ZXM6IG51bWJlcltdID0gdGhpcy5fZGF0YVZpZXcubWFwSWRzVG9Sb3dzKHRoaXMuX3NlbGVjdGVkUm93RGF0YUNvbnRleHRJZHMgfHwgW10pOyAvLyBub3RlIHRoYXQgdGhpcyB3aWxsIHJldHVybiBvbmx5IHdoYXQgaXMgdmlzaWJsZSBpbiBjdXJyZW50IHBhZ2VcclxuICAgICAgICBjb25zdCBkYXRhQ29udGV4dElkczogQXJyYXk8bnVtYmVyIHwgc3RyaW5nPiB8IHVuZGVmaW5lZCA9IHRoaXMuX3NlbGVjdGVkUm93RGF0YUNvbnRleHRJZHM7XHJcblxyXG4gICAgICAgIC8vIHVzZXIgbWlnaHQgcmVxdWVzdCB0byByZWZyZXNoIHRoZSBmaWx0ZXJlZCBzZWxlY3Rpb24gZGF0YXNldFxyXG4gICAgICAgIC8vIHR5cGljYWxseSBhbHdheXMgVHJ1ZSwgZXhjZXB0IHdoZW4gXCJyZUV2YWx1YXRlUm93U2VsZWN0aW9uQWZ0ZXJGaWx0ZXJDaGFuZ2VcIiBpcyBjYWxsZWQgYW5kIHdlIGRvbid0IG5lZWQgdG8gcmVmcmVzaCB0aGUgZmlsdGVyZWQgZGF0YXNldCB0d2ljZVxyXG4gICAgICAgIGlmIChyZXF1ZXN0UmVmcmVzaEZpbHRlcmVkUm93ID09PSB0cnVlKSB7XHJcbiAgICAgICAgICBmaWx0ZXJlZERhdGFDb250ZXh0SWRzID0gdGhpcy5yZWZyZXNoRmlsdGVyZWRSb3dTZWxlY3Rpb25zKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbHRlcmVkRGF0YUNvbnRleHRJZHMgPSB0aGlzLl9zZWxlY3RlZEZpbHRlcmVkUm93RGF0YUNvbnRleHRJZHM7XHJcblxyXG4gICAgICAgIHJldHVybiB7IGdyaWRSb3dJbmRleGVzLCBkYXRhQ29udGV4dElkcywgZmlsdGVyZWREYXRhQ29udGV4dElkcyB9O1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCB0aGUgY3VycmVudCBTb3J0ZXJzIChhbmQgdGhlaXIgc3RhdGUsIGNvbHVtbklkLCBkaXJlY3Rpb24pIHRoYXQgYXJlIGN1cnJlbnRseSBhcHBsaWVkIGluIHRoZSBncmlkXHJcbiAgICogQHJldHVybiBjdXJyZW50IHNvcnRlcnNcclxuICAgKi9cclxuICBnZXRDdXJyZW50U29ydGVycygpOiBDdXJyZW50U29ydGVyW10gfCBudWxsIHtcclxuICAgIGlmICh0aGlzLl9ncmlkT3B0aW9ucyAmJiB0aGlzLl9ncmlkT3B0aW9ucy5iYWNrZW5kU2VydmljZUFwaSkge1xyXG4gICAgICBjb25zdCBiYWNrZW5kU2VydmljZSA9IHRoaXMuX2dyaWRPcHRpb25zLmJhY2tlbmRTZXJ2aWNlQXBpLnNlcnZpY2U7XHJcbiAgICAgIGlmIChiYWNrZW5kU2VydmljZSAmJiBiYWNrZW5kU2VydmljZS5nZXRDdXJyZW50U29ydGVycykge1xyXG4gICAgICAgIHJldHVybiBiYWNrZW5kU2VydmljZS5nZXRDdXJyZW50U29ydGVycygpIGFzIEN1cnJlbnRTb3J0ZXJbXTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmICh0aGlzLnNvcnRTZXJ2aWNlICYmIHRoaXMuc29ydFNlcnZpY2UuZ2V0Q3VycmVudExvY2FsU29ydGVycykge1xyXG4gICAgICByZXR1cm4gdGhpcy5zb3J0U2VydmljZS5nZXRDdXJyZW50TG9jYWxTb3J0ZXJzKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcblxyXG4gIC8qKiBDaGVjayB3aGV0aGVyIHRoZSByb3cgc2VsZWN0aW9uIG5lZWRzIHRvIGJlIHByZXNlcnZlZCAqL1xyXG4gIG5lZWRUb1ByZXNlcnZlUm93U2VsZWN0aW9uKCk6IGJvb2xlYW4ge1xyXG4gICAgbGV0IHByZXNlcnZlZFJvd1NlbGVjdGlvbiA9IGZhbHNlO1xyXG4gICAgaWYgKHRoaXMuX2dyaWRPcHRpb25zICYmIHRoaXMuX2dyaWRPcHRpb25zLmRhdGFWaWV3ICYmIHRoaXMuX2dyaWRPcHRpb25zLmRhdGFWaWV3Lmhhc093blByb3BlcnR5KCdzeW5jR3JpZFNlbGVjdGlvbicpKSB7XHJcbiAgICAgIGNvbnN0IHN5bmNHcmlkU2VsZWN0aW9uID0gdGhpcy5fZ3JpZE9wdGlvbnMuZGF0YVZpZXcuc3luY0dyaWRTZWxlY3Rpb247XHJcbiAgICAgIGlmICh0eXBlb2Ygc3luY0dyaWRTZWxlY3Rpb24gPT09ICdib29sZWFuJykge1xyXG4gICAgICAgIHByZXNlcnZlZFJvd1NlbGVjdGlvbiA9IHRoaXMuX2dyaWRPcHRpb25zLmRhdGFWaWV3LnN5bmNHcmlkU2VsZWN0aW9uIGFzIGJvb2xlYW47XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcHJlc2VydmVkUm93U2VsZWN0aW9uID0gc3luY0dyaWRTZWxlY3Rpb24ucHJlc2VydmVIaWRkZW47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIGlmIHRoZSByZXN1bHQgaXMgVHJ1ZSBidXQgdGhlIGdyaWQgaXMgdXNpbmcgYSBCYWNrZW5kIFNlcnZpY2UsIHdlIHdpbGwgZG8gYW4gZXh0cmEgZmxhZyBjaGVjayB0aGUgcmVhc29uIGlzIGJlY2F1c2UgaXQgbWlnaHQgaGF2ZSBzb21lIHVuaW50ZW5kZWQgYmVoYXZpb3JzXHJcbiAgICAgIC8vIHdpdGggdGhlIEJhY2tlbmRTZXJ2aWNlQXBpIGJlY2F1c2UgdGVjaG5pY2FsbHkgdGhlIGRhdGEgaW4gdGhlIHBhZ2UgY2hhbmdlcyB0aGUgRGF0YVZpZXcgb24gZXZlcnkgcGFnZS5cclxuICAgICAgaWYgKHByZXNlcnZlZFJvd1NlbGVjdGlvbiAmJiB0aGlzLl9ncmlkT3B0aW9ucy5iYWNrZW5kU2VydmljZUFwaSAmJiB0aGlzLl9ncmlkT3B0aW9ucy5kYXRhVmlldy5oYXNPd25Qcm9wZXJ0eSgnc3luY0dyaWRTZWxlY3Rpb25XaXRoQmFja2VuZFNlcnZpY2UnKSkge1xyXG4gICAgICAgIHByZXNlcnZlZFJvd1NlbGVjdGlvbiA9IHRoaXMuX2dyaWRPcHRpb25zLmRhdGFWaWV3LnN5bmNHcmlkU2VsZWN0aW9uV2l0aEJhY2tlbmRTZXJ2aWNlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcHJlc2VydmVkUm93U2VsZWN0aW9uO1xyXG4gIH1cclxuXHJcbiAgcmVzZXRDb2x1bW5zKGNvbHVtbkRlZmluaXRpb25zPzogQ29sdW1uW10pIHtcclxuICAgIGNvbnN0IGNvbHVtbnM6IENvbHVtbltdID0gY29sdW1uRGVmaW5pdGlvbnMgfHwgdGhpcy5fY29sdW1ucztcclxuICAgIGNvbnN0IGN1cnJlbnRDb2x1bW5zOiBDdXJyZW50Q29sdW1uW10gPSB0aGlzLmdldEFzc29jaWF0ZWRDdXJyZW50Q29sdW1ucyhjb2x1bW5zKTtcclxuICAgIHRoaXMub25HcmlkU3RhdGVDaGFuZ2VkLm5leHQoeyBjaGFuZ2U6IHsgbmV3VmFsdWVzOiBjdXJyZW50Q29sdW1ucywgdHlwZTogR3JpZFN0YXRlVHlwZS5jb2x1bW5zIH0sIGdyaWRTdGF0ZTogdGhpcy5nZXRDdXJyZW50R3JpZFN0YXRlKCkgfSk7XHJcbiAgfVxyXG5cclxuICAvKiogaWYgd2UgdXNlIFJvdyBTZWxlY3Rpb24gb3IgdGhlIENoZWNrYm94IFNlbGVjdG9yLCB3ZSBuZWVkIHRvIHJlc2V0IGFueSBzZWxlY3Rpb24gKi9cclxuICByZXNldFJvd1NlbGVjdGlvbldoZW5SZXF1aXJlZCgpIHtcclxuICAgIGlmICghdGhpcy5uZWVkVG9QcmVzZXJ2ZVJvd1NlbGVjdGlvbigpICYmICh0aGlzLl9ncmlkT3B0aW9ucy5lbmFibGVSb3dTZWxlY3Rpb24gfHwgdGhpcy5fZ3JpZE9wdGlvbnMuZW5hYmxlQ2hlY2tib3hTZWxlY3RvcikpIHtcclxuICAgICAgLy8gdGhpcyBhbHNvIHJlcXVpcmVzIHRoZSBSb3cgU2VsZWN0aW9uIE1vZGVsIHRvIGJlIHJlZ2lzdGVyZWQgYXMgd2VsbFxyXG4gICAgICBjb25zdCByb3dTZWxlY3Rpb25FeHRlbnNpb24gPSB0aGlzLmV4dGVuc2lvblNlcnZpY2UgJiYgdGhpcy5leHRlbnNpb25TZXJ2aWNlLmdldEV4dGVuc2lvbkJ5TmFtZSAmJiB0aGlzLmV4dGVuc2lvblNlcnZpY2UuZ2V0RXh0ZW5zaW9uQnlOYW1lKEV4dGVuc2lvbk5hbWUucm93U2VsZWN0aW9uKTtcclxuICAgICAgaWYgKHJvd1NlbGVjdGlvbkV4dGVuc2lvbiAmJiByb3dTZWxlY3Rpb25FeHRlbnNpb24uaW5zdGFuY2UpIHtcclxuICAgICAgICB0aGlzLl9ncmlkLnNldFNlbGVjdGVkUm93cyhbXSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFN1YnNjcmliZSB0byBhbGwgbmVjZXNzYXJ5IFNsaWNrR3JpZCBvciBTZXJ2aWNlIEV2ZW50cyB0aGF0IGRlYWxzIHdpdGggYSBHcmlkIGNoYW5nZSxcclxuICAgKiB3aGVuIHRyaWdnZXJlZCwgd2Ugd2lsbCBwdWJsaXNoIGEgR3JpZCBTdGF0ZSBFdmVudCB3aXRoIGN1cnJlbnQgR3JpZCBTdGF0ZVxyXG4gICAqL1xyXG4gIHN1YnNjcmliZVRvQWxsR3JpZENoYW5nZXMoZ3JpZDogYW55KSB7XHJcbiAgICAvLyBTdWJzY3JpYmUgdG8gRXZlbnQgRW1pdHRlciBvZiBGaWx0ZXIgY2hhbmdlZFxyXG4gICAgdGhpcy5fc3Vic2NyaXB0aW9ucy5wdXNoKFxyXG4gICAgICB0aGlzLmZpbHRlclNlcnZpY2Uub25GaWx0ZXJDaGFuZ2VkLnN1YnNjcmliZSgoY3VycmVudEZpbHRlcnM6IEN1cnJlbnRGaWx0ZXJbXSkgPT4ge1xyXG4gICAgICAgIHRoaXMucmVzZXRSb3dTZWxlY3Rpb25XaGVuUmVxdWlyZWQoKTtcclxuXHJcbiAgICAgICAgLy8gdHJpZ2dlciBhIEdyaWQgU3RhdGUgZmlsdGVyIGNoYW5nZSwgaG93ZXZlciBkb24ndCByZWV2YWx1YXRlIHRoZSBmaWx0ZXJlZCByb3cgc2VsZWN0aW9ucywgd2UnbGwgZG8gdGhhdCBvbiB0aGUgbmV4dCBHcmlkIFN0YXRlIGNoYW5nZSBiZWxvd1xyXG4gICAgICAgIHRoaXMub25HcmlkU3RhdGVDaGFuZ2VkLm5leHQoeyBjaGFuZ2U6IHsgbmV3VmFsdWVzOiBjdXJyZW50RmlsdGVycywgdHlwZTogR3JpZFN0YXRlVHlwZS5maWx0ZXIgfSwgZ3JpZFN0YXRlOiB0aGlzLmdldEN1cnJlbnRHcmlkU3RhdGUoeyByZXF1ZXN0UmVmcmVzaFJvd0ZpbHRlcmVkUm93OiAhdGhpcy5oYXNSb3dTZWxlY3Rpb25FbmFibGVkKCkgfSkgfSk7XHJcblxyXG4gICAgICAgIC8vIHdoZW4gUm93IFNlbGVjdGlvbiBpcyBlbmFibGVkLCB3ZSBhbHNvIG5lZWQgdG8gcmUtZXZhbHVhdGUgdGhlIHJvdyBzZWxlY3Rpb24gd2l0aCB0aGUgbGVmdG92ZXIgZmlsdGVyZWQgZGF0YXNldFxyXG4gICAgICAgIGlmICh0aGlzLmhhc1Jvd1NlbGVjdGlvbkVuYWJsZWQoKSkge1xyXG4gICAgICAgICAgdGhpcy5yZUV2YWx1YXRlUm93U2VsZWN0aW9uQWZ0ZXJGaWx0ZXJDaGFuZ2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICApO1xyXG5cclxuICAgIC8vIFN1YnNjcmliZSB0byBFdmVudCBFbWl0dGVyIG9mIEZpbHRlciBjbGVhcmVkXHJcbiAgICB0aGlzLl9zdWJzY3JpcHRpb25zLnB1c2goXHJcbiAgICAgIHRoaXMuZmlsdGVyU2VydmljZS5vbkZpbHRlckNsZWFyZWQuc3Vic2NyaWJlKCgpID0+IHtcclxuICAgICAgICB0aGlzLnJlc2V0Um93U2VsZWN0aW9uV2hlblJlcXVpcmVkKCk7XHJcbiAgICAgICAgdGhpcy5vbkdyaWRTdGF0ZUNoYW5nZWQubmV4dCh7IGNoYW5nZTogeyBuZXdWYWx1ZXM6IFtdLCB0eXBlOiBHcmlkU3RhdGVUeXBlLmZpbHRlciB9LCBncmlkU3RhdGU6IHRoaXMuZ2V0Q3VycmVudEdyaWRTdGF0ZSgpIH0pO1xyXG4gICAgICB9KVxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBTdWJzY3JpYmUgdG8gRXZlbnQgRW1pdHRlciBvZiBTb3J0IGNoYW5nZWRcclxuICAgIHRoaXMuX3N1YnNjcmlwdGlvbnMucHVzaChcclxuICAgICAgdGhpcy5zb3J0U2VydmljZS5vblNvcnRDaGFuZ2VkLnN1YnNjcmliZSgoY3VycmVudFNvcnRlcnM6IEN1cnJlbnRTb3J0ZXJbXSkgPT4ge1xyXG4gICAgICAgIHRoaXMucmVzZXRSb3dTZWxlY3Rpb25XaGVuUmVxdWlyZWQoKTtcclxuICAgICAgICB0aGlzLm9uR3JpZFN0YXRlQ2hhbmdlZC5uZXh0KHsgY2hhbmdlOiB7IG5ld1ZhbHVlczogY3VycmVudFNvcnRlcnMsIHR5cGU6IEdyaWRTdGF0ZVR5cGUuc29ydGVyIH0sIGdyaWRTdGF0ZTogdGhpcy5nZXRDdXJyZW50R3JpZFN0YXRlKCkgfSk7XHJcbiAgICAgIH0pXHJcbiAgICApO1xyXG5cclxuICAgIC8vIFN1YnNjcmliZSB0byBFdmVudCBFbWl0dGVyIG9mIFNvcnQgY2xlYXJlZFxyXG4gICAgdGhpcy5fc3Vic2NyaXB0aW9ucy5wdXNoKFxyXG4gICAgICB0aGlzLnNvcnRTZXJ2aWNlLm9uU29ydENsZWFyZWQuc3Vic2NyaWJlKCgpID0+IHtcclxuICAgICAgICB0aGlzLnJlc2V0Um93U2VsZWN0aW9uV2hlblJlcXVpcmVkKCk7XHJcbiAgICAgICAgdGhpcy5vbkdyaWRTdGF0ZUNoYW5nZWQubmV4dCh7IGNoYW5nZTogeyBuZXdWYWx1ZXM6IFtdLCB0eXBlOiBHcmlkU3RhdGVUeXBlLnNvcnRlciB9LCBncmlkU3RhdGU6IHRoaXMuZ2V0Q3VycmVudEdyaWRTdGF0ZSgpIH0pO1xyXG4gICAgICB9KVxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBTdWJzY3JpYmUgdG8gQ29sdW1uUGlja2VyIGFuZC9vciBHcmlkTWVudSBmb3Igc2hvdy9oaWRlIENvbHVtbnMgdmlzaWJpbGl0eSBjaGFuZ2VzXHJcbiAgICB0aGlzLmJpbmRFeHRlbnNpb25BZGRvbkV2ZW50VG9HcmlkU3RhdGVDaGFuZ2UoRXh0ZW5zaW9uTmFtZS5jb2x1bW5QaWNrZXIsICdvbkNvbHVtbnNDaGFuZ2VkJyk7XHJcbiAgICB0aGlzLmJpbmRFeHRlbnNpb25BZGRvbkV2ZW50VG9HcmlkU3RhdGVDaGFuZ2UoRXh0ZW5zaW9uTmFtZS5ncmlkTWVudSwgJ29uQ29sdW1uc0NoYW5nZWQnKTtcclxuXHJcbiAgICAvLyBzdWJzY3JpYmUgdG8gQ29sdW1uIFJlc2l6ZSAmIFJlb3JkZXJpbmdcclxuICAgIHRoaXMuYmluZFNsaWNrR3JpZENvbHVtbkNoYW5nZUV2ZW50VG9HcmlkU3RhdGVDaGFuZ2UoJ29uQ29sdW1uc1Jlb3JkZXJlZCcsIGdyaWQpO1xyXG4gICAgdGhpcy5iaW5kU2xpY2tHcmlkQ29sdW1uQ2hhbmdlRXZlbnRUb0dyaWRTdGF0ZUNoYW5nZSgnb25Db2x1bW5zUmVzaXplZCcsIGdyaWQpO1xyXG5cclxuICAgIC8vIHN1YnNjcmliZSB0byBSb3cgU2VsZWN0aW9uIGNoYW5nZXMgKHdoZW4gZW5hYmxlZClcclxuICAgIGlmICh0aGlzLl9ncmlkT3B0aW9ucy5lbmFibGVSb3dTZWxlY3Rpb24gfHwgdGhpcy5fZ3JpZE9wdGlvbnMuZW5hYmxlQ2hlY2tib3hTZWxlY3Rvcikge1xyXG4gICAgICB0aGlzLmJpbmRTbGlja0dyaWRSb3dTZWxlY3Rpb25Ub0dyaWRTdGF0ZUNoYW5nZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHN1YnNjcmliZSB0byBIZWFkZXJNZW51IChoaWRlIGNvbHVtbilcclxuICAgIHRoaXMuX3N1YnNjcmlwdGlvbnMucHVzaChcclxuICAgICAgdGhpcy5zaGFyZWRTZXJ2aWNlLm9uSGVhZGVyTWVudUhpZGVDb2x1bW5zLnN1YnNjcmliZSgodmlzaWJsZUNvbHVtbnM6IENvbHVtbltdKSA9PiB7XHJcbiAgICAgICAgY29uc3QgY3VycmVudENvbHVtbnM6IEN1cnJlbnRDb2x1bW5bXSA9IHRoaXMuZ2V0QXNzb2NpYXRlZEN1cnJlbnRDb2x1bW5zKHZpc2libGVDb2x1bW5zKTtcclxuICAgICAgICB0aGlzLm9uR3JpZFN0YXRlQ2hhbmdlZC5uZXh0KHsgY2hhbmdlOiB7IG5ld1ZhbHVlczogY3VycmVudENvbHVtbnMsIHR5cGU6IEdyaWRTdGF0ZVR5cGUuY29sdW1ucyB9LCBncmlkU3RhdGU6IHRoaXMuZ2V0Q3VycmVudEdyaWRTdGF0ZSgpIH0pO1xyXG4gICAgICB9KVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIC8vIC0tXHJcbiAgLy8gcHJpdmF0ZSBtZXRob2RzXHJcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gIC8qKlxyXG4gICAqIEJpbmQgYSBTbGlja0dyaWQgRXh0ZW5zaW9uIEV2ZW50IHRvIGEgR3JpZCBTdGF0ZSBjaGFuZ2UgZXZlbnRcclxuICAgKiBAcGFyYW0gZXh0ZW5zaW9uIG5hbWVcclxuICAgKiBAcGFyYW0gZ3JpZFxyXG4gICAqL1xyXG4gIHByaXZhdGUgYmluZEV4dGVuc2lvbkFkZG9uRXZlbnRUb0dyaWRTdGF0ZUNoYW5nZShleHRlbnNpb25OYW1lOiBFeHRlbnNpb25OYW1lLCBldmVudE5hbWU6IHN0cmluZykge1xyXG4gICAgY29uc3QgZXh0ZW5zaW9uID0gdGhpcy5leHRlbnNpb25TZXJ2aWNlICYmIHRoaXMuZXh0ZW5zaW9uU2VydmljZS5nZXRFeHRlbnNpb25CeU5hbWUgJiYgdGhpcy5leHRlbnNpb25TZXJ2aWNlLmdldEV4dGVuc2lvbkJ5TmFtZShleHRlbnNpb25OYW1lKTtcclxuICAgIGNvbnN0IHNsaWNrRXZlbnQgPSBleHRlbnNpb24gJiYgZXh0ZW5zaW9uLmluc3RhbmNlICYmIGV4dGVuc2lvbi5pbnN0YW5jZVtldmVudE5hbWVdO1xyXG5cclxuICAgIGlmIChzbGlja0V2ZW50ICYmIHNsaWNrRXZlbnQuc3Vic2NyaWJlKSB7XHJcbiAgICAgIHRoaXMuX2V2ZW50SGFuZGxlci5zdWJzY3JpYmUoc2xpY2tFdmVudCwgKGU6IEV2ZW50LCBhcmdzOiBhbnkpID0+IHtcclxuICAgICAgICBjb25zdCBjb2x1bW5zOiBDb2x1bW5bXSA9IGFyZ3MgJiYgYXJncy5jb2x1bW5zO1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRDb2x1bW5zOiBDdXJyZW50Q29sdW1uW10gPSB0aGlzLmdldEFzc29jaWF0ZWRDdXJyZW50Q29sdW1ucyhjb2x1bW5zKTtcclxuICAgICAgICB0aGlzLm9uR3JpZFN0YXRlQ2hhbmdlZC5uZXh0KHsgY2hhbmdlOiB7IG5ld1ZhbHVlczogY3VycmVudENvbHVtbnMsIHR5cGU6IEdyaWRTdGF0ZVR5cGUuY29sdW1ucyB9LCBncmlkU3RhdGU6IHRoaXMuZ2V0Q3VycmVudEdyaWRTdGF0ZSgpIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEJpbmQgYSBHcmlkIEV2ZW50IChvZiBDb2x1bW4gY2hhbmdlcykgdG8gYSBHcmlkIFN0YXRlIGNoYW5nZSBldmVudFxyXG4gICAqIEBwYXJhbSBldmVudCBuYW1lXHJcbiAgICogQHBhcmFtIGdyaWRcclxuICAgKi9cclxuICBwcml2YXRlIGJpbmRTbGlja0dyaWRDb2x1bW5DaGFuZ2VFdmVudFRvR3JpZFN0YXRlQ2hhbmdlKGV2ZW50TmFtZTogc3RyaW5nLCBncmlkOiBhbnkpIHtcclxuICAgIGNvbnN0IHNsaWNrR3JpZEV2ZW50ID0gZ3JpZCAmJiBncmlkW2V2ZW50TmFtZV07XHJcblxyXG4gICAgaWYgKHNsaWNrR3JpZEV2ZW50ICYmIHNsaWNrR3JpZEV2ZW50LnN1YnNjcmliZSkge1xyXG4gICAgICB0aGlzLl9ldmVudEhhbmRsZXIuc3Vic2NyaWJlKHNsaWNrR3JpZEV2ZW50LCAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgY29sdW1uczogQ29sdW1uW10gPSBncmlkLmdldENvbHVtbnMoKTtcclxuICAgICAgICBjb25zdCBjdXJyZW50Q29sdW1uczogQ3VycmVudENvbHVtbltdID0gdGhpcy5nZXRBc3NvY2lhdGVkQ3VycmVudENvbHVtbnMoY29sdW1ucyk7XHJcbiAgICAgICAgdGhpcy5vbkdyaWRTdGF0ZUNoYW5nZWQubmV4dCh7IGNoYW5nZTogeyBuZXdWYWx1ZXM6IGN1cnJlbnRDb2x1bW5zLCB0eXBlOiBHcmlkU3RhdGVUeXBlLmNvbHVtbnMgfSwgZ3JpZFN0YXRlOiB0aGlzLmdldEN1cnJlbnRHcmlkU3RhdGUoKSB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBCaW5kIGEgR3JpZCBFdmVudCBvZiBSb3cgU2VsZWN0aW9uIGNoYW5nZSB0byBhIEdyaWQgU3RhdGUgY2hhbmdlIGV2ZW50XHJcbiAgICogRm9yIHRoZSByb3cgc2VsZWN0aW9uLCB3ZSBjYW4ndCBqdXN0IHVzZSB0aGUgZ2V0U2VsZWN0ZWRSb3dzKCkgc2luY2UgdGhpcyB3aWxsIG9ubHkgcmV0dXJuIHRoZSB2aXNpYmxlIHJvd3Mgc2hvd24gaW4gdGhlIFVJIHdoaWNoIGlzIG5vdCBlbm91Z2guXHJcbiAgICogVGhlIHByb2Nlc3MgaXMgbXVjaCBtb3JlIGNvbXBsZXgsIHdoYXQgd2UgaGF2ZSB0byBkbyBpbnN0ZWFkIGlzIHRoZSBmb2xsb3dpbmdcclxuICAgKiAxLiB3aGVuIGNoYW5naW5nIGEgcm93IHNlbGVjdGlvbiwgd2UnbGwgYWRkIHRoZSBuZXcgc2VsZWN0aW9uIGlmIGl0J3Mgbm90IHlldCBpbiB0aGUgZ2xvYmFsIGFycmF5IG9mIHNlbGVjdGVkIElEc1xyXG4gICAqIDIuIHdoZW4gZGVsZXRpbmcgYSByb3cgc2VsZWN0aW9uLCB3ZSdsbCByZW1vdmUgdGhlIHNlbGVjdGlvbiBmcm9tIG91ciBnbG9iYWwgYXJyYXkgb2Ygc2VsZWN0ZWQgSURzICh1bmxlc3MgaXQgY2FtZSBmcm9tIGEgcGFnZSBjaGFuZ2UpXHJcbiAgICogMy4gaWYgd2UgdXNlIFBhZ2luYXRpb24gYW5kIHdlIGNoYW5nZSBwYWdlLCB3ZSdsbCBrZWVwIHRyYWNrIHdpdGggYSBmbGFnICh0aGlzIGZsYWcgd2lsbCBiZSB1c2VkIHRvIHNraXAgYW55IGRlbGV0aW9uIHdoZW4gd2UncmUgY2hhbmdpbmcgcGFnZSlcclxuICAgKiA0LiBhZnRlciB0aGUgUGFnZSBvciBEYXRhVmlldyBpcyBjaGFuZ2VkIG9yIHVwZGF0ZWQsIHdlJ2xsIGRvIGFuIGV4dHJhIChhbmQgZGVsYXllZCkgY2hlY2sgdG8gbWFrZSBzdXJlIHRoYXQgd2hhdCB3ZSBoYXZlIGluIG91ciBnbG9iYWwgYXJyYXkgb2Ygc2VsZWN0ZWQgSURzIGlzIGRpc3BsYXllZCBvbiBzY3JlZW5cclxuICAgKi9cclxuICBwcml2YXRlIGJpbmRTbGlja0dyaWRSb3dTZWxlY3Rpb25Ub0dyaWRTdGF0ZUNoYW5nZSgpIHtcclxuICAgIGlmICh0aGlzLl9ncmlkICYmIHRoaXMuX2dyaWRPcHRpb25zICYmIHRoaXMuX2RhdGFWaWV3KSB7XHJcbiAgICAgIHRoaXMuX2V2ZW50SGFuZGxlci5zdWJzY3JpYmUodGhpcy5fZGF0YVZpZXcub25CZWZvcmVQYWdpbmdJbmZvQ2hhbmdlZCwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX3dhc1JlY2hlY2tlZEFmdGVyUGFnZUNoYW5nZSA9IGZhbHNlOyAvLyByZXNldCB0aGUgcGFnZSBjaGVjayBmbGFnLCB0byBza2lwIGRlbGV0aW9ucyBvbiBwYWdlIGNoYW5nZSAodXNlZCBpbiBjb2RlIGJlbG93KVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHRoaXMuX2V2ZW50SGFuZGxlci5zdWJzY3JpYmUodGhpcy5fZGF0YVZpZXcub25QYWdpbmdJbmZvQ2hhbmdlZCwgKCkgPT4ge1xyXG4gICAgICAgIC8vIHdoZW4gdXNlciBjaGFuZ2VzIHBhZ2UsIHRoZSBzZWxlY3RlZCByb3cgaW5kZXhlcyBtaWdodCBub3Qgc2hvdyB1cFxyXG4gICAgICAgIC8vIHdlIGNhbiBjaGVjayB0byBtYWtlIHN1cmUgaXQgaXMgYnV0IGl0IGhhcyB0byBiZSBpbiBhIGRlbGF5IHNvIGl0IGhhcHBlbnMgYWZ0ZXIgdGhlIGZpcnN0IFwib25TZWxlY3RlZFJvd3NDaGFuZ2VkXCIgaXMgdHJpZ2dlcmVkXHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBzaG91bGRCZVNlbGVjdGVkUm93SW5kZXhlcyA9IHRoaXMuX2RhdGFWaWV3Lm1hcElkc1RvUm93cyh0aGlzLl9zZWxlY3RlZFJvd0RhdGFDb250ZXh0SWRzIHx8IFtdKTtcclxuICAgICAgICAgIGNvbnN0IGN1cnJlbnRTZWxlY3RlZFJvd0luZGV4ZXMgPSB0aGlzLl9ncmlkLmdldFNlbGVjdGVkUm93cygpO1xyXG4gICAgICAgICAgaWYgKCFpc2VxdWFsKHNob3VsZEJlU2VsZWN0ZWRSb3dJbmRleGVzLCBjdXJyZW50U2VsZWN0ZWRSb3dJbmRleGVzKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9ncmlkLnNldFNlbGVjdGVkUm93cyhzaG91bGRCZVNlbGVjdGVkUm93SW5kZXhlcyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgdGhpcy5fZXZlbnRIYW5kbGVyLnN1YnNjcmliZSh0aGlzLl9ncmlkLm9uU2VsZWN0ZWRSb3dzQ2hhbmdlZCwgKGUsIGFyZ3MpID0+IHtcclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhcmdzLnJvd3MpICYmIEFycmF5LmlzQXJyYXkoYXJncy5wcmV2aW91c1NlbGVjdGVkUm93cykpIHtcclxuICAgICAgICAgIGNvbnN0IG5ld1NlbGVjdGVkUm93cyA9IGFyZ3Mucm93cyBhcyBudW1iZXJbXTtcclxuICAgICAgICAgIGNvbnN0IHByZXZTZWxlY3RlZFJvd3MgPSBhcmdzLnByZXZpb3VzU2VsZWN0ZWRSb3dzIGFzIG51bWJlcltdO1xyXG5cclxuICAgICAgICAgIGNvbnN0IG5ld1NlbGVjdGVkQWRkaXRpb25zID0gbmV3U2VsZWN0ZWRSb3dzLmZpbHRlcigoaSkgPT4gcHJldlNlbGVjdGVkUm93cy5pbmRleE9mKGkpIDwgMCk7XHJcbiAgICAgICAgICBjb25zdCBuZXdTZWxlY3RlZERlbGV0aW9ucyA9IHByZXZTZWxlY3RlZFJvd3MuZmlsdGVyKChpKSA9PiBuZXdTZWxlY3RlZFJvd3MuaW5kZXhPZihpKSA8IDApO1xyXG5cclxuICAgICAgICAgIC8vIGRlbGV0aW9uIG1pZ2h0IGhhcHBlbiB3aGVuIHVzZXIgaXMgY2hhbmdpbmcgcGFnZSwgaWYgdGhhdCBpcyB0aGUgY2FzZSB0aGVuIHNraXAgdGhlIGRlbGV0aW9uIHNpbmNlIGl0J3Mgb25seSBhIHZpc3VhbCBkZWxldGlvbiAoY3VycmVudCBwYWdlKVxyXG4gICAgICAgICAgLy8gaWYgaXQncyBub3QgYSBwYWdlIGNoYW5nZSAod2hlbiB0aGUgZmxhZyBpcyB0cnVlKSwgdGhlbiBwcm9jZWVkIHdpdGggdGhlIGRlbGV0aW9uIGluIG91ciBnbG9iYWwgYXJyYXkgb2Ygc2VsZWN0ZWQgSURzXHJcbiAgICAgICAgICBpZiAodGhpcy5fd2FzUmVjaGVja2VkQWZ0ZXJQYWdlQ2hhbmdlICYmIG5ld1NlbGVjdGVkRGVsZXRpb25zLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgY29uc3QgdG9EZWxldGVEYXRhSWRzOiBBcnJheTxudW1iZXIgfCBzdHJpbmc+IHwgdW5kZWZpbmVkID0gdGhpcy5fZGF0YVZpZXcubWFwUm93c1RvSWRzKG5ld1NlbGVjdGVkRGVsZXRpb25zKSB8fCBbXTtcclxuICAgICAgICAgICAgdG9EZWxldGVEYXRhSWRzLmZvckVhY2goKHJlbW92ZUlkOiBudW1iZXIgfCBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgICB0aGlzLl9zZWxlY3RlZFJvd0RhdGFDb250ZXh0SWRzLnNwbGljZSgodGhpcy5fc2VsZWN0ZWRSb3dEYXRhQ29udGV4dElkcyBhcyBBcnJheTxudW1iZXIgfCBzdHJpbmc+IHwgdW5kZWZpbmVkKS5pbmRleE9mKHJlbW92ZUlkKSwgMSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIC8vIGlmIHdlIGhhdmUgbmV3bHkgYWRkZWQgc2VsZWN0ZWQgcm93KHMpLCBsZXQncyB1cGRhdGUgb3VyIGdsb2JhbCBhcnJheSBvZiBzZWxlY3RlZCBJRHNcclxuICAgICAgICAgIGlmIChuZXdTZWxlY3RlZEFkZGl0aW9ucy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRvQWRkRGF0YUlkczogQXJyYXk8bnVtYmVyIHwgc3RyaW5nPiB8IHVuZGVmaW5lZCA9IHRoaXMuX2RhdGFWaWV3Lm1hcFJvd3NUb0lkcyhuZXdTZWxlY3RlZEFkZGl0aW9ucykgfHwgW107XHJcbiAgICAgICAgICAgIHRvQWRkRGF0YUlkcy5mb3JFYWNoKChkYXRhSWQ6IG51bWJlciB8IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICAgIGlmICgodGhpcy5fc2VsZWN0ZWRSb3dEYXRhQ29udGV4dElkcyBhcyBBcnJheTxudW1iZXIgfCBzdHJpbmc+IHwgdW5kZWZpbmVkKS5pbmRleE9mKGRhdGFJZCkgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAodGhpcy5fc2VsZWN0ZWRSb3dEYXRhQ29udGV4dElkcyBhcyBBcnJheTxudW1iZXIgfCBzdHJpbmc+IHwgdW5kZWZpbmVkKS5wdXNoKGRhdGFJZCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAvLyB3ZSBzZXQgdGhpcyBmbGFnIHdoaWNoIHdpbGwgYmUgdXNlZCBvbiB0aGUgMm5kIHRpbWUgdGhlIFwib25TZWxlY3RlZFJvd3NDaGFuZ2VkXCIgZXZlbnQgaXMgY2FsbGVkXHJcbiAgICAgICAgICAvLyB3aGVuIGl0J3MgdGhlIGZpcnN0IHRpbWUsIHdlIHNraXAgZGVsZXRpb24gYW5kIHRoaXMgaXMgd2hhdCB0aGlzIGZsYWcgaXMgZm9yXHJcbiAgICAgICAgICB0aGlzLl93YXNSZWNoZWNrZWRBZnRlclBhZ2VDaGFuZ2UgPSB0cnVlO1xyXG5cclxuICAgICAgICAgIC8vIGZvcm0gb3VyIGZ1bGwgc2VsZWN0ZWQgcm93IElEcywgbGV0J3MgbWFrZSBzdXJlIHRoZXNlIGluZGV4ZXMgYXJlIHNlbGVjdGVkIGluIHRoZSBncmlkLCBpZiBub3QgdGhlbiBsZXQncyBjYWxsIGEgcmVzZWxlY3RcclxuICAgICAgICAgIC8vIHRoaXMgY291bGQgaGFwcGVuIGlmIHRoZSBwcmV2aW91cyBzdGVwIHdhcyBhIHBhZ2UgY2hhbmdlXHJcbiAgICAgICAgICBjb25zdCBzaG91bGRCZVNlbGVjdGVkUm93SW5kZXhlcyA9IHRoaXMuX2RhdGFWaWV3Lm1hcElkc1RvUm93cyh0aGlzLl9zZWxlY3RlZFJvd0RhdGFDb250ZXh0SWRzIHx8IFtdKTtcclxuICAgICAgICAgIGNvbnN0IGN1cnJlbnRTZWxlY3RlZFJvd0luZGV4ZXMgPSB0aGlzLl9ncmlkLmdldFNlbGVjdGVkUm93cygpO1xyXG4gICAgICAgICAgaWYgKCFpc2VxdWFsKHNob3VsZEJlU2VsZWN0ZWRSb3dJbmRleGVzLCBjdXJyZW50U2VsZWN0ZWRSb3dJbmRleGVzKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9ncmlkLnNldFNlbGVjdGVkUm93cyhzaG91bGRCZVNlbGVjdGVkUm93SW5kZXhlcyk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgY29uc3QgZmlsdGVyZWREYXRhQ29udGV4dElkcyA9IHRoaXMucmVmcmVzaEZpbHRlcmVkUm93U2VsZWN0aW9ucygpO1xyXG4gICAgICAgICAgY29uc3QgbmV3VmFsdWVzID0geyBncmlkUm93SW5kZXhlczogdGhpcy5fZ3JpZC5nZXRTZWxlY3RlZFJvd3MoKSwgZGF0YUNvbnRleHRJZHM6IHRoaXMuX3NlbGVjdGVkUm93RGF0YUNvbnRleHRJZHMsIGZpbHRlcmVkRGF0YUNvbnRleHRJZHMgfSBhcyBDdXJyZW50Um93U2VsZWN0aW9uO1xyXG4gICAgICAgICAgdGhpcy5vbkdyaWRTdGF0ZUNoYW5nZWQubmV4dCh7IGNoYW5nZTogeyBuZXdWYWx1ZXMsIHR5cGU6IEdyaWRTdGF0ZVR5cGUucm93U2VsZWN0aW9uIH0sIGdyaWRTdGF0ZTogdGhpcy5nZXRDdXJyZW50R3JpZFN0YXRlKCkgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKiBDaGVjayB3ZXRoZXIgdGhlIGdyaWQgaGFzIHRoZSBSb3cgU2VsZWN0aW9uIGVuYWJsZWQgKi9cclxuICBwcml2YXRlIGhhc1Jvd1NlbGVjdGlvbkVuYWJsZWQoKSB7XHJcbiAgICBjb25zdCBzZWxlY3Rpb25Nb2RlbCA9IHRoaXMuX2dyaWQuZ2V0U2VsZWN0aW9uTW9kZWwoKTtcclxuICAgIGNvbnN0IGlzUm93U2VsZWN0aW9uRW5hYmxlZCA9IHRoaXMuX2dyaWRPcHRpb25zLmVuYWJsZVJvd1NlbGVjdGlvbiB8fCB0aGlzLl9ncmlkT3B0aW9ucy5lbmFibGVDaGVja2JveFNlbGVjdG9yO1xyXG4gICAgcmV0dXJuIChpc1Jvd1NlbGVjdGlvbkVuYWJsZWQgJiYgc2VsZWN0aW9uTW9kZWwpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSByZUV2YWx1YXRlUm93U2VsZWN0aW9uQWZ0ZXJGaWx0ZXJDaGFuZ2UoKSB7XHJcbiAgICBjb25zdCBjdXJyZW50U2VsZWN0ZWRSb3dJbmRleGVzID0gdGhpcy5fZ3JpZC5nZXRTZWxlY3RlZFJvd3MoKTtcclxuICAgIGNvbnN0IHByZXZpb3VzU2VsZWN0ZWRGaWx0ZXJlZFJvd0RhdGFDb250ZXh0SWRzID0gdGhpcy5fc2VsZWN0ZWRGaWx0ZXJlZFJvd0RhdGFDb250ZXh0SWRzLnNsaWNlKCk7XHJcbiAgICBjb25zdCBmaWx0ZXJlZERhdGFDb250ZXh0SWRzID0gdGhpcy5yZWZyZXNoRmlsdGVyZWRSb3dTZWxlY3Rpb25zKCk7XHJcblxyXG4gICAgLy8gd2hlbiBzZWxlY3Rpb24gY2hhbmdlZCwgd2UnbGwgc2VuZCBhIEdyaWQgU3RhdGUgZXZlbnQgd2l0aCB0aGUgc2VsZWN0aW9uIGNoYW5nZXNcclxuICAgIGlmICghaXNlcXVhbCh0aGlzLl9zZWxlY3RlZEZpbHRlcmVkUm93RGF0YUNvbnRleHRJZHMsIHByZXZpb3VzU2VsZWN0ZWRGaWx0ZXJlZFJvd0RhdGFDb250ZXh0SWRzKSkge1xyXG4gICAgICBjb25zdCBuZXdWYWx1ZXMgPSB7IGdyaWRSb3dJbmRleGVzOiBjdXJyZW50U2VsZWN0ZWRSb3dJbmRleGVzLCBkYXRhQ29udGV4dElkczogdGhpcy5fc2VsZWN0ZWRSb3dEYXRhQ29udGV4dElkcywgZmlsdGVyZWREYXRhQ29udGV4dElkcyB9IGFzIEN1cnJlbnRSb3dTZWxlY3Rpb247XHJcbiAgICAgIHRoaXMub25HcmlkU3RhdGVDaGFuZ2VkLm5leHQoeyBjaGFuZ2U6IHsgbmV3VmFsdWVzLCB0eXBlOiBHcmlkU3RhdGVUeXBlLnJvd1NlbGVjdGlvbiB9LCBncmlkU3RhdGU6IHRoaXMuZ2V0Q3VycmVudEdyaWRTdGF0ZSh7IHJlcXVlc3RSZWZyZXNoUm93RmlsdGVyZWRSb3c6IGZhbHNlIH0pIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqIFdoZW4gYSBGaWx0ZXIgaXMgdHJpZ2dlcmVkIG9yIHdoZW4gdXNlciByZXF1ZXN0IGl0LCB3ZSB3aWxsIHJlZnJlc2ggdGhlIGZpbHRlcmVkIHNlbGVjdGlvbiBhcnJheSBhbmQgcmV0dXJuIGl0ICovXHJcbiAgcHJpdmF0ZSByZWZyZXNoRmlsdGVyZWRSb3dTZWxlY3Rpb25zKCk6IEFycmF5PG51bWJlciB8IHN0cmluZz4gfCB1bmRlZmluZWQge1xyXG4gICAgbGV0IHRtcEZpbHRlcmVkQXJyYXkgPSBbXTtcclxuICAgIGNvbnN0IGZpbHRlcmVkRGF0YXNldCA9IHRoaXMuX2RhdGFWaWV3LmdldEZpbHRlcmVkSXRlbXMoKSB8fCBbXTtcclxuICAgIGlmIChBcnJheS5pc0FycmF5KHRoaXMuX3NlbGVjdGVkUm93RGF0YUNvbnRleHRJZHMpKSB7XHJcbiAgICAgIGNvbnN0IHNlbGVjdGVkRmlsdGVyZWRSb3dEYXRhQ29udGV4dElkcyA9IFsuLi50aGlzLl9zZWxlY3RlZFJvd0RhdGFDb250ZXh0SWRzXTsgLy8gdGFrZSBhIGZyZXNoIGNvcHkgb2YgYWxsIHNlbGVjdGlvbnMgYmVmb3JlIGZpbHRlcmluZyB0aGUgcm93IGlkc1xyXG4gICAgICB0bXBGaWx0ZXJlZEFycmF5ID0gc2VsZWN0ZWRGaWx0ZXJlZFJvd0RhdGFDb250ZXh0SWRzLmZpbHRlcigoc2VsZWN0ZWRSb3dJZDogbnVtYmVyIHwgc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGZpbHRlcmVkRGF0YXNldC5maW5kSW5kZXgoKGl0ZW06IGFueSkgPT4gaXRlbVt0aGlzLmRhdGFzZXRJZFByb3BOYW1lXSA9PT0gc2VsZWN0ZWRSb3dJZCkgPiAtMTtcclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMuX3NlbGVjdGVkRmlsdGVyZWRSb3dEYXRhQ29udGV4dElkcyA9IHRtcEZpbHRlcmVkQXJyYXk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdG1wRmlsdGVyZWRBcnJheTtcclxuICB9XHJcbn1cclxuIl19