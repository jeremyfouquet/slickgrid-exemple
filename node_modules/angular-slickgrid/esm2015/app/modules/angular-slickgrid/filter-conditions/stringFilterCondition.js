import { testFilterCondition } from './filterUtilities';
import { OperatorType } from '../models';
export const stringFilterCondition = (options) => {
    // make sure the cell value is a string by casting it when possible
    options.cellValue = (options.cellValue === undefined || options.cellValue === null) ? '' : options.cellValue.toString();
    // make both the cell value and search value lower for case insensitive comparison
    const cellValue = options.cellValue.toLowerCase();
    let searchTerm = (Array.isArray(options.searchTerms) && options.searchTerms[0]) || '';
    if (typeof searchTerm === 'string') {
        searchTerm = searchTerm.toLowerCase();
    }
    if (options.operator === '*' || options.operator === OperatorType.endsWith) {
        return cellValue.endsWith(searchTerm);
    }
    else if ((options.operator === '' && options.cellValueLastChar === '*') || options.operator === OperatorType.startsWith) {
        return cellValue.startsWith(searchTerm);
    }
    else if (options.operator === '' || options.operator === OperatorType.contains) {
        return (cellValue.indexOf(searchTerm) > -1);
    }
    return testFilterCondition(options.operator || '==', cellValue, searchTerm);
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RyaW5nRmlsdGVyQ29uZGl0aW9uLmpzIiwic291cmNlUm9vdCI6Im5nOi8vYW5ndWxhci1zbGlja2dyaWQvIiwic291cmNlcyI6WyJhcHAvbW9kdWxlcy9hbmd1bGFyLXNsaWNrZ3JpZC9maWx0ZXItY29uZGl0aW9ucy9zdHJpbmdGaWx0ZXJDb25kaXRpb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxFQUFFLG1CQUFtQixFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFDeEQsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLFdBQVcsQ0FBQztBQUV6QyxNQUFNLENBQUMsTUFBTSxxQkFBcUIsR0FBb0IsQ0FBQyxPQUE4QixFQUFFLEVBQUU7SUFDdkYsbUVBQW1FO0lBQ25FLE9BQU8sQ0FBQyxTQUFTLEdBQUcsQ0FBQyxPQUFPLENBQUMsU0FBUyxLQUFLLFNBQVMsSUFBSSxPQUFPLENBQUMsU0FBUyxLQUFLLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsUUFBUSxFQUFFLENBQUM7SUFFeEgsa0ZBQWtGO0lBQ2xGLE1BQU0sU0FBUyxHQUFHLE9BQU8sQ0FBQyxTQUFTLENBQUMsV0FBVyxFQUFFLENBQUM7SUFDbEQsSUFBSSxVQUFVLEdBQUcsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsSUFBSSxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDO0lBQ3RGLElBQUksT0FBTyxVQUFVLEtBQUssUUFBUSxFQUFFO1FBQ2xDLFVBQVUsR0FBRyxVQUFVLENBQUMsV0FBVyxFQUFFLENBQUM7S0FDdkM7SUFFRCxJQUFJLE9BQU8sQ0FBQyxRQUFRLEtBQUssR0FBRyxJQUFJLE9BQU8sQ0FBQyxRQUFRLEtBQUssWUFBWSxDQUFDLFFBQVEsRUFBRTtRQUMxRSxPQUFPLFNBQVMsQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLENBQUM7S0FDdkM7U0FBTSxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsS0FBSyxFQUFFLElBQUksT0FBTyxDQUFDLGlCQUFpQixLQUFLLEdBQUcsQ0FBQyxJQUFJLE9BQU8sQ0FBQyxRQUFRLEtBQUssWUFBWSxDQUFDLFVBQVUsRUFBRTtRQUN6SCxPQUFPLFNBQVMsQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLENBQUM7S0FDekM7U0FBTSxJQUFJLE9BQU8sQ0FBQyxRQUFRLEtBQUssRUFBRSxJQUFJLE9BQU8sQ0FBQyxRQUFRLEtBQUssWUFBWSxDQUFDLFFBQVEsRUFBRTtRQUNoRixPQUFPLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0tBQzdDO0lBQ0QsT0FBTyxtQkFBbUIsQ0FBQyxPQUFPLENBQUMsUUFBUSxJQUFJLElBQUksRUFBRSxTQUFTLEVBQUUsVUFBVSxDQUFDLENBQUM7QUFDOUUsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRmlsdGVyQ29uZGl0aW9uLCBGaWx0ZXJDb25kaXRpb25PcHRpb24gfSBmcm9tICcuLi9tb2RlbHMvaW5kZXgnO1xyXG5pbXBvcnQgeyB0ZXN0RmlsdGVyQ29uZGl0aW9uIH0gZnJvbSAnLi9maWx0ZXJVdGlsaXRpZXMnO1xyXG5pbXBvcnQgeyBPcGVyYXRvclR5cGUgfSBmcm9tICcuLi9tb2RlbHMnO1xyXG5cclxuZXhwb3J0IGNvbnN0IHN0cmluZ0ZpbHRlckNvbmRpdGlvbjogRmlsdGVyQ29uZGl0aW9uID0gKG9wdGlvbnM6IEZpbHRlckNvbmRpdGlvbk9wdGlvbikgPT4ge1xyXG4gIC8vIG1ha2Ugc3VyZSB0aGUgY2VsbCB2YWx1ZSBpcyBhIHN0cmluZyBieSBjYXN0aW5nIGl0IHdoZW4gcG9zc2libGVcclxuICBvcHRpb25zLmNlbGxWYWx1ZSA9IChvcHRpb25zLmNlbGxWYWx1ZSA9PT0gdW5kZWZpbmVkIHx8IG9wdGlvbnMuY2VsbFZhbHVlID09PSBudWxsKSA/ICcnIDogb3B0aW9ucy5jZWxsVmFsdWUudG9TdHJpbmcoKTtcclxuXHJcbiAgLy8gbWFrZSBib3RoIHRoZSBjZWxsIHZhbHVlIGFuZCBzZWFyY2ggdmFsdWUgbG93ZXIgZm9yIGNhc2UgaW5zZW5zaXRpdmUgY29tcGFyaXNvblxyXG4gIGNvbnN0IGNlbGxWYWx1ZSA9IG9wdGlvbnMuY2VsbFZhbHVlLnRvTG93ZXJDYXNlKCk7XHJcbiAgbGV0IHNlYXJjaFRlcm0gPSAoQXJyYXkuaXNBcnJheShvcHRpb25zLnNlYXJjaFRlcm1zKSAmJiBvcHRpb25zLnNlYXJjaFRlcm1zWzBdKSB8fCAnJztcclxuICBpZiAodHlwZW9mIHNlYXJjaFRlcm0gPT09ICdzdHJpbmcnKSB7XHJcbiAgICBzZWFyY2hUZXJtID0gc2VhcmNoVGVybS50b0xvd2VyQ2FzZSgpO1xyXG4gIH1cclxuXHJcbiAgaWYgKG9wdGlvbnMub3BlcmF0b3IgPT09ICcqJyB8fCBvcHRpb25zLm9wZXJhdG9yID09PSBPcGVyYXRvclR5cGUuZW5kc1dpdGgpIHtcclxuICAgIHJldHVybiBjZWxsVmFsdWUuZW5kc1dpdGgoc2VhcmNoVGVybSk7XHJcbiAgfSBlbHNlIGlmICgob3B0aW9ucy5vcGVyYXRvciA9PT0gJycgJiYgb3B0aW9ucy5jZWxsVmFsdWVMYXN0Q2hhciA9PT0gJyonKSB8fCBvcHRpb25zLm9wZXJhdG9yID09PSBPcGVyYXRvclR5cGUuc3RhcnRzV2l0aCkge1xyXG4gICAgcmV0dXJuIGNlbGxWYWx1ZS5zdGFydHNXaXRoKHNlYXJjaFRlcm0pO1xyXG4gIH0gZWxzZSBpZiAob3B0aW9ucy5vcGVyYXRvciA9PT0gJycgfHwgb3B0aW9ucy5vcGVyYXRvciA9PT0gT3BlcmF0b3JUeXBlLmNvbnRhaW5zKSB7XHJcbiAgICByZXR1cm4gKGNlbGxWYWx1ZS5pbmRleE9mKHNlYXJjaFRlcm0pID4gLTEpO1xyXG4gIH1cclxuICByZXR1cm4gdGVzdEZpbHRlckNvbmRpdGlvbihvcHRpb25zLm9wZXJhdG9yIHx8ICc9PScsIGNlbGxWYWx1ZSwgc2VhcmNoVGVybSk7XHJcbn07XHJcbiJdfQ==