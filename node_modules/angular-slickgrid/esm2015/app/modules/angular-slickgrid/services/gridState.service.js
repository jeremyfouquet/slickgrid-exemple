import * as tslib_1 from "tslib";
import * as isequal_ from 'lodash.isequal';
import * as ɵngcc0 from '@angular/core';
const isequal = isequal_; // patch to fix rollup to work
import { ExtensionName, GridStateType, } from './../models/index';
import { ExtensionService } from './extension.service';
import { FilterService } from './filter.service';
import { SortService } from './sort.service';
import { Subject } from 'rxjs';
import { unsubscribeAllObservables } from './utilities';
import { SharedService } from './shared.service';
import { Injectable } from '@angular/core';
let GridStateService = class GridStateService {
    constructor(extensionService, filterService, sharedService, sortService) {
        this.extensionService = extensionService;
        this.filterService = filterService;
        this.sharedService = sharedService;
        this.sortService = sortService;
        this._columns = [];
        this._currentColumns = [];
        this._subscriptions = [];
        this._selectedRowDataContextIds = []; // used with row selection
        this._selectedFilteredRowDataContextIds = []; // used with row selection
        this._wasRecheckedAfterPageChange = true; // used with row selection & pagination
        this.onGridStateChanged = new Subject();
        this._eventHandler = new Slick.EventHandler();
    }
    /** Getter for the Grid Options pulled through the Grid Object */
    get _gridOptions() {
        return (this._grid && this._grid.getOptions) ? this._grid.getOptions() : {};
    }
    get datasetIdPropName() {
        return this._gridOptions.datasetIdPropertyName || 'id';
    }
    /** Getter of the selected data context object IDs */
    get selectedRowDataContextIds() {
        return this._selectedRowDataContextIds;
    }
    /** Setter of the selected data context object IDs */
    set selectedRowDataContextIds(dataContextIds) {
        this._selectedRowDataContextIds = dataContextIds;
        // since this is coming from a preset, we also need to update the filtered IDs
        this._selectedFilteredRowDataContextIds = dataContextIds;
    }
    /**
     * Initialize the Grid State Service
     * @param grid
     */
    init(grid, dataView) {
        this._grid = grid;
        this._dataView = dataView;
        this.subscribeToAllGridChanges(grid);
    }
    /** Dispose of all the SlickGrid & Angular subscriptions */
    dispose() {
        // unsubscribe all SlickGrid events
        this._eventHandler.unsubscribeAll();
        // also unsubscribe all Angular Subscriptions
        this._subscriptions = unsubscribeAllObservables(this._subscriptions);
        this._currentColumns = [];
        this._columns = [];
    }
    /**
     * Get the current grid state (filters/sorters/pagination)
     * @return grid state
     */
    getCurrentGridState(args) {
        const gridState = {
            columns: this.getCurrentColumns(),
            filters: this.getCurrentFilters(),
            sorters: this.getCurrentSorters(),
        };
        const currentPagination = this.getCurrentPagination();
        if (currentPagination) {
            gridState.pagination = currentPagination;
        }
        if (this.hasRowSelectionEnabled()) {
            const currentRowSelection = this.getCurrentRowSelections(args && args.requestRefreshRowFilteredRow);
            if (currentRowSelection) {
                gridState.rowSelection = currentRowSelection;
            }
        }
        return gridState;
    }
    /**
     * Get the Columns (and their state: visibility/position) that are currently applied in the grid
     * @return current columns
     */
    getColumns() {
        return this._columns;
    }
    /**
     * From an array of Grid Column Definitions, get the associated Current Columns
     * @param gridColumns
     */
    getAssociatedCurrentColumns(gridColumns) {
        const currentColumns = [];
        if (gridColumns && Array.isArray(gridColumns)) {
            gridColumns.forEach((column, index) => {
                if (column && column.id) {
                    currentColumns.push({
                        columnId: column.id,
                        cssClass: column.cssClass || '',
                        headerCssClass: column.headerCssClass || '',
                        width: column.width || 0
                    });
                }
            });
        }
        this._currentColumns = currentColumns;
        return currentColumns;
    }
    /**
     * From an array of Current Columns, get the associated Grid Column Definitions
     * @param grid
     * @param currentColumns
     */
    getAssociatedGridColumns(grid, currentColumns) {
        const columns = [];
        const gridColumns = grid.getColumns();
        if (currentColumns && Array.isArray(currentColumns)) {
            currentColumns.forEach((currentColumn, index) => {
                const gridColumn = gridColumns.find((c) => c.id === currentColumn.columnId);
                if (gridColumn && gridColumn.id) {
                    columns.push(Object.assign({}, gridColumn, { cssClass: currentColumn.cssClass, headerCssClass: currentColumn.headerCssClass, width: currentColumn.width }));
                }
            });
        }
        this._columns = columns;
        return columns;
    }
    /**
     * Get the Columns (and their states: visibility/position/width) that are currently applied in the grid
     * @return current columns
     */
    getCurrentColumns() {
        let currentColumns = [];
        if (this._currentColumns && Array.isArray(this._currentColumns) && this._currentColumns.length > 0) {
            currentColumns = this._currentColumns;
        }
        else {
            currentColumns = this.getAssociatedCurrentColumns(this._grid.getColumns());
        }
        return currentColumns;
    }
    /**
     * Get the Filters (and their state, columnId, searchTerm(s)) that are currently applied in the grid
     * @return current filters
     */
    getCurrentFilters() {
        if (this._gridOptions && this._gridOptions.backendServiceApi) {
            const backendService = this._gridOptions.backendServiceApi.service;
            if (backendService && backendService.getCurrentFilters) {
                return backendService.getCurrentFilters();
            }
        }
        else if (this.filterService && this.filterService.getCurrentLocalFilters) {
            return this.filterService.getCurrentLocalFilters();
        }
        return null;
    }
    /**
     * Get current Pagination (and its state, pageNumber, pageSize) that are currently applied in the grid
     * @return current pagination state
     */
    getCurrentPagination() {
        if (this._gridOptions.enablePagination) {
            if (this._gridOptions && this._gridOptions.backendServiceApi) {
                const backendService = this._gridOptions.backendServiceApi.service;
                if (backendService && backendService.getCurrentPagination) {
                    return backendService.getCurrentPagination();
                }
            }
            else {
                return this.sharedService.currentPagination;
            }
        }
        return null;
    }
    /**
     * Get the current Row Selections (and its state, gridRowIndexes, dataContextIds, filteredDataContextIds) that are currently applied in the grid
     * @return current row selection
     */
    getCurrentRowSelections(requestRefreshFilteredRow = true) {
        if (this._grid && this._gridOptions && this._dataView && this.hasRowSelectionEnabled()) {
            if (this._grid.getSelectedRows && this._dataView.mapRowsToIds) {
                let filteredDataContextIds = [];
                const gridRowIndexes = this._dataView.mapIdsToRows(this._selectedRowDataContextIds || []); // note that this will return only what is visible in current page
                const dataContextIds = this._selectedRowDataContextIds;
                // user might request to refresh the filtered selection dataset
                // typically always True, except when "reEvaluateRowSelectionAfterFilterChange" is called and we don't need to refresh the filtered dataset twice
                if (requestRefreshFilteredRow === true) {
                    filteredDataContextIds = this.refreshFilteredRowSelections();
                }
                filteredDataContextIds = this._selectedFilteredRowDataContextIds;
                return { gridRowIndexes, dataContextIds, filteredDataContextIds };
            }
        }
        return null;
    }
    /**
     * Get the current Sorters (and their state, columnId, direction) that are currently applied in the grid
     * @return current sorters
     */
    getCurrentSorters() {
        if (this._gridOptions && this._gridOptions.backendServiceApi) {
            const backendService = this._gridOptions.backendServiceApi.service;
            if (backendService && backendService.getCurrentSorters) {
                return backendService.getCurrentSorters();
            }
        }
        else if (this.sortService && this.sortService.getCurrentLocalSorters) {
            return this.sortService.getCurrentLocalSorters();
        }
        return null;
    }
    /** Check whether the row selection needs to be preserved */
    needToPreserveRowSelection() {
        let preservedRowSelection = false;
        if (this._gridOptions && this._gridOptions.dataView && this._gridOptions.dataView.hasOwnProperty('syncGridSelection')) {
            const syncGridSelection = this._gridOptions.dataView.syncGridSelection;
            if (typeof syncGridSelection === 'boolean') {
                preservedRowSelection = this._gridOptions.dataView.syncGridSelection;
            }
            else {
                preservedRowSelection = syncGridSelection.preserveHidden;
            }
            // if the result is True but the grid is using a Backend Service, we will do an extra flag check the reason is because it might have some unintended behaviors
            // with the BackendServiceApi because technically the data in the page changes the DataView on every page.
            if (preservedRowSelection && this._gridOptions.backendServiceApi && this._gridOptions.dataView.hasOwnProperty('syncGridSelectionWithBackendService')) {
                preservedRowSelection = this._gridOptions.dataView.syncGridSelectionWithBackendService;
            }
        }
        return preservedRowSelection;
    }
    resetColumns(columnDefinitions) {
        const columns = columnDefinitions || this._columns;
        const currentColumns = this.getAssociatedCurrentColumns(columns);
        this.onGridStateChanged.next({ change: { newValues: currentColumns, type: GridStateType.columns }, gridState: this.getCurrentGridState() });
    }
    /** if we use Row Selection or the Checkbox Selector, we need to reset any selection */
    resetRowSelectionWhenRequired() {
        if (!this.needToPreserveRowSelection() && (this._gridOptions.enableRowSelection || this._gridOptions.enableCheckboxSelector)) {
            // this also requires the Row Selection Model to be registered as well
            const rowSelectionExtension = this.extensionService && this.extensionService.getExtensionByName && this.extensionService.getExtensionByName(ExtensionName.rowSelection);
            if (rowSelectionExtension && rowSelectionExtension.instance) {
                this._grid.setSelectedRows([]);
            }
        }
    }
    /**
     * Subscribe to all necessary SlickGrid or Service Events that deals with a Grid change,
     * when triggered, we will publish a Grid State Event with current Grid State
     */
    subscribeToAllGridChanges(grid) {
        // Subscribe to Event Emitter of Filter changed
        this._subscriptions.push(this.filterService.onFilterChanged.subscribe((currentFilters) => {
            this.resetRowSelectionWhenRequired();
            // trigger a Grid State filter change, however don't reevaluate the filtered row selections, we'll do that on the next Grid State change below
            this.onGridStateChanged.next({ change: { newValues: currentFilters, type: GridStateType.filter }, gridState: this.getCurrentGridState({ requestRefreshRowFilteredRow: !this.hasRowSelectionEnabled() }) });
            // when Row Selection is enabled, we also need to re-evaluate the row selection with the leftover filtered dataset
            if (this.hasRowSelectionEnabled()) {
                this.reEvaluateRowSelectionAfterFilterChange();
            }
        }));
        // Subscribe to Event Emitter of Filter cleared
        this._subscriptions.push(this.filterService.onFilterCleared.subscribe(() => {
            this.resetRowSelectionWhenRequired();
            this.onGridStateChanged.next({ change: { newValues: [], type: GridStateType.filter }, gridState: this.getCurrentGridState() });
        }));
        // Subscribe to Event Emitter of Sort changed
        this._subscriptions.push(this.sortService.onSortChanged.subscribe((currentSorters) => {
            this.resetRowSelectionWhenRequired();
            this.onGridStateChanged.next({ change: { newValues: currentSorters, type: GridStateType.sorter }, gridState: this.getCurrentGridState() });
        }));
        // Subscribe to Event Emitter of Sort cleared
        this._subscriptions.push(this.sortService.onSortCleared.subscribe(() => {
            this.resetRowSelectionWhenRequired();
            this.onGridStateChanged.next({ change: { newValues: [], type: GridStateType.sorter }, gridState: this.getCurrentGridState() });
        }));
        // Subscribe to ColumnPicker and/or GridMenu for show/hide Columns visibility changes
        this.bindExtensionAddonEventToGridStateChange(ExtensionName.columnPicker, 'onColumnsChanged');
        this.bindExtensionAddonEventToGridStateChange(ExtensionName.gridMenu, 'onColumnsChanged');
        // subscribe to Column Resize & Reordering
        this.bindSlickGridColumnChangeEventToGridStateChange('onColumnsReordered', grid);
        this.bindSlickGridColumnChangeEventToGridStateChange('onColumnsResized', grid);
        // subscribe to Row Selection changes (when enabled)
        if (this._gridOptions.enableRowSelection || this._gridOptions.enableCheckboxSelector) {
            this.bindSlickGridRowSelectionToGridStateChange();
        }
        // subscribe to HeaderMenu (hide column)
        this._subscriptions.push(this.sharedService.onHeaderMenuHideColumns.subscribe((visibleColumns) => {
            const currentColumns = this.getAssociatedCurrentColumns(visibleColumns);
            this.onGridStateChanged.next({ change: { newValues: currentColumns, type: GridStateType.columns }, gridState: this.getCurrentGridState() });
        }));
    }
    // --
    // private methods
    // ------------------
    /**
     * Bind a SlickGrid Extension Event to a Grid State change event
     * @param extension name
     * @param grid
     */
    bindExtensionAddonEventToGridStateChange(extensionName, eventName) {
        const extension = this.extensionService && this.extensionService.getExtensionByName && this.extensionService.getExtensionByName(extensionName);
        const slickEvent = extension && extension.instance && extension.instance[eventName];
        if (slickEvent && slickEvent.subscribe) {
            this._eventHandler.subscribe(slickEvent, (e, args) => {
                const columns = args && args.columns;
                const currentColumns = this.getAssociatedCurrentColumns(columns);
                this.onGridStateChanged.next({ change: { newValues: currentColumns, type: GridStateType.columns }, gridState: this.getCurrentGridState() });
            });
        }
    }
    /**
     * Bind a Grid Event (of Column changes) to a Grid State change event
     * @param event name
     * @param grid
     */
    bindSlickGridColumnChangeEventToGridStateChange(eventName, grid) {
        const slickGridEvent = grid && grid[eventName];
        if (slickGridEvent && slickGridEvent.subscribe) {
            this._eventHandler.subscribe(slickGridEvent, () => {
                const columns = grid.getColumns();
                const currentColumns = this.getAssociatedCurrentColumns(columns);
                this.onGridStateChanged.next({ change: { newValues: currentColumns, type: GridStateType.columns }, gridState: this.getCurrentGridState() });
            });
        }
    }
    /**
     * Bind a Grid Event of Row Selection change to a Grid State change event
     * For the row selection, we can't just use the getSelectedRows() since this will only return the visible rows shown in the UI which is not enough.
     * The process is much more complex, what we have to do instead is the following
     * 1. when changing a row selection, we'll add the new selection if it's not yet in the global array of selected IDs
     * 2. when deleting a row selection, we'll remove the selection from our global array of selected IDs (unless it came from a page change)
     * 3. if we use Pagination and we change page, we'll keep track with a flag (this flag will be used to skip any deletion when we're changing page)
     * 4. after the Page or DataView is changed or updated, we'll do an extra (and delayed) check to make sure that what we have in our global array of selected IDs is displayed on screen
     */
    bindSlickGridRowSelectionToGridStateChange() {
        if (this._grid && this._gridOptions && this._dataView) {
            this._eventHandler.subscribe(this._dataView.onBeforePagingInfoChanged, () => {
                this._wasRecheckedAfterPageChange = false; // reset the page check flag, to skip deletions on page change (used in code below)
            });
            this._eventHandler.subscribe(this._dataView.onPagingInfoChanged, () => {
                // when user changes page, the selected row indexes might not show up
                // we can check to make sure it is but it has to be in a delay so it happens after the first "onSelectedRowsChanged" is triggered
                setTimeout(() => {
                    const shouldBeSelectedRowIndexes = this._dataView.mapIdsToRows(this._selectedRowDataContextIds || []);
                    const currentSelectedRowIndexes = this._grid.getSelectedRows();
                    if (!isequal(shouldBeSelectedRowIndexes, currentSelectedRowIndexes)) {
                        this._grid.setSelectedRows(shouldBeSelectedRowIndexes);
                    }
                });
            });
            this._eventHandler.subscribe(this._grid.onSelectedRowsChanged, (e, args) => {
                if (Array.isArray(args.rows) && Array.isArray(args.previousSelectedRows)) {
                    const newSelectedRows = args.rows;
                    const prevSelectedRows = args.previousSelectedRows;
                    const newSelectedAdditions = newSelectedRows.filter((i) => prevSelectedRows.indexOf(i) < 0);
                    const newSelectedDeletions = prevSelectedRows.filter((i) => newSelectedRows.indexOf(i) < 0);
                    // deletion might happen when user is changing page, if that is the case then skip the deletion since it's only a visual deletion (current page)
                    // if it's not a page change (when the flag is true), then proceed with the deletion in our global array of selected IDs
                    if (this._wasRecheckedAfterPageChange && newSelectedDeletions.length > 0) {
                        const toDeleteDataIds = this._dataView.mapRowsToIds(newSelectedDeletions) || [];
                        toDeleteDataIds.forEach((removeId) => {
                            this._selectedRowDataContextIds.splice(this._selectedRowDataContextIds.indexOf(removeId), 1);
                        });
                    }
                    // if we have newly added selected row(s), let's update our global array of selected IDs
                    if (newSelectedAdditions.length > 0) {
                        const toAddDataIds = this._dataView.mapRowsToIds(newSelectedAdditions) || [];
                        toAddDataIds.forEach((dataId) => {
                            if (this._selectedRowDataContextIds.indexOf(dataId) === -1) {
                                this._selectedRowDataContextIds.push(dataId);
                            }
                        });
                    }
                    // we set this flag which will be used on the 2nd time the "onSelectedRowsChanged" event is called
                    // when it's the first time, we skip deletion and this is what this flag is for
                    this._wasRecheckedAfterPageChange = true;
                    // form our full selected row IDs, let's make sure these indexes are selected in the grid, if not then let's call a reselect
                    // this could happen if the previous step was a page change
                    const shouldBeSelectedRowIndexes = this._dataView.mapIdsToRows(this._selectedRowDataContextIds || []);
                    const currentSelectedRowIndexes = this._grid.getSelectedRows();
                    if (!isequal(shouldBeSelectedRowIndexes, currentSelectedRowIndexes)) {
                        this._grid.setSelectedRows(shouldBeSelectedRowIndexes);
                    }
                    const filteredDataContextIds = this.refreshFilteredRowSelections();
                    const newValues = { gridRowIndexes: this._grid.getSelectedRows(), dataContextIds: this._selectedRowDataContextIds, filteredDataContextIds };
                    this.onGridStateChanged.next({ change: { newValues, type: GridStateType.rowSelection }, gridState: this.getCurrentGridState() });
                }
            });
        }
    }
    /** Check wether the grid has the Row Selection enabled */
    hasRowSelectionEnabled() {
        const selectionModel = this._grid.getSelectionModel();
        const isRowSelectionEnabled = this._gridOptions.enableRowSelection || this._gridOptions.enableCheckboxSelector;
        return (isRowSelectionEnabled && selectionModel);
    }
    reEvaluateRowSelectionAfterFilterChange() {
        const currentSelectedRowIndexes = this._grid.getSelectedRows();
        const previousSelectedFilteredRowDataContextIds = this._selectedFilteredRowDataContextIds.slice();
        const filteredDataContextIds = this.refreshFilteredRowSelections();
        // when selection changed, we'll send a Grid State event with the selection changes
        if (!isequal(this._selectedFilteredRowDataContextIds, previousSelectedFilteredRowDataContextIds)) {
            const newValues = { gridRowIndexes: currentSelectedRowIndexes, dataContextIds: this._selectedRowDataContextIds, filteredDataContextIds };
            this.onGridStateChanged.next({ change: { newValues, type: GridStateType.rowSelection }, gridState: this.getCurrentGridState({ requestRefreshRowFilteredRow: false }) });
        }
    }
    /** When a Filter is triggered or when user request it, we will refresh the filtered selection array and return it */
    refreshFilteredRowSelections() {
        let tmpFilteredArray = [];
        const filteredDataset = this._dataView.getFilteredItems() || [];
        if (Array.isArray(this._selectedRowDataContextIds)) {
            const selectedFilteredRowDataContextIds = [...this._selectedRowDataContextIds]; // take a fresh copy of all selections before filtering the row ids
            tmpFilteredArray = selectedFilteredRowDataContextIds.filter((selectedRowId) => {
                return filteredDataset.findIndex((item) => item[this.datasetIdPropName] === selectedRowId) > -1;
            });
            this._selectedFilteredRowDataContextIds = tmpFilteredArray;
        }
        return tmpFilteredArray;
    }
};
GridStateService.ɵfac = function GridStateService_Factory(t) { return new (t || GridStateService)(ɵngcc0.ɵɵinject(ExtensionService), ɵngcc0.ɵɵinject(FilterService), ɵngcc0.ɵɵinject(SharedService), ɵngcc0.ɵɵinject(SortService)); };
GridStateService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: GridStateService, factory: GridStateService.ɵfac });
GridStateService.ctorParameters = () => [
    { type: ExtensionService },
    { type: FilterService },
    { type: SharedService },
    { type: SortService }
];
/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(GridStateService, [{
        type: Injectable
    }], function () { return [{ type: ExtensionService }, { type: FilterService }, { type: SharedService }, { type: SortService }]; }, null); })();
export { GridStateService };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ3JpZFN0YXRlLnNlcnZpY2UuanMiLCJzb3VyY2VzIjpbIm5nOi9hbmd1bGFyLXNsaWNrZ3JpZC9hcHAvbW9kdWxlcy9hbmd1bGFyLXNsaWNrZ3JpZC9zZXJ2aWNlcy9ncmlkU3RhdGUuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxLQUFLLFFBQVEsTUFBTSxnQkFBZ0IsQ0FBQzs7QUFDM0MsTUFBTSxPQUFPLEdBQUcsUUFBUSxDQUFDLENBQUMsOEJBQThCO0FBRXhELE9BQU8sRUFPTCxhQUFhLEVBSWIsYUFBYSxHQUVkLE1BQU0sbUJBQW1CLENBQUM7QUFDM0IsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDdkQsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBQ2pELE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUM3QyxPQUFPLEVBQUUsT0FBTyxFQUFnQixNQUFNLE1BQU0sQ0FBQztBQUM3QyxPQUFPLEVBQUUseUJBQXlCLEVBQUUsTUFBTSxhQUFhLENBQUM7QUFDeEQsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBQ2pELE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFNM0MsSUFBYSxnQkFBZ0IsR0FBN0IsTUFBYSxnQkFBZ0I7QUFDN0IsSUFXRSxZQUNVLGdCQUFrQyxFQUNsQyxhQUE0QixFQUM1QixhQUE0QixFQUM1QixXQUF3QjtBQUNqQyxRQUpTLHFCQUFnQixHQUFoQixnQkFBZ0IsQ0FBa0I7QUFBQyxRQUNuQyxrQkFBYSxHQUFiLGFBQWEsQ0FBZTtBQUFDLFFBQzdCLGtCQUFhLEdBQWIsYUFBYSxDQUFlO0FBQUMsUUFDN0IsZ0JBQVcsR0FBWCxXQUFXLENBQWE7QUFDcEMsUUFmVSxhQUFRLEdBQWEsRUFBRSxDQUFDO0FBQ2xDLFFBQVUsb0JBQWUsR0FBb0IsRUFBRSxDQUFDO0FBQ2hELFFBRVUs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QUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFNQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFZQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFIQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBZEEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFHQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFRQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBR0EsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBRUEsQUFHQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBR0EsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBR0EsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBSUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBR0EsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBRUEsQUFHQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFFQSxBQUdBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBR0EsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBRUEsQUFHQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQ0EsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQ0EsQUFBQSxBQUVBLEFBR0EsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBSUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUFBLEFBRUEsQUFJQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUFBLEFBRUEsQUFRQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUFBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUVBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUFBLEFBRUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBdmRBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUNBLEFBQUEsQUFoQkEsQUFBQSxBQURBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFvZUEsQUFwZUEsQUFBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGlzZXF1YWxfIGZyb20gJ2xvZGFzaC5pc2VxdWFsJztcclxuY29uc3QgaXNlcXVhbCA9IGlzZXF1YWxfOyAvLyBwYXRjaCB0byBmaXggcm9sbHVwIHRvIHdvcmtcclxuXHJcbmltcG9ydCB7XHJcbiAgQ29sdW1uLFxyXG4gIEN1cnJlbnRDb2x1bW4sXHJcbiAgQ3VycmVudEZpbHRlcixcclxuICBDdXJyZW50UGFnaW5hdGlvbixcclxuICBDdXJyZW50Um93U2VsZWN0aW9uLFxyXG4gIEN1cnJlbnRTb3J0ZXIsXHJcbiAgRXh0ZW5zaW9uTmFtZSxcclxuICBHcmlkT3B0aW9uLFxyXG4gIEdyaWRTdGF0ZSxcclxuICBHcmlkU3RhdGVDaGFuZ2UsXHJcbiAgR3JpZFN0YXRlVHlwZSxcclxuICBTbGlja0V2ZW50SGFuZGxlcixcclxufSBmcm9tICcuLy4uL21vZGVscy9pbmRleCc7XHJcbmltcG9ydCB7IEV4dGVuc2lvblNlcnZpY2UgfSBmcm9tICcuL2V4dGVuc2lvbi5zZXJ2aWNlJztcclxuaW1wb3J0IHsgRmlsdGVyU2VydmljZSB9IGZyb20gJy4vZmlsdGVyLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBTb3J0U2VydmljZSB9IGZyb20gJy4vc29ydC5zZXJ2aWNlJztcclxuaW1wb3J0IHsgU3ViamVjdCwgU3Vic2NyaXB0aW9uIH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IHVuc3Vic2NyaWJlQWxsT2JzZXJ2YWJsZXMgfSBmcm9tICcuL3V0aWxpdGllcyc7XHJcbmltcG9ydCB7IFNoYXJlZFNlcnZpY2UgfSBmcm9tICcuL3NoYXJlZC5zZXJ2aWNlJztcclxuaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5cclxuLy8gdXNpbmcgZXh0ZXJuYWwgbm9uLXR5cGVkIGpzIGxpYnJhcmllc1xyXG5kZWNsYXJlIGNvbnN0IFNsaWNrOiBhbnk7XHJcblxyXG5ASW5qZWN0YWJsZSgpXHJcbmV4cG9ydCBjbGFzcyBHcmlkU3RhdGVTZXJ2aWNlIHtcclxuICBwcml2YXRlIF9ldmVudEhhbmRsZXI6IFNsaWNrRXZlbnRIYW5kbGVyO1xyXG4gIHByaXZhdGUgX2NvbHVtbnM6IENvbHVtbltdID0gW107XHJcbiAgcHJpdmF0ZSBfY3VycmVudENvbHVtbnM6IEN1cnJlbnRDb2x1bW5bXSA9IFtdO1xyXG4gIHByaXZhdGUgX2RhdGFWaWV3OiBhbnk7XHJcbiAgcHJpdmF0ZSBfZ3JpZDogYW55O1xyXG4gIHByaXZhdGUgX3N1YnNjcmlwdGlvbnM6IFN1YnNjcmlwdGlvbltdID0gW107XHJcbiAgcHJpdmF0ZSBfc2VsZWN0ZWRSb3dEYXRhQ29udGV4dElkczogQXJyYXk8bnVtYmVyIHwgc3RyaW5nPiB8IHVuZGVmaW5lZCA9IFtdOyAvLyB1c2VkIHdpdGggcm93IHNlbGVjdGlvblxyXG4gIHByaXZhdGUgX3NlbGVjdGVkRmlsdGVyZWRSb3dEYXRhQ29udGV4dElkczogQXJyYXk8bnVtYmVyIHwgc3RyaW5nPiB8IHVuZGVmaW5lZCA9IFtdOyAvLyB1c2VkIHdpdGggcm93IHNlbGVjdGlvblxyXG4gIHByaXZhdGUgX3dhc1JlY2hlY2tlZEFmdGVyUGFnZUNoYW5nZSA9IHRydWU7IC8vIHVzZWQgd2l0aCByb3cgc2VsZWN0aW9uICYgcGFnaW5hdGlvblxyXG4gIG9uR3JpZFN0YXRlQ2hhbmdlZCA9IG5ldyBTdWJqZWN0PEdyaWRTdGF0ZUNoYW5nZT4oKTtcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwcml2YXRlIGV4dGVuc2lvblNlcnZpY2U6IEV4dGVuc2lvblNlcnZpY2UsXHJcbiAgICBwcml2YXRlIGZpbHRlclNlcnZpY2U6IEZpbHRlclNlcnZpY2UsXHJcbiAgICBwcml2YXRlIHNoYXJlZFNlcnZpY2U6IFNoYXJlZFNlcnZpY2UsXHJcbiAgICBwcml2YXRlIHNvcnRTZXJ2aWNlOiBTb3J0U2VydmljZVxyXG4gICkge1xyXG4gICAgdGhpcy5fZXZlbnRIYW5kbGVyID0gbmV3IFNsaWNrLkV2ZW50SGFuZGxlcigpO1xyXG4gIH1cclxuXHJcbiAgLyoqIEdldHRlciBmb3IgdGhlIEdyaWQgT3B0aW9ucyBwdWxsZWQgdGhyb3VnaCB0aGUgR3JpZCBPYmplY3QgKi9cclxuICBwcml2YXRlIGdldCBfZ3JpZE9wdGlvbnMoKTogR3JpZE9wdGlvbiB7XHJcbiAgICByZXR1cm4gKHRoaXMuX2dyaWQgJiYgdGhpcy5fZ3JpZC5nZXRPcHRpb25zKSA/IHRoaXMuX2dyaWQuZ2V0T3B0aW9ucygpIDoge307XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldCBkYXRhc2V0SWRQcm9wTmFtZSgpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIHRoaXMuX2dyaWRPcHRpb25zLmRhdGFzZXRJZFByb3BlcnR5TmFtZSB8fCAnaWQnO1xyXG4gIH1cclxuXHJcbiAgLyoqIEdldHRlciBvZiB0aGUgc2VsZWN0ZWQgZGF0YSBjb250ZXh0IG9iamVjdCBJRHMgKi9cclxuICBnZXQgc2VsZWN0ZWRSb3dEYXRhQ29udGV4dElkcygpOiBBcnJheTxudW1iZXIgfCBzdHJpbmc+IHwgdW5kZWZpbmVkIHtcclxuICAgIHJldHVybiB0aGlzLl9zZWxlY3RlZFJvd0RhdGFDb250ZXh0SWRzO1xyXG4gIH1cclxuXHJcbiAgLyoqIFNldHRlciBvZiB0aGUgc2VsZWN0ZWQgZGF0YSBjb250ZXh0IG9iamVjdCBJRHMgKi9cclxuICBzZXQgc2VsZWN0ZWRSb3dEYXRhQ29udGV4dElkcyhkYXRhQ29udGV4dElkczogQXJyYXk8bnVtYmVyIHwgc3RyaW5nPiB8IHVuZGVmaW5lZCkge1xyXG4gICAgdGhpcy5fc2VsZWN0ZWRSb3dEYXRhQ29udGV4dElkcyA9IGRhdGFDb250ZXh0SWRzO1xyXG5cclxuICAgIC8vIHNpbmNlIHRoaXMgaXMgY29taW5nIGZyb20gYSBwcmVzZXQsIHdlIGFsc28gbmVlZCB0byB1cGRhdGUgdGhlIGZpbHRlcmVkIElEc1xyXG4gICAgdGhpcy5fc2VsZWN0ZWRGaWx0ZXJlZFJvd0RhdGFDb250ZXh0SWRzID0gZGF0YUNvbnRleHRJZHM7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBJbml0aWFsaXplIHRoZSBHcmlkIFN0YXRlIFNlcnZpY2VcclxuICAgKiBAcGFyYW0gZ3JpZFxyXG4gICAqL1xyXG4gIGluaXQoZ3JpZDogYW55LCBkYXRhVmlldzogYW55KTogdm9pZCB7XHJcbiAgICB0aGlzLl9ncmlkID0gZ3JpZDtcclxuICAgIHRoaXMuX2RhdGFWaWV3ID0gZGF0YVZpZXc7XHJcbiAgICB0aGlzLnN1YnNjcmliZVRvQWxsR3JpZENoYW5nZXMoZ3JpZCk7XHJcbiAgfVxyXG5cclxuICAvKiogRGlzcG9zZSBvZiBhbGwgdGhlIFNsaWNrR3JpZCAmIEFuZ3VsYXIgc3Vic2NyaXB0aW9ucyAqL1xyXG4gIGRpc3Bvc2UoKSB7XHJcbiAgICAvLyB1bnN1YnNjcmliZSBhbGwgU2xpY2tHcmlkIGV2ZW50c1xyXG4gICAgdGhpcy5fZXZlbnRIYW5kbGVyLnVuc3Vic2NyaWJlQWxsKCk7XHJcblxyXG4gICAgLy8gYWxzbyB1bnN1YnNjcmliZSBhbGwgQW5ndWxhciBTdWJzY3JpcHRpb25zXHJcbiAgICB0aGlzLl9zdWJzY3JpcHRpb25zID0gdW5zdWJzY3JpYmVBbGxPYnNlcnZhYmxlcyh0aGlzLl9zdWJzY3JpcHRpb25zKTtcclxuXHJcbiAgICB0aGlzLl9jdXJyZW50Q29sdW1ucyA9IFtdO1xyXG4gICAgdGhpcy5fY29sdW1ucyA9IFtdO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IHRoZSBjdXJyZW50IGdyaWQgc3RhdGUgKGZpbHRlcnMvc29ydGVycy9wYWdpbmF0aW9uKVxyXG4gICAqIEByZXR1cm4gZ3JpZCBzdGF0ZVxyXG4gICAqL1xyXG4gIGdldEN1cnJlbnRHcmlkU3RhdGUoYXJncz86IHsgcmVxdWVzdFJlZnJlc2hSb3dGaWx0ZXJlZFJvdz86IGJvb2xlYW4gfSk6IEdyaWRTdGF0ZSB7XHJcbiAgICBjb25zdCBncmlkU3RhdGU6IEdyaWRTdGF0ZSA9IHtcclxuICAgICAgY29sdW1uczogdGhpcy5nZXRDdXJyZW50Q29sdW1ucygpLFxyXG4gICAgICBmaWx0ZXJzOiB0aGlzLmdldEN1cnJlbnRGaWx0ZXJzKCksXHJcbiAgICAgIHNvcnRlcnM6IHRoaXMuZ2V0Q3VycmVudFNvcnRlcnMoKSxcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgY3VycmVudFBhZ2luYXRpb24gPSB0aGlzLmdldEN1cnJlbnRQYWdpbmF0aW9uKCk7XHJcbiAgICBpZiAoY3VycmVudFBhZ2luYXRpb24pIHtcclxuICAgICAgZ3JpZFN0YXRlLnBhZ2luYXRpb24gPSBjdXJyZW50UGFnaW5hdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5oYXNSb3dTZWxlY3Rpb25FbmFibGVkKCkpIHtcclxuICAgICAgY29uc3QgY3VycmVudFJvd1NlbGVjdGlvbiA9IHRoaXMuZ2V0Q3VycmVudFJvd1NlbGVjdGlvbnMoYXJncyAmJiBhcmdzLnJlcXVlc3RSZWZyZXNoUm93RmlsdGVyZWRSb3cpO1xyXG4gICAgICBpZiAoY3VycmVudFJvd1NlbGVjdGlvbikge1xyXG4gICAgICAgIGdyaWRTdGF0ZS5yb3dTZWxlY3Rpb24gPSBjdXJyZW50Um93U2VsZWN0aW9uO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZ3JpZFN0YXRlO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IHRoZSBDb2x1bW5zIChhbmQgdGhlaXIgc3RhdGU6IHZpc2liaWxpdHkvcG9zaXRpb24pIHRoYXQgYXJlIGN1cnJlbnRseSBhcHBsaWVkIGluIHRoZSBncmlkXHJcbiAgICogQHJldHVybiBjdXJyZW50IGNvbHVtbnNcclxuICAgKi9cclxuICBnZXRDb2x1bW5zKCk6IENvbHVtbltdIHtcclxuICAgIHJldHVybiB0aGlzLl9jb2x1bW5zO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRnJvbSBhbiBhcnJheSBvZiBHcmlkIENvbHVtbiBEZWZpbml0aW9ucywgZ2V0IHRoZSBhc3NvY2lhdGVkIEN1cnJlbnQgQ29sdW1uc1xyXG4gICAqIEBwYXJhbSBncmlkQ29sdW1uc1xyXG4gICAqL1xyXG4gIGdldEFzc29jaWF0ZWRDdXJyZW50Q29sdW1ucyhncmlkQ29sdW1uczogQ29sdW1uW10pOiBDdXJyZW50Q29sdW1uW10ge1xyXG4gICAgY29uc3QgY3VycmVudENvbHVtbnM6IEN1cnJlbnRDb2x1bW5bXSA9IFtdO1xyXG5cclxuICAgIGlmIChncmlkQ29sdW1ucyAmJiBBcnJheS5pc0FycmF5KGdyaWRDb2x1bW5zKSkge1xyXG4gICAgICBncmlkQ29sdW1ucy5mb3JFYWNoKChjb2x1bW46IENvbHVtbiwgaW5kZXg6IG51bWJlcikgPT4ge1xyXG4gICAgICAgIGlmIChjb2x1bW4gJiYgY29sdW1uLmlkKSB7XHJcbiAgICAgICAgICBjdXJyZW50Q29sdW1ucy5wdXNoKHtcclxuICAgICAgICAgICAgY29sdW1uSWQ6IGNvbHVtbi5pZCBhcyBzdHJpbmcsXHJcbiAgICAgICAgICAgIGNzc0NsYXNzOiBjb2x1bW4uY3NzQ2xhc3MgfHwgJycsXHJcbiAgICAgICAgICAgIGhlYWRlckNzc0NsYXNzOiBjb2x1bW4uaGVhZGVyQ3NzQ2xhc3MgfHwgJycsXHJcbiAgICAgICAgICAgIHdpZHRoOiBjb2x1bW4ud2lkdGggfHwgMFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIHRoaXMuX2N1cnJlbnRDb2x1bW5zID0gY3VycmVudENvbHVtbnM7XHJcbiAgICByZXR1cm4gY3VycmVudENvbHVtbnM7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBGcm9tIGFuIGFycmF5IG9mIEN1cnJlbnQgQ29sdW1ucywgZ2V0IHRoZSBhc3NvY2lhdGVkIEdyaWQgQ29sdW1uIERlZmluaXRpb25zXHJcbiAgICogQHBhcmFtIGdyaWRcclxuICAgKiBAcGFyYW0gY3VycmVudENvbHVtbnNcclxuICAgKi9cclxuICBnZXRBc3NvY2lhdGVkR3JpZENvbHVtbnMoZ3JpZDogYW55LCBjdXJyZW50Q29sdW1uczogQ3VycmVudENvbHVtbltdKTogQ29sdW1uW10ge1xyXG4gICAgY29uc3QgY29sdW1uczogQ29sdW1uW10gPSBbXTtcclxuICAgIGNvbnN0IGdyaWRDb2x1bW5zOiBDb2x1bW5bXSA9IGdyaWQuZ2V0Q29sdW1ucygpO1xyXG5cclxuICAgIGlmIChjdXJyZW50Q29sdW1ucyAmJiBBcnJheS5pc0FycmF5KGN1cnJlbnRDb2x1bW5zKSkge1xyXG4gICAgICBjdXJyZW50Q29sdW1ucy5mb3JFYWNoKChjdXJyZW50Q29sdW1uOiBDdXJyZW50Q29sdW1uLCBpbmRleDogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgY29uc3QgZ3JpZENvbHVtbjogQ29sdW1uID0gZ3JpZENvbHVtbnMuZmluZCgoYzogQ29sdW1uKSA9PiBjLmlkID09PSBjdXJyZW50Q29sdW1uLmNvbHVtbklkKTtcclxuICAgICAgICBpZiAoZ3JpZENvbHVtbiAmJiBncmlkQ29sdW1uLmlkKSB7XHJcbiAgICAgICAgICBjb2x1bW5zLnB1c2goe1xyXG4gICAgICAgICAgICAuLi5ncmlkQ29sdW1uLFxyXG4gICAgICAgICAgICBjc3NDbGFzczogY3VycmVudENvbHVtbi5jc3NDbGFzcyxcclxuICAgICAgICAgICAgaGVhZGVyQ3NzQ2xhc3M6IGN1cnJlbnRDb2x1bW4uaGVhZGVyQ3NzQ2xhc3MsXHJcbiAgICAgICAgICAgIHdpZHRoOiBjdXJyZW50Q29sdW1uLndpZHRoXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgdGhpcy5fY29sdW1ucyA9IGNvbHVtbnM7XHJcbiAgICByZXR1cm4gY29sdW1ucztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCB0aGUgQ29sdW1ucyAoYW5kIHRoZWlyIHN0YXRlczogdmlzaWJpbGl0eS9wb3NpdGlvbi93aWR0aCkgdGhhdCBhcmUgY3VycmVudGx5IGFwcGxpZWQgaW4gdGhlIGdyaWRcclxuICAgKiBAcmV0dXJuIGN1cnJlbnQgY29sdW1uc1xyXG4gICAqL1xyXG4gIGdldEN1cnJlbnRDb2x1bW5zKCk6IEN1cnJlbnRDb2x1bW5bXSB7XHJcbiAgICBsZXQgY3VycmVudENvbHVtbnM6IEN1cnJlbnRDb2x1bW5bXSA9IFtdO1xyXG4gICAgaWYgKHRoaXMuX2N1cnJlbnRDb2x1bW5zICYmIEFycmF5LmlzQXJyYXkodGhpcy5fY3VycmVudENvbHVtbnMpICYmIHRoaXMuX2N1cnJlbnRDb2x1bW5zLmxlbmd0aCA+IDApIHtcclxuICAgICAgY3VycmVudENvbHVtbnMgPSB0aGlzLl9jdXJyZW50Q29sdW1ucztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGN1cnJlbnRDb2x1bW5zID0gdGhpcy5nZXRBc3NvY2lhdGVkQ3VycmVudENvbHVtbnModGhpcy5fZ3JpZC5nZXRDb2x1bW5zKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBjdXJyZW50Q29sdW1ucztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCB0aGUgRmlsdGVycyAoYW5kIHRoZWlyIHN0YXRlLCBjb2x1bW5JZCwgc2VhcmNoVGVybShzKSkgdGhhdCBhcmUgY3VycmVudGx5IGFwcGxpZWQgaW4gdGhlIGdyaWRcclxuICAgKiBAcmV0dXJuIGN1cnJlbnQgZmlsdGVyc1xyXG4gICAqL1xyXG4gIGdldEN1cnJlbnRGaWx0ZXJzKCk6IEN1cnJlbnRGaWx0ZXJbXSB8IG51bGwge1xyXG4gICAgaWYgKHRoaXMuX2dyaWRPcHRpb25zICYmIHRoaXMuX2dyaWRPcHRpb25zLmJhY2tlbmRTZXJ2aWNlQXBpKSB7XHJcbiAgICAgIGNvbnN0IGJhY2tlbmRTZXJ2aWNlID0gdGhpcy5fZ3JpZE9wdGlvbnMuYmFja2VuZFNlcnZpY2VBcGkuc2VydmljZTtcclxuICAgICAgaWYgKGJhY2tlbmRTZXJ2aWNlICYmIGJhY2tlbmRTZXJ2aWNlLmdldEN1cnJlbnRGaWx0ZXJzKSB7XHJcbiAgICAgICAgcmV0dXJuIGJhY2tlbmRTZXJ2aWNlLmdldEN1cnJlbnRGaWx0ZXJzKCkgYXMgQ3VycmVudEZpbHRlcltdO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuZmlsdGVyU2VydmljZSAmJiB0aGlzLmZpbHRlclNlcnZpY2UuZ2V0Q3VycmVudExvY2FsRmlsdGVycykge1xyXG4gICAgICByZXR1cm4gdGhpcy5maWx0ZXJTZXJ2aWNlLmdldEN1cnJlbnRMb2NhbEZpbHRlcnMoKTtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IGN1cnJlbnQgUGFnaW5hdGlvbiAoYW5kIGl0cyBzdGF0ZSwgcGFnZU51bWJlciwgcGFnZVNpemUpIHRoYXQgYXJlIGN1cnJlbnRseSBhcHBsaWVkIGluIHRoZSBncmlkXHJcbiAgICogQHJldHVybiBjdXJyZW50IHBhZ2luYXRpb24gc3RhdGVcclxuICAgKi9cclxuICBnZXRDdXJyZW50UGFnaW5hdGlvbigpOiBDdXJyZW50UGFnaW5hdGlvbiB8IG51bGwge1xyXG4gICAgaWYgKHRoaXMuX2dyaWRPcHRpb25zLmVuYWJsZVBhZ2luYXRpb24pIHtcclxuICAgICAgaWYgKHRoaXMuX2dyaWRPcHRpb25zICYmIHRoaXMuX2dyaWRPcHRpb25zLmJhY2tlbmRTZXJ2aWNlQXBpKSB7XHJcbiAgICAgICAgY29uc3QgYmFja2VuZFNlcnZpY2UgPSB0aGlzLl9ncmlkT3B0aW9ucy5iYWNrZW5kU2VydmljZUFwaS5zZXJ2aWNlO1xyXG4gICAgICAgIGlmIChiYWNrZW5kU2VydmljZSAmJiBiYWNrZW5kU2VydmljZS5nZXRDdXJyZW50UGFnaW5hdGlvbikge1xyXG4gICAgICAgICAgcmV0dXJuIGJhY2tlbmRTZXJ2aWNlLmdldEN1cnJlbnRQYWdpbmF0aW9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNoYXJlZFNlcnZpY2UuY3VycmVudFBhZ2luYXRpb247XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IHRoZSBjdXJyZW50IFJvdyBTZWxlY3Rpb25zIChhbmQgaXRzIHN0YXRlLCBncmlkUm93SW5kZXhlcywgZGF0YUNvbnRleHRJZHMsIGZpbHRlcmVkRGF0YUNvbnRleHRJZHMpIHRoYXQgYXJlIGN1cnJlbnRseSBhcHBsaWVkIGluIHRoZSBncmlkXHJcbiAgICogQHJldHVybiBjdXJyZW50IHJvdyBzZWxlY3Rpb25cclxuICAgKi9cclxuICBnZXRDdXJyZW50Um93U2VsZWN0aW9ucyhyZXF1ZXN0UmVmcmVzaEZpbHRlcmVkUm93ID0gdHJ1ZSk6IEN1cnJlbnRSb3dTZWxlY3Rpb24gfCBudWxsIHtcclxuICAgIGlmICh0aGlzLl9ncmlkICYmIHRoaXMuX2dyaWRPcHRpb25zICYmIHRoaXMuX2RhdGFWaWV3ICYmIHRoaXMuaGFzUm93U2VsZWN0aW9uRW5hYmxlZCgpKSB7XHJcbiAgICAgIGlmICh0aGlzLl9ncmlkLmdldFNlbGVjdGVkUm93cyAmJiB0aGlzLl9kYXRhVmlldy5tYXBSb3dzVG9JZHMpIHtcclxuICAgICAgICBsZXQgZmlsdGVyZWREYXRhQ29udGV4dElkczogQXJyYXk8bnVtYmVyIHwgc3RyaW5nPiB8IHVuZGVmaW5lZCA9IFtdO1xyXG4gICAgICAgIGNvbnN0IGdyaWRSb3dJbmRleGVzOiBudW1iZXJbXSA9IHRoaXMuX2RhdGFWaWV3Lm1hcElkc1RvUm93cyh0aGlzLl9zZWxlY3RlZFJvd0RhdGFDb250ZXh0SWRzIHx8IFtdKTsgLy8gbm90ZSB0aGF0IHRoaXMgd2lsbCByZXR1cm4gb25seSB3aGF0IGlzIHZpc2libGUgaW4gY3VycmVudCBwYWdlXHJcbiAgICAgICAgY29uc3QgZGF0YUNvbnRleHRJZHM6IEFycmF5PG51bWJlciB8IHN0cmluZz4gfCB1bmRlZmluZWQgPSB0aGlzLl9zZWxlY3RlZFJvd0RhdGFDb250ZXh0SWRzO1xyXG5cclxuICAgICAgICAvLyB1c2VyIG1pZ2h0IHJlcXVlc3QgdG8gcmVmcmVzaCB0aGUgZmlsdGVyZWQgc2VsZWN0aW9uIGRhdGFzZXRcclxuICAgICAgICAvLyB0eXBpY2FsbHkgYWx3YXlzIFRydWUsIGV4Y2VwdCB3aGVuIFwicmVFdmFsdWF0ZVJvd1NlbGVjdGlvbkFmdGVyRmlsdGVyQ2hhbmdlXCIgaXMgY2FsbGVkIGFuZCB3ZSBkb24ndCBuZWVkIHRvIHJlZnJlc2ggdGhlIGZpbHRlcmVkIGRhdGFzZXQgdHdpY2VcclxuICAgICAgICBpZiAocmVxdWVzdFJlZnJlc2hGaWx0ZXJlZFJvdyA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgZmlsdGVyZWREYXRhQ29udGV4dElkcyA9IHRoaXMucmVmcmVzaEZpbHRlcmVkUm93U2VsZWN0aW9ucygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaWx0ZXJlZERhdGFDb250ZXh0SWRzID0gdGhpcy5fc2VsZWN0ZWRGaWx0ZXJlZFJvd0RhdGFDb250ZXh0SWRzO1xyXG5cclxuICAgICAgICByZXR1cm4geyBncmlkUm93SW5kZXhlcywgZGF0YUNvbnRleHRJZHMsIGZpbHRlcmVkRGF0YUNvbnRleHRJZHMgfTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXQgdGhlIGN1cnJlbnQgU29ydGVycyAoYW5kIHRoZWlyIHN0YXRlLCBjb2x1bW5JZCwgZGlyZWN0aW9uKSB0aGF0IGFyZSBjdXJyZW50bHkgYXBwbGllZCBpbiB0aGUgZ3JpZFxyXG4gICAqIEByZXR1cm4gY3VycmVudCBzb3J0ZXJzXHJcbiAgICovXHJcbiAgZ2V0Q3VycmVudFNvcnRlcnMoKTogQ3VycmVudFNvcnRlcltdIHwgbnVsbCB7XHJcbiAgICBpZiAodGhpcy5fZ3JpZE9wdGlvbnMgJiYgdGhpcy5fZ3JpZE9wdGlvbnMuYmFja2VuZFNlcnZpY2VBcGkpIHtcclxuICAgICAgY29uc3QgYmFja2VuZFNlcnZpY2UgPSB0aGlzLl9ncmlkT3B0aW9ucy5iYWNrZW5kU2VydmljZUFwaS5zZXJ2aWNlO1xyXG4gICAgICBpZiAoYmFja2VuZFNlcnZpY2UgJiYgYmFja2VuZFNlcnZpY2UuZ2V0Q3VycmVudFNvcnRlcnMpIHtcclxuICAgICAgICByZXR1cm4gYmFja2VuZFNlcnZpY2UuZ2V0Q3VycmVudFNvcnRlcnMoKSBhcyBDdXJyZW50U29ydGVyW107XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAodGhpcy5zb3J0U2VydmljZSAmJiB0aGlzLnNvcnRTZXJ2aWNlLmdldEN1cnJlbnRMb2NhbFNvcnRlcnMpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuc29ydFNlcnZpY2UuZ2V0Q3VycmVudExvY2FsU29ydGVycygpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICAvKiogQ2hlY2sgd2hldGhlciB0aGUgcm93IHNlbGVjdGlvbiBuZWVkcyB0byBiZSBwcmVzZXJ2ZWQgKi9cclxuICBuZWVkVG9QcmVzZXJ2ZVJvd1NlbGVjdGlvbigpOiBib29sZWFuIHtcclxuICAgIGxldCBwcmVzZXJ2ZWRSb3dTZWxlY3Rpb24gPSBmYWxzZTtcclxuICAgIGlmICh0aGlzLl9ncmlkT3B0aW9ucyAmJiB0aGlzLl9ncmlkT3B0aW9ucy5kYXRhVmlldyAmJiB0aGlzLl9ncmlkT3B0aW9ucy5kYXRhVmlldy5oYXNPd25Qcm9wZXJ0eSgnc3luY0dyaWRTZWxlY3Rpb24nKSkge1xyXG4gICAgICBjb25zdCBzeW5jR3JpZFNlbGVjdGlvbiA9IHRoaXMuX2dyaWRPcHRpb25zLmRhdGFWaWV3LnN5bmNHcmlkU2VsZWN0aW9uO1xyXG4gICAgICBpZiAodHlwZW9mIHN5bmNHcmlkU2VsZWN0aW9uID09PSAnYm9vbGVhbicpIHtcclxuICAgICAgICBwcmVzZXJ2ZWRSb3dTZWxlY3Rpb24gPSB0aGlzLl9ncmlkT3B0aW9ucy5kYXRhVmlldy5zeW5jR3JpZFNlbGVjdGlvbiBhcyBib29sZWFuO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHByZXNlcnZlZFJvd1NlbGVjdGlvbiA9IHN5bmNHcmlkU2VsZWN0aW9uLnByZXNlcnZlSGlkZGVuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBpZiB0aGUgcmVzdWx0IGlzIFRydWUgYnV0IHRoZSBncmlkIGlzIHVzaW5nIGEgQmFja2VuZCBTZXJ2aWNlLCB3ZSB3aWxsIGRvIGFuIGV4dHJhIGZsYWcgY2hlY2sgdGhlIHJlYXNvbiBpcyBiZWNhdXNlIGl0IG1pZ2h0IGhhdmUgc29tZSB1bmludGVuZGVkIGJlaGF2aW9yc1xyXG4gICAgICAvLyB3aXRoIHRoZSBCYWNrZW5kU2VydmljZUFwaSBiZWNhdXNlIHRlY2huaWNhbGx5IHRoZSBkYXRhIGluIHRoZSBwYWdlIGNoYW5nZXMgdGhlIERhdGFWaWV3IG9uIGV2ZXJ5IHBhZ2UuXHJcbiAgICAgIGlmIChwcmVzZXJ2ZWRSb3dTZWxlY3Rpb24gJiYgdGhpcy5fZ3JpZE9wdGlvbnMuYmFja2VuZFNlcnZpY2VBcGkgJiYgdGhpcy5fZ3JpZE9wdGlvbnMuZGF0YVZpZXcuaGFzT3duUHJvcGVydHkoJ3N5bmNHcmlkU2VsZWN0aW9uV2l0aEJhY2tlbmRTZXJ2aWNlJykpIHtcclxuICAgICAgICBwcmVzZXJ2ZWRSb3dTZWxlY3Rpb24gPSB0aGlzLl9ncmlkT3B0aW9ucy5kYXRhVmlldy5zeW5jR3JpZFNlbGVjdGlvbldpdGhCYWNrZW5kU2VydmljZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHByZXNlcnZlZFJvd1NlbGVjdGlvbjtcclxuICB9XHJcblxyXG4gIHJlc2V0Q29sdW1ucyhjb2x1bW5EZWZpbml0aW9ucz86IENvbHVtbltdKSB7XHJcbiAgICBjb25zdCBjb2x1bW5zOiBDb2x1bW5bXSA9IGNvbHVtbkRlZmluaXRpb25zIHx8IHRoaXMuX2NvbHVtbnM7XHJcbiAgICBjb25zdCBjdXJyZW50Q29sdW1uczogQ3VycmVudENvbHVtbltdID0gdGhpcy5nZXRBc3NvY2lhdGVkQ3VycmVudENvbHVtbnMoY29sdW1ucyk7XHJcbiAgICB0aGlzLm9uR3JpZFN0YXRlQ2hhbmdlZC5uZXh0KHsgY2hhbmdlOiB7IG5ld1ZhbHVlczogY3VycmVudENvbHVtbnMsIHR5cGU6IEdyaWRTdGF0ZVR5cGUuY29sdW1ucyB9LCBncmlkU3RhdGU6IHRoaXMuZ2V0Q3VycmVudEdyaWRTdGF0ZSgpIH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqIGlmIHdlIHVzZSBSb3cgU2VsZWN0aW9uIG9yIHRoZSBDaGVja2JveCBTZWxlY3Rvciwgd2UgbmVlZCB0byByZXNldCBhbnkgc2VsZWN0aW9uICovXHJcbiAgcmVzZXRSb3dTZWxlY3Rpb25XaGVuUmVxdWlyZWQoKSB7XHJcbiAgICBpZiAoIXRoaXMubmVlZFRvUHJlc2VydmVSb3dTZWxlY3Rpb24oKSAmJiAodGhpcy5fZ3JpZE9wdGlvbnMuZW5hYmxlUm93U2VsZWN0aW9uIHx8IHRoaXMuX2dyaWRPcHRpb25zLmVuYWJsZUNoZWNrYm94U2VsZWN0b3IpKSB7XHJcbiAgICAgIC8vIHRoaXMgYWxzbyByZXF1aXJlcyB0aGUgUm93IFNlbGVjdGlvbiBNb2RlbCB0byBiZSByZWdpc3RlcmVkIGFzIHdlbGxcclxuICAgICAgY29uc3Qgcm93U2VsZWN0aW9uRXh0ZW5zaW9uID0gdGhpcy5leHRlbnNpb25TZXJ2aWNlICYmIHRoaXMuZXh0ZW5zaW9uU2VydmljZS5nZXRFeHRlbnNpb25CeU5hbWUgJiYgdGhpcy5leHRlbnNpb25TZXJ2aWNlLmdldEV4dGVuc2lvbkJ5TmFtZShFeHRlbnNpb25OYW1lLnJvd1NlbGVjdGlvbik7XHJcbiAgICAgIGlmIChyb3dTZWxlY3Rpb25FeHRlbnNpb24gJiYgcm93U2VsZWN0aW9uRXh0ZW5zaW9uLmluc3RhbmNlKSB7XHJcbiAgICAgICAgdGhpcy5fZ3JpZC5zZXRTZWxlY3RlZFJvd3MoW10pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTdWJzY3JpYmUgdG8gYWxsIG5lY2Vzc2FyeSBTbGlja0dyaWQgb3IgU2VydmljZSBFdmVudHMgdGhhdCBkZWFscyB3aXRoIGEgR3JpZCBjaGFuZ2UsXHJcbiAgICogd2hlbiB0cmlnZ2VyZWQsIHdlIHdpbGwgcHVibGlzaCBhIEdyaWQgU3RhdGUgRXZlbnQgd2l0aCBjdXJyZW50IEdyaWQgU3RhdGVcclxuICAgKi9cclxuICBzdWJzY3JpYmVUb0FsbEdyaWRDaGFuZ2VzKGdyaWQ6IGFueSkge1xyXG4gICAgLy8gU3Vic2NyaWJlIHRvIEV2ZW50IEVtaXR0ZXIgb2YgRmlsdGVyIGNoYW5nZWRcclxuICAgIHRoaXMuX3N1YnNjcmlwdGlvbnMucHVzaChcclxuICAgICAgdGhpcy5maWx0ZXJTZXJ2aWNlLm9uRmlsdGVyQ2hhbmdlZC5zdWJzY3JpYmUoKGN1cnJlbnRGaWx0ZXJzOiBDdXJyZW50RmlsdGVyW10pID0+IHtcclxuICAgICAgICB0aGlzLnJlc2V0Um93U2VsZWN0aW9uV2hlblJlcXVpcmVkKCk7XHJcblxyXG4gICAgICAgIC8vIHRyaWdnZXIgYSBHcmlkIFN0YXRlIGZpbHRlciBjaGFuZ2UsIGhvd2V2ZXIgZG9uJ3QgcmVldmFsdWF0ZSB0aGUgZmlsdGVyZWQgcm93IHNlbGVjdGlvbnMsIHdlJ2xsIGRvIHRoYXQgb24gdGhlIG5leHQgR3JpZCBTdGF0ZSBjaGFuZ2UgYmVsb3dcclxuICAgICAgICB0aGlzLm9uR3JpZFN0YXRlQ2hhbmdlZC5uZXh0KHsgY2hhbmdlOiB7IG5ld1ZhbHVlczogY3VycmVudEZpbHRlcnMsIHR5cGU6IEdyaWRTdGF0ZVR5cGUuZmlsdGVyIH0sIGdyaWRTdGF0ZTogdGhpcy5nZXRDdXJyZW50R3JpZFN0YXRlKHsgcmVxdWVzdFJlZnJlc2hSb3dGaWx0ZXJlZFJvdzogIXRoaXMuaGFzUm93U2VsZWN0aW9uRW5hYmxlZCgpIH0pIH0pO1xyXG5cclxuICAgICAgICAvLyB3aGVuIFJvdyBTZWxlY3Rpb24gaXMgZW5hYmxlZCwgd2UgYWxzbyBuZWVkIHRvIHJlLWV2YWx1YXRlIHRoZSByb3cgc2VsZWN0aW9uIHdpdGggdGhlIGxlZnRvdmVyIGZpbHRlcmVkIGRhdGFzZXRcclxuICAgICAgICBpZiAodGhpcy5oYXNSb3dTZWxlY3Rpb25FbmFibGVkKCkpIHtcclxuICAgICAgICAgIHRoaXMucmVFdmFsdWF0ZVJvd1NlbGVjdGlvbkFmdGVyRmlsdGVyQ2hhbmdlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBTdWJzY3JpYmUgdG8gRXZlbnQgRW1pdHRlciBvZiBGaWx0ZXIgY2xlYXJlZFxyXG4gICAgdGhpcy5fc3Vic2NyaXB0aW9ucy5wdXNoKFxyXG4gICAgICB0aGlzLmZpbHRlclNlcnZpY2Uub25GaWx0ZXJDbGVhcmVkLnN1YnNjcmliZSgoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5yZXNldFJvd1NlbGVjdGlvbldoZW5SZXF1aXJlZCgpO1xyXG4gICAgICAgIHRoaXMub25HcmlkU3RhdGVDaGFuZ2VkLm5leHQoeyBjaGFuZ2U6IHsgbmV3VmFsdWVzOiBbXSwgdHlwZTogR3JpZFN0YXRlVHlwZS5maWx0ZXIgfSwgZ3JpZFN0YXRlOiB0aGlzLmdldEN1cnJlbnRHcmlkU3RhdGUoKSB9KTtcclxuICAgICAgfSlcclxuICAgICk7XHJcblxyXG4gICAgLy8gU3Vic2NyaWJlIHRvIEV2ZW50IEVtaXR0ZXIgb2YgU29ydCBjaGFuZ2VkXHJcbiAgICB0aGlzLl9zdWJzY3JpcHRpb25zLnB1c2goXHJcbiAgICAgIHRoaXMuc29ydFNlcnZpY2Uub25Tb3J0Q2hhbmdlZC5zdWJzY3JpYmUoKGN1cnJlbnRTb3J0ZXJzOiBDdXJyZW50U29ydGVyW10pID0+IHtcclxuICAgICAgICB0aGlzLnJlc2V0Um93U2VsZWN0aW9uV2hlblJlcXVpcmVkKCk7XHJcbiAgICAgICAgdGhpcy5vbkdyaWRTdGF0ZUNoYW5nZWQubmV4dCh7IGNoYW5nZTogeyBuZXdWYWx1ZXM6IGN1cnJlbnRTb3J0ZXJzLCB0eXBlOiBHcmlkU3RhdGVUeXBlLnNvcnRlciB9LCBncmlkU3RhdGU6IHRoaXMuZ2V0Q3VycmVudEdyaWRTdGF0ZSgpIH0pO1xyXG4gICAgICB9KVxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBTdWJzY3JpYmUgdG8gRXZlbnQgRW1pdHRlciBvZiBTb3J0IGNsZWFyZWRcclxuICAgIHRoaXMuX3N1YnNjcmlwdGlvbnMucHVzaChcclxuICAgICAgdGhpcy5zb3J0U2VydmljZS5vblNvcnRDbGVhcmVkLnN1YnNjcmliZSgoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5yZXNldFJvd1NlbGVjdGlvbldoZW5SZXF1aXJlZCgpO1xyXG4gICAgICAgIHRoaXMub25HcmlkU3RhdGVDaGFuZ2VkLm5leHQoeyBjaGFuZ2U6IHsgbmV3VmFsdWVzOiBbXSwgdHlwZTogR3JpZFN0YXRlVHlwZS5zb3J0ZXIgfSwgZ3JpZFN0YXRlOiB0aGlzLmdldEN1cnJlbnRHcmlkU3RhdGUoKSB9KTtcclxuICAgICAgfSlcclxuICAgICk7XHJcblxyXG4gICAgLy8gU3Vic2NyaWJlIHRvIENvbHVtblBpY2tlciBhbmQvb3IgR3JpZE1lbnUgZm9yIHNob3cvaGlkZSBDb2x1bW5zIHZpc2liaWxpdHkgY2hhbmdlc1xyXG4gICAgdGhpcy5iaW5kRXh0ZW5zaW9uQWRkb25FdmVudFRvR3JpZFN0YXRlQ2hhbmdlKEV4dGVuc2lvbk5hbWUuY29sdW1uUGlja2VyLCAnb25Db2x1bW5zQ2hhbmdlZCcpO1xyXG4gICAgdGhpcy5iaW5kRXh0ZW5zaW9uQWRkb25FdmVudFRvR3JpZFN0YXRlQ2hhbmdlKEV4dGVuc2lvbk5hbWUuZ3JpZE1lbnUsICdvbkNvbHVtbnNDaGFuZ2VkJyk7XHJcblxyXG4gICAgLy8gc3Vic2NyaWJlIHRvIENvbHVtbiBSZXNpemUgJiBSZW9yZGVyaW5nXHJcbiAgICB0aGlzLmJpbmRTbGlja0dyaWRDb2x1bW5DaGFuZ2VFdmVudFRvR3JpZFN0YXRlQ2hhbmdlKCdvbkNvbHVtbnNSZW9yZGVyZWQnLCBncmlkKTtcclxuICAgIHRoaXMuYmluZFNsaWNrR3JpZENvbHVtbkNoYW5nZUV2ZW50VG9HcmlkU3RhdGVDaGFuZ2UoJ29uQ29sdW1uc1Jlc2l6ZWQnLCBncmlkKTtcclxuXHJcbiAgICAvLyBzdWJzY3JpYmUgdG8gUm93IFNlbGVjdGlvbiBjaGFuZ2VzICh3aGVuIGVuYWJsZWQpXHJcbiAgICBpZiAodGhpcy5fZ3JpZE9wdGlvbnMuZW5hYmxlUm93U2VsZWN0aW9uIHx8IHRoaXMuX2dyaWRPcHRpb25zLmVuYWJsZUNoZWNrYm94U2VsZWN0b3IpIHtcclxuICAgICAgdGhpcy5iaW5kU2xpY2tHcmlkUm93U2VsZWN0aW9uVG9HcmlkU3RhdGVDaGFuZ2UoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBzdWJzY3JpYmUgdG8gSGVhZGVyTWVudSAoaGlkZSBjb2x1bW4pXHJcbiAgICB0aGlzLl9zdWJzY3JpcHRpb25zLnB1c2goXHJcbiAgICAgIHRoaXMuc2hhcmVkU2VydmljZS5vbkhlYWRlck1lbnVIaWRlQ29sdW1ucy5zdWJzY3JpYmUoKHZpc2libGVDb2x1bW5zOiBDb2x1bW5bXSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRDb2x1bW5zOiBDdXJyZW50Q29sdW1uW10gPSB0aGlzLmdldEFzc29jaWF0ZWRDdXJyZW50Q29sdW1ucyh2aXNpYmxlQ29sdW1ucyk7XHJcbiAgICAgICAgdGhpcy5vbkdyaWRTdGF0ZUNoYW5nZWQubmV4dCh7IGNoYW5nZTogeyBuZXdWYWx1ZXM6IGN1cnJlbnRDb2x1bW5zLCB0eXBlOiBHcmlkU3RhdGVUeXBlLmNvbHVtbnMgfSwgZ3JpZFN0YXRlOiB0aGlzLmdldEN1cnJlbnRHcmlkU3RhdGUoKSB9KTtcclxuICAgICAgfSlcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICAvLyAtLVxyXG4gIC8vIHByaXZhdGUgbWV0aG9kc1xyXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAvKipcclxuICAgKiBCaW5kIGEgU2xpY2tHcmlkIEV4dGVuc2lvbiBFdmVudCB0byBhIEdyaWQgU3RhdGUgY2hhbmdlIGV2ZW50XHJcbiAgICogQHBhcmFtIGV4dGVuc2lvbiBuYW1lXHJcbiAgICogQHBhcmFtIGdyaWRcclxuICAgKi9cclxuICBwcml2YXRlIGJpbmRFeHRlbnNpb25BZGRvbkV2ZW50VG9HcmlkU3RhdGVDaGFuZ2UoZXh0ZW5zaW9uTmFtZTogRXh0ZW5zaW9uTmFtZSwgZXZlbnROYW1lOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IGV4dGVuc2lvbiA9IHRoaXMuZXh0ZW5zaW9uU2VydmljZSAmJiB0aGlzLmV4dGVuc2lvblNlcnZpY2UuZ2V0RXh0ZW5zaW9uQnlOYW1lICYmIHRoaXMuZXh0ZW5zaW9uU2VydmljZS5nZXRFeHRlbnNpb25CeU5hbWUoZXh0ZW5zaW9uTmFtZSk7XHJcbiAgICBjb25zdCBzbGlja0V2ZW50ID0gZXh0ZW5zaW9uICYmIGV4dGVuc2lvbi5pbnN0YW5jZSAmJiBleHRlbnNpb24uaW5zdGFuY2VbZXZlbnROYW1lXTtcclxuXHJcbiAgICBpZiAoc2xpY2tFdmVudCAmJiBzbGlja0V2ZW50LnN1YnNjcmliZSkge1xyXG4gICAgICB0aGlzLl9ldmVudEhhbmRsZXIuc3Vic2NyaWJlKHNsaWNrRXZlbnQsIChlOiBFdmVudCwgYXJnczogYW55KSA9PiB7XHJcbiAgICAgICAgY29uc3QgY29sdW1uczogQ29sdW1uW10gPSBhcmdzICYmIGFyZ3MuY29sdW1ucztcclxuICAgICAgICBjb25zdCBjdXJyZW50Q29sdW1uczogQ3VycmVudENvbHVtbltdID0gdGhpcy5nZXRBc3NvY2lhdGVkQ3VycmVudENvbHVtbnMoY29sdW1ucyk7XHJcbiAgICAgICAgdGhpcy5vbkdyaWRTdGF0ZUNoYW5nZWQubmV4dCh7IGNoYW5nZTogeyBuZXdWYWx1ZXM6IGN1cnJlbnRDb2x1bW5zLCB0eXBlOiBHcmlkU3RhdGVUeXBlLmNvbHVtbnMgfSwgZ3JpZFN0YXRlOiB0aGlzLmdldEN1cnJlbnRHcmlkU3RhdGUoKSB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBCaW5kIGEgR3JpZCBFdmVudCAob2YgQ29sdW1uIGNoYW5nZXMpIHRvIGEgR3JpZCBTdGF0ZSBjaGFuZ2UgZXZlbnRcclxuICAgKiBAcGFyYW0gZXZlbnQgbmFtZVxyXG4gICAqIEBwYXJhbSBncmlkXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBiaW5kU2xpY2tHcmlkQ29sdW1uQ2hhbmdlRXZlbnRUb0dyaWRTdGF0ZUNoYW5nZShldmVudE5hbWU6IHN0cmluZywgZ3JpZDogYW55KSB7XHJcbiAgICBjb25zdCBzbGlja0dyaWRFdmVudCA9IGdyaWQgJiYgZ3JpZFtldmVudE5hbWVdO1xyXG5cclxuICAgIGlmIChzbGlja0dyaWRFdmVudCAmJiBzbGlja0dyaWRFdmVudC5zdWJzY3JpYmUpIHtcclxuICAgICAgdGhpcy5fZXZlbnRIYW5kbGVyLnN1YnNjcmliZShzbGlja0dyaWRFdmVudCwgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGNvbHVtbnM6IENvbHVtbltdID0gZ3JpZC5nZXRDb2x1bW5zKCk7XHJcbiAgICAgICAgY29uc3QgY3VycmVudENvbHVtbnM6IEN1cnJlbnRDb2x1bW5bXSA9IHRoaXMuZ2V0QXNzb2NpYXRlZEN1cnJlbnRDb2x1bW5zKGNvbHVtbnMpO1xyXG4gICAgICAgIHRoaXMub25HcmlkU3RhdGVDaGFuZ2VkLm5leHQoeyBjaGFuZ2U6IHsgbmV3VmFsdWVzOiBjdXJyZW50Q29sdW1ucywgdHlwZTogR3JpZFN0YXRlVHlwZS5jb2x1bW5zIH0sIGdyaWRTdGF0ZTogdGhpcy5nZXRDdXJyZW50R3JpZFN0YXRlKCkgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQmluZCBhIEdyaWQgRXZlbnQgb2YgUm93IFNlbGVjdGlvbiBjaGFuZ2UgdG8gYSBHcmlkIFN0YXRlIGNoYW5nZSBldmVudFxyXG4gICAqIEZvciB0aGUgcm93IHNlbGVjdGlvbiwgd2UgY2FuJ3QganVzdCB1c2UgdGhlIGdldFNlbGVjdGVkUm93cygpIHNpbmNlIHRoaXMgd2lsbCBvbmx5IHJldHVybiB0aGUgdmlzaWJsZSByb3dzIHNob3duIGluIHRoZSBVSSB3aGljaCBpcyBub3QgZW5vdWdoLlxyXG4gICAqIFRoZSBwcm9jZXNzIGlzIG11Y2ggbW9yZSBjb21wbGV4LCB3aGF0IHdlIGhhdmUgdG8gZG8gaW5zdGVhZCBpcyB0aGUgZm9sbG93aW5nXHJcbiAgICogMS4gd2hlbiBjaGFuZ2luZyBhIHJvdyBzZWxlY3Rpb24sIHdlJ2xsIGFkZCB0aGUgbmV3IHNlbGVjdGlvbiBpZiBpdCdzIG5vdCB5ZXQgaW4gdGhlIGdsb2JhbCBhcnJheSBvZiBzZWxlY3RlZCBJRHNcclxuICAgKiAyLiB3aGVuIGRlbGV0aW5nIGEgcm93IHNlbGVjdGlvbiwgd2UnbGwgcmVtb3ZlIHRoZSBzZWxlY3Rpb24gZnJvbSBvdXIgZ2xvYmFsIGFycmF5IG9mIHNlbGVjdGVkIElEcyAodW5sZXNzIGl0IGNhbWUgZnJvbSBhIHBhZ2UgY2hhbmdlKVxyXG4gICAqIDMuIGlmIHdlIHVzZSBQYWdpbmF0aW9uIGFuZCB3ZSBjaGFuZ2UgcGFnZSwgd2UnbGwga2VlcCB0cmFjayB3aXRoIGEgZmxhZyAodGhpcyBmbGFnIHdpbGwgYmUgdXNlZCB0byBza2lwIGFueSBkZWxldGlvbiB3aGVuIHdlJ3JlIGNoYW5naW5nIHBhZ2UpXHJcbiAgICogNC4gYWZ0ZXIgdGhlIFBhZ2Ugb3IgRGF0YVZpZXcgaXMgY2hhbmdlZCBvciB1cGRhdGVkLCB3ZSdsbCBkbyBhbiBleHRyYSAoYW5kIGRlbGF5ZWQpIGNoZWNrIHRvIG1ha2Ugc3VyZSB0aGF0IHdoYXQgd2UgaGF2ZSBpbiBvdXIgZ2xvYmFsIGFycmF5IG9mIHNlbGVjdGVkIElEcyBpcyBkaXNwbGF5ZWQgb24gc2NyZWVuXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBiaW5kU2xpY2tHcmlkUm93U2VsZWN0aW9uVG9HcmlkU3RhdGVDaGFuZ2UoKSB7XHJcbiAgICBpZiAodGhpcy5fZ3JpZCAmJiB0aGlzLl9ncmlkT3B0aW9ucyAmJiB0aGlzLl9kYXRhVmlldykge1xyXG4gICAgICB0aGlzLl9ldmVudEhhbmRsZXIuc3Vic2NyaWJlKHRoaXMuX2RhdGFWaWV3Lm9uQmVmb3JlUGFnaW5nSW5mb0NoYW5nZWQsICgpID0+IHtcclxuICAgICAgICB0aGlzLl93YXNSZWNoZWNrZWRBZnRlclBhZ2VDaGFuZ2UgPSBmYWxzZTsgLy8gcmVzZXQgdGhlIHBhZ2UgY2hlY2sgZmxhZywgdG8gc2tpcCBkZWxldGlvbnMgb24gcGFnZSBjaGFuZ2UgKHVzZWQgaW4gY29kZSBiZWxvdylcclxuICAgICAgfSk7XHJcblxyXG4gICAgICB0aGlzLl9ldmVudEhhbmRsZXIuc3Vic2NyaWJlKHRoaXMuX2RhdGFWaWV3Lm9uUGFnaW5nSW5mb0NoYW5nZWQsICgpID0+IHtcclxuICAgICAgICAvLyB3aGVuIHVzZXIgY2hhbmdlcyBwYWdlLCB0aGUgc2VsZWN0ZWQgcm93IGluZGV4ZXMgbWlnaHQgbm90IHNob3cgdXBcclxuICAgICAgICAvLyB3ZSBjYW4gY2hlY2sgdG8gbWFrZSBzdXJlIGl0IGlzIGJ1dCBpdCBoYXMgdG8gYmUgaW4gYSBkZWxheSBzbyBpdCBoYXBwZW5zIGFmdGVyIHRoZSBmaXJzdCBcIm9uU2VsZWN0ZWRSb3dzQ2hhbmdlZFwiIGlzIHRyaWdnZXJlZFxyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgY29uc3Qgc2hvdWxkQmVTZWxlY3RlZFJvd0luZGV4ZXMgPSB0aGlzLl9kYXRhVmlldy5tYXBJZHNUb1Jvd3ModGhpcy5fc2VsZWN0ZWRSb3dEYXRhQ29udGV4dElkcyB8fCBbXSk7XHJcbiAgICAgICAgICBjb25zdCBjdXJyZW50U2VsZWN0ZWRSb3dJbmRleGVzID0gdGhpcy5fZ3JpZC5nZXRTZWxlY3RlZFJvd3MoKTtcclxuICAgICAgICAgIGlmICghaXNlcXVhbChzaG91bGRCZVNlbGVjdGVkUm93SW5kZXhlcywgY3VycmVudFNlbGVjdGVkUm93SW5kZXhlcykpIHtcclxuICAgICAgICAgICAgdGhpcy5fZ3JpZC5zZXRTZWxlY3RlZFJvd3Moc2hvdWxkQmVTZWxlY3RlZFJvd0luZGV4ZXMpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHRoaXMuX2V2ZW50SGFuZGxlci5zdWJzY3JpYmUodGhpcy5fZ3JpZC5vblNlbGVjdGVkUm93c0NoYW5nZWQsIChlLCBhcmdzKSA9PiB7XHJcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXJncy5yb3dzKSAmJiBBcnJheS5pc0FycmF5KGFyZ3MucHJldmlvdXNTZWxlY3RlZFJvd3MpKSB7XHJcbiAgICAgICAgICBjb25zdCBuZXdTZWxlY3RlZFJvd3MgPSBhcmdzLnJvd3MgYXMgbnVtYmVyW107XHJcbiAgICAgICAgICBjb25zdCBwcmV2U2VsZWN0ZWRSb3dzID0gYXJncy5wcmV2aW91c1NlbGVjdGVkUm93cyBhcyBudW1iZXJbXTtcclxuXHJcbiAgICAgICAgICBjb25zdCBuZXdTZWxlY3RlZEFkZGl0aW9ucyA9IG5ld1NlbGVjdGVkUm93cy5maWx0ZXIoKGkpID0+IHByZXZTZWxlY3RlZFJvd3MuaW5kZXhPZihpKSA8IDApO1xyXG4gICAgICAgICAgY29uc3QgbmV3U2VsZWN0ZWREZWxldGlvbnMgPSBwcmV2U2VsZWN0ZWRSb3dzLmZpbHRlcigoaSkgPT4gbmV3U2VsZWN0ZWRSb3dzLmluZGV4T2YoaSkgPCAwKTtcclxuXHJcbiAgICAgICAgICAvLyBkZWxldGlvbiBtaWdodCBoYXBwZW4gd2hlbiB1c2VyIGlzIGNoYW5naW5nIHBhZ2UsIGlmIHRoYXQgaXMgdGhlIGNhc2UgdGhlbiBza2lwIHRoZSBkZWxldGlvbiBzaW5jZSBpdCdzIG9ubHkgYSB2aXN1YWwgZGVsZXRpb24gKGN1cnJlbnQgcGFnZSlcclxuICAgICAgICAgIC8vIGlmIGl0J3Mgbm90IGEgcGFnZSBjaGFuZ2UgKHdoZW4gdGhlIGZsYWcgaXMgdHJ1ZSksIHRoZW4gcHJvY2VlZCB3aXRoIHRoZSBkZWxldGlvbiBpbiBvdXIgZ2xvYmFsIGFycmF5IG9mIHNlbGVjdGVkIElEc1xyXG4gICAgICAgICAgaWYgKHRoaXMuX3dhc1JlY2hlY2tlZEFmdGVyUGFnZUNoYW5nZSAmJiBuZXdTZWxlY3RlZERlbGV0aW9ucy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRvRGVsZXRlRGF0YUlkczogQXJyYXk8bnVtYmVyIHwgc3RyaW5nPiB8IHVuZGVmaW5lZCA9IHRoaXMuX2RhdGFWaWV3Lm1hcFJvd3NUb0lkcyhuZXdTZWxlY3RlZERlbGV0aW9ucykgfHwgW107XHJcbiAgICAgICAgICAgIHRvRGVsZXRlRGF0YUlkcy5mb3JFYWNoKChyZW1vdmVJZDogbnVtYmVyIHwgc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgICAgdGhpcy5fc2VsZWN0ZWRSb3dEYXRhQ29udGV4dElkcy5zcGxpY2UoKHRoaXMuX3NlbGVjdGVkUm93RGF0YUNvbnRleHRJZHMgYXMgQXJyYXk8bnVtYmVyIHwgc3RyaW5nPiB8IHVuZGVmaW5lZCkuaW5kZXhPZihyZW1vdmVJZCksIDEpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAvLyBpZiB3ZSBoYXZlIG5ld2x5IGFkZGVkIHNlbGVjdGVkIHJvdyhzKSwgbGV0J3MgdXBkYXRlIG91ciBnbG9iYWwgYXJyYXkgb2Ygc2VsZWN0ZWQgSURzXHJcbiAgICAgICAgICBpZiAobmV3U2VsZWN0ZWRBZGRpdGlvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBjb25zdCB0b0FkZERhdGFJZHM6IEFycmF5PG51bWJlciB8IHN0cmluZz4gfCB1bmRlZmluZWQgPSB0aGlzLl9kYXRhVmlldy5tYXBSb3dzVG9JZHMobmV3U2VsZWN0ZWRBZGRpdGlvbnMpIHx8IFtdO1xyXG4gICAgICAgICAgICB0b0FkZERhdGFJZHMuZm9yRWFjaCgoZGF0YUlkOiBudW1iZXIgfCBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgICBpZiAoKHRoaXMuX3NlbGVjdGVkUm93RGF0YUNvbnRleHRJZHMgYXMgQXJyYXk8bnVtYmVyIHwgc3RyaW5nPiB8IHVuZGVmaW5lZCkuaW5kZXhPZihkYXRhSWQpID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgKHRoaXMuX3NlbGVjdGVkUm93RGF0YUNvbnRleHRJZHMgYXMgQXJyYXk8bnVtYmVyIHwgc3RyaW5nPiB8IHVuZGVmaW5lZCkucHVzaChkYXRhSWQpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLy8gd2Ugc2V0IHRoaXMgZmxhZyB3aGljaCB3aWxsIGJlIHVzZWQgb24gdGhlIDJuZCB0aW1lIHRoZSBcIm9uU2VsZWN0ZWRSb3dzQ2hhbmdlZFwiIGV2ZW50IGlzIGNhbGxlZFxyXG4gICAgICAgICAgLy8gd2hlbiBpdCdzIHRoZSBmaXJzdCB0aW1lLCB3ZSBza2lwIGRlbGV0aW9uIGFuZCB0aGlzIGlzIHdoYXQgdGhpcyBmbGFnIGlzIGZvclxyXG4gICAgICAgICAgdGhpcy5fd2FzUmVjaGVja2VkQWZ0ZXJQYWdlQ2hhbmdlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAvLyBmb3JtIG91ciBmdWxsIHNlbGVjdGVkIHJvdyBJRHMsIGxldCdzIG1ha2Ugc3VyZSB0aGVzZSBpbmRleGVzIGFyZSBzZWxlY3RlZCBpbiB0aGUgZ3JpZCwgaWYgbm90IHRoZW4gbGV0J3MgY2FsbCBhIHJlc2VsZWN0XHJcbiAgICAgICAgICAvLyB0aGlzIGNvdWxkIGhhcHBlbiBpZiB0aGUgcHJldmlvdXMgc3RlcCB3YXMgYSBwYWdlIGNoYW5nZVxyXG4gICAgICAgICAgY29uc3Qgc2hvdWxkQmVTZWxlY3RlZFJvd0luZGV4ZXMgPSB0aGlzLl9kYXRhVmlldy5tYXBJZHNUb1Jvd3ModGhpcy5fc2VsZWN0ZWRSb3dEYXRhQ29udGV4dElkcyB8fCBbXSk7XHJcbiAgICAgICAgICBjb25zdCBjdXJyZW50U2VsZWN0ZWRSb3dJbmRleGVzID0gdGhpcy5fZ3JpZC5nZXRTZWxlY3RlZFJvd3MoKTtcclxuICAgICAgICAgIGlmICghaXNlcXVhbChzaG91bGRCZVNlbGVjdGVkUm93SW5kZXhlcywgY3VycmVudFNlbGVjdGVkUm93SW5kZXhlcykpIHtcclxuICAgICAgICAgICAgdGhpcy5fZ3JpZC5zZXRTZWxlY3RlZFJvd3Moc2hvdWxkQmVTZWxlY3RlZFJvd0luZGV4ZXMpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGNvbnN0IGZpbHRlcmVkRGF0YUNvbnRleHRJZHMgPSB0aGlzLnJlZnJlc2hGaWx0ZXJlZFJvd1NlbGVjdGlvbnMoKTtcclxuICAgICAgICAgIGNvbnN0IG5ld1ZhbHVlcyA9IHsgZ3JpZFJvd0luZGV4ZXM6IHRoaXMuX2dyaWQuZ2V0U2VsZWN0ZWRSb3dzKCksIGRhdGFDb250ZXh0SWRzOiB0aGlzLl9zZWxlY3RlZFJvd0RhdGFDb250ZXh0SWRzLCBmaWx0ZXJlZERhdGFDb250ZXh0SWRzIH0gYXMgQ3VycmVudFJvd1NlbGVjdGlvbjtcclxuICAgICAgICAgIHRoaXMub25HcmlkU3RhdGVDaGFuZ2VkLm5leHQoeyBjaGFuZ2U6IHsgbmV3VmFsdWVzLCB0eXBlOiBHcmlkU3RhdGVUeXBlLnJvd1NlbGVjdGlvbiB9LCBncmlkU3RhdGU6IHRoaXMuZ2V0Q3VycmVudEdyaWRTdGF0ZSgpIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKiogQ2hlY2sgd2V0aGVyIHRoZSBncmlkIGhhcyB0aGUgUm93IFNlbGVjdGlvbiBlbmFibGVkICovXHJcbiAgcHJpdmF0ZSBoYXNSb3dTZWxlY3Rpb25FbmFibGVkKCkge1xyXG4gICAgY29uc3Qgc2VsZWN0aW9uTW9kZWwgPSB0aGlzLl9ncmlkLmdldFNlbGVjdGlvbk1vZGVsKCk7XHJcbiAgICBjb25zdCBpc1Jvd1NlbGVjdGlvbkVuYWJsZWQgPSB0aGlzLl9ncmlkT3B0aW9ucy5lbmFibGVSb3dTZWxlY3Rpb24gfHwgdGhpcy5fZ3JpZE9wdGlvbnMuZW5hYmxlQ2hlY2tib3hTZWxlY3RvcjtcclxuICAgIHJldHVybiAoaXNSb3dTZWxlY3Rpb25FbmFibGVkICYmIHNlbGVjdGlvbk1vZGVsKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgcmVFdmFsdWF0ZVJvd1NlbGVjdGlvbkFmdGVyRmlsdGVyQ2hhbmdlKCkge1xyXG4gICAgY29uc3QgY3VycmVudFNlbGVjdGVkUm93SW5kZXhlcyA9IHRoaXMuX2dyaWQuZ2V0U2VsZWN0ZWRSb3dzKCk7XHJcbiAgICBjb25zdCBwcmV2aW91c1NlbGVjdGVkRmlsdGVyZWRSb3dEYXRhQ29udGV4dElkcyA9IHRoaXMuX3NlbGVjdGVkRmlsdGVyZWRSb3dEYXRhQ29udGV4dElkcy5zbGljZSgpO1xyXG4gICAgY29uc3QgZmlsdGVyZWREYXRhQ29udGV4dElkcyA9IHRoaXMucmVmcmVzaEZpbHRlcmVkUm93U2VsZWN0aW9ucygpO1xyXG5cclxuICAgIC8vIHdoZW4gc2VsZWN0aW9uIGNoYW5nZWQsIHdlJ2xsIHNlbmQgYSBHcmlkIFN0YXRlIGV2ZW50IHdpdGggdGhlIHNlbGVjdGlvbiBjaGFuZ2VzXHJcbiAgICBpZiAoIWlzZXF1YWwodGhpcy5fc2VsZWN0ZWRGaWx0ZXJlZFJvd0RhdGFDb250ZXh0SWRzLCBwcmV2aW91c1NlbGVjdGVkRmlsdGVyZWRSb3dEYXRhQ29udGV4dElkcykpIHtcclxuICAgICAgY29uc3QgbmV3VmFsdWVzID0geyBncmlkUm93SW5kZXhlczogY3VycmVudFNlbGVjdGVkUm93SW5kZXhlcywgZGF0YUNvbnRleHRJZHM6IHRoaXMuX3NlbGVjdGVkUm93RGF0YUNvbnRleHRJZHMsIGZpbHRlcmVkRGF0YUNvbnRleHRJZHMgfSBhcyBDdXJyZW50Um93U2VsZWN0aW9uO1xyXG4gICAgICB0aGlzLm9uR3JpZFN0YXRlQ2hhbmdlZC5uZXh0KHsgY2hhbmdlOiB7IG5ld1ZhbHVlcywgdHlwZTogR3JpZFN0YXRlVHlwZS5yb3dTZWxlY3Rpb24gfSwgZ3JpZFN0YXRlOiB0aGlzLmdldEN1cnJlbnRHcmlkU3RhdGUoeyByZXF1ZXN0UmVmcmVzaFJvd0ZpbHRlcmVkUm93OiBmYWxzZSB9KSB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKiBXaGVuIGEgRmlsdGVyIGlzIHRyaWdnZXJlZCBvciB3aGVuIHVzZXIgcmVxdWVzdCBpdCwgd2Ugd2lsbCByZWZyZXNoIHRoZSBmaWx0ZXJlZCBzZWxlY3Rpb24gYXJyYXkgYW5kIHJldHVybiBpdCAqL1xyXG4gIHByaXZhdGUgcmVmcmVzaEZpbHRlcmVkUm93U2VsZWN0aW9ucygpOiBBcnJheTxudW1iZXIgfCBzdHJpbmc+IHwgdW5kZWZpbmVkIHtcclxuICAgIGxldCB0bXBGaWx0ZXJlZEFycmF5ID0gW107XHJcbiAgICBjb25zdCBmaWx0ZXJlZERhdGFzZXQgPSB0aGlzLl9kYXRhVmlldy5nZXRGaWx0ZXJlZEl0ZW1zKCkgfHwgW107XHJcbiAgICBpZiAoQXJyYXkuaXNBcnJheSh0aGlzLl9zZWxlY3RlZFJvd0RhdGFDb250ZXh0SWRzKSkge1xyXG4gICAgICBjb25zdCBzZWxlY3RlZEZpbHRlcmVkUm93RGF0YUNvbnRleHRJZHMgPSBbLi4udGhpcy5fc2VsZWN0ZWRSb3dEYXRhQ29udGV4dElkc107IC8vIHRha2UgYSBmcmVzaCBjb3B5IG9mIGFsbCBzZWxlY3Rpb25zIGJlZm9yZSBmaWx0ZXJpbmcgdGhlIHJvdyBpZHNcclxuICAgICAgdG1wRmlsdGVyZWRBcnJheSA9IHNlbGVjdGVkRmlsdGVyZWRSb3dEYXRhQ29udGV4dElkcy5maWx0ZXIoKHNlbGVjdGVkUm93SWQ6IG51bWJlciB8IHN0cmluZykgPT4ge1xyXG4gICAgICAgIHJldHVybiBmaWx0ZXJlZERhdGFzZXQuZmluZEluZGV4KChpdGVtOiBhbnkpID0+IGl0ZW1bdGhpcy5kYXRhc2V0SWRQcm9wTmFtZV0gPT09IHNlbGVjdGVkUm93SWQpID4gLTE7XHJcbiAgICAgIH0pO1xyXG4gICAgICB0aGlzLl9zZWxlY3RlZEZpbHRlcmVkUm93RGF0YUNvbnRleHRJZHMgPSB0bXBGaWx0ZXJlZEFycmF5O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRtcEZpbHRlcmVkQXJyYXk7XHJcbiAgfVxyXG59XHJcbiJdfQ==