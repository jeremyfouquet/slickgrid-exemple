import { arrayToCsvFormatter } from './arrayToCsvFormatter';
import { findOrDefault } from '../services/utilities';
/**
 * A formatter to show the label property value of a params collection
 */
export const collectionFormatter = (row, cell, value, columnDef, dataContext, grid) => {
    if (!value || !columnDef || !columnDef.params || !columnDef.params.collection
        || !columnDef.params.collection.length) {
        return value;
    }
    const { params, params: { collection } } = columnDef;
    const labelName = (params.customStructure) ? params.customStructure.label : 'label';
    const valueName = (params.customStructure) ? params.customStructure.value : 'value';
    if (Array.isArray(value)) {
        return arrayToCsvFormatter(row, cell, value.map((v) => findOrDefault(collection, (c) => c[valueName] === v)[labelName]), columnDef, dataContext, grid);
    }
    return findOrDefault(collection, (c) => c[valueName] === value)[labelName] || '';
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29sbGVjdGlvbkZvcm1hdHRlci5qcyIsInNvdXJjZVJvb3QiOiJuZzovL2FuZ3VsYXItc2xpY2tncmlkLyIsInNvdXJjZXMiOlsiYXBwL21vZHVsZXMvYW5ndWxhci1zbGlja2dyaWQvZm9ybWF0dGVycy9jb2xsZWN0aW9uRm9ybWF0dGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBRTVELE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUV0RDs7R0FFRztBQUNILE1BQU0sQ0FBQyxNQUFNLG1CQUFtQixHQUFjLENBQUMsR0FBVyxFQUFFLElBQVksRUFBRSxLQUFVLEVBQUUsU0FBaUIsRUFBRSxXQUFnQixFQUFFLElBQVMsRUFBRSxFQUFFO0lBQ3RJLElBQUksQ0FBQyxLQUFLLElBQUksQ0FBQyxTQUFTLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxVQUFVO1dBQ3hFLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsTUFBTSxFQUFFO1FBQ3hDLE9BQU8sS0FBSyxDQUFDO0tBQ2Q7SUFFRCxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxFQUFFLFVBQVUsRUFBRSxFQUFFLEdBQUcsU0FBUyxDQUFDO0lBQ3JELE1BQU0sU0FBUyxHQUFHLENBQUMsTUFBTSxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDO0lBQ3BGLE1BQU0sU0FBUyxHQUFHLENBQUMsTUFBTSxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDO0lBRXBGLElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFBRTtRQUN4QixPQUFPLG1CQUFtQixDQUFDLEdBQUcsRUFDNUIsSUFBSSxFQUNKLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFNLEVBQUUsRUFBRSxDQUFDLGFBQWEsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxDQUFNLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxFQUMzRixTQUFTLEVBQ1QsV0FBVyxFQUNYLElBQUksQ0FBQyxDQUFDO0tBQ1Q7SUFFRCxPQUFPLGFBQWEsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxDQUFNLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsS0FBSyxLQUFLLENBQUMsQ0FBQyxTQUFTLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDeEYsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYXJyYXlUb0NzdkZvcm1hdHRlciB9IGZyb20gJy4vYXJyYXlUb0NzdkZvcm1hdHRlcic7XHJcbmltcG9ydCB7IENvbHVtbiwgRm9ybWF0dGVyIH0gZnJvbSAnLi8uLi9tb2RlbHMvaW5kZXgnO1xyXG5pbXBvcnQgeyBmaW5kT3JEZWZhdWx0IH0gZnJvbSAnLi4vc2VydmljZXMvdXRpbGl0aWVzJztcclxuXHJcbi8qKlxyXG4gKiBBIGZvcm1hdHRlciB0byBzaG93IHRoZSBsYWJlbCBwcm9wZXJ0eSB2YWx1ZSBvZiBhIHBhcmFtcyBjb2xsZWN0aW9uXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgY29sbGVjdGlvbkZvcm1hdHRlcjogRm9ybWF0dGVyID0gKHJvdzogbnVtYmVyLCBjZWxsOiBudW1iZXIsIHZhbHVlOiBhbnksIGNvbHVtbkRlZjogQ29sdW1uLCBkYXRhQ29udGV4dDogYW55LCBncmlkOiBhbnkpID0+IHtcclxuICBpZiAoIXZhbHVlIHx8ICFjb2x1bW5EZWYgfHwgIWNvbHVtbkRlZi5wYXJhbXMgfHwgIWNvbHVtbkRlZi5wYXJhbXMuY29sbGVjdGlvblxyXG4gICAgfHwgIWNvbHVtbkRlZi5wYXJhbXMuY29sbGVjdGlvbi5sZW5ndGgpIHtcclxuICAgIHJldHVybiB2YWx1ZTtcclxuICB9XHJcblxyXG4gIGNvbnN0IHsgcGFyYW1zLCBwYXJhbXM6IHsgY29sbGVjdGlvbiB9IH0gPSBjb2x1bW5EZWY7XHJcbiAgY29uc3QgbGFiZWxOYW1lID0gKHBhcmFtcy5jdXN0b21TdHJ1Y3R1cmUpID8gcGFyYW1zLmN1c3RvbVN0cnVjdHVyZS5sYWJlbCA6ICdsYWJlbCc7XHJcbiAgY29uc3QgdmFsdWVOYW1lID0gKHBhcmFtcy5jdXN0b21TdHJ1Y3R1cmUpID8gcGFyYW1zLmN1c3RvbVN0cnVjdHVyZS52YWx1ZSA6ICd2YWx1ZSc7XHJcblxyXG4gIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xyXG4gICAgcmV0dXJuIGFycmF5VG9Dc3ZGb3JtYXR0ZXIocm93LFxyXG4gICAgICBjZWxsLFxyXG4gICAgICB2YWx1ZS5tYXAoKHY6IGFueSkgPT4gZmluZE9yRGVmYXVsdChjb2xsZWN0aW9uLCAoYzogYW55KSA9PiBjW3ZhbHVlTmFtZV0gPT09IHYpW2xhYmVsTmFtZV0pLFxyXG4gICAgICBjb2x1bW5EZWYsXHJcbiAgICAgIGRhdGFDb250ZXh0LFxyXG4gICAgICBncmlkKTtcclxuICB9XHJcblxyXG4gIHJldHVybiBmaW5kT3JEZWZhdWx0KGNvbGxlY3Rpb24sIChjOiBhbnkpID0+IGNbdmFsdWVOYW1lXSA9PT0gdmFsdWUpW2xhYmVsTmFtZV0gfHwgJyc7XHJcbn07XHJcbiJdfQ==